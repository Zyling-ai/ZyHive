import{d as C,o as I,a as x,c as b,b as t,w as o,e as a,f as _,t as h,g as N,r as l,h as n,u as B,i as k,j as E,k as S,E as g}from"./index-DMcnGTag.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"login-wrapper"},F={class:"captcha-row"},H={class:"captcha-question"},K={class:"login-copyright"},U={key:0,class:"login-version"},j=C({__name:"LoginView",setup(q){const M=B(),u=l(""),d=l(!1),c=l("");I(async()=>{try{const s=await x.get("/version");c.value=s.data.version}catch{}});const p=l(0),m=l(0),i=l("");function r(){p.value=Math.floor(Math.random()*9)+1,m.value=Math.floor(Math.random()*9)+1,i.value=""}r();async function y(){const s=parseInt(i.value.trim(),10);if(isNaN(s)||s!==p.value+m.value){g.error("验证码错误，请重新计算"),r();return}d.value=!0;try{localStorage.setItem("aipanel_token",u.value),await x.get("/health"),g.success("登录成功"),M.push("/")}catch{g.error("令牌无效"),localStorage.removeItem("aipanel_token"),r()}finally{d.value=!1}}return(s,e)=>{const w=n("el-input"),f=n("el-form-item"),V=n("el-button"),z=n("el-form"),L=n("el-card");return k(),b("div",A,[t(L,{class:"login-card",shadow:"always"},{header:o(()=>[...e[2]||(e[2]=[a("div",{class:"login-header"},[a("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M12 2L21.5 7.5V16.5L12 22L2.5 16.5V7.5L12 2Z",fill:"#409EFF"}),a("text",{x:"12",y:"16.5","text-anchor":"middle",fill:"white","font-size":"10","font-weight":"800","font-family":"sans-serif"},"Z")]),a("h2",null,"引巢 · ZyHive"),a("p",{class:"subtitle"},"zyling AI 团队操作系统")],-1)])]),default:o(()=>[t(z,{onSubmit:E(y,["prevent"])},{default:o(()=>[t(f,{label:"访问令牌"},{default:o(()=>[t(w,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=v=>u.value=v),type:"password",placeholder:"输入访问令牌","show-password":"",size:"large"},null,8,["modelValue"])]),_:1}),t(f,{label:"验证码"},{default:o(()=>[a("div",F,[a("span",H,h(p.value)+" + "+h(m.value)+" = ?",1),t(w,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=v=>i.value=v),placeholder:"结果",size:"large",style:{width:"100px",margin:"0 8px"},onKeyup:S(y,["enter"])},null,8,["modelValue"]),t(V,{size:"small",text:"",type:"primary",onClick:r},{default:o(()=>[...e[3]||(e[3]=[_("换一题",-1)])]),_:1})])]),_:1}),t(f,null,{default:o(()=>[t(V,{type:"primary","native-type":"submit",loading:d.value,size:"large",style:{width:"100%"}},{default:o(()=>[...e[4]||(e[4]=[_(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),a("p",K,[e[5]||(e[5]=_("© 2026 引巢 · ZyHive · zyling",-1)),c.value?(k(),b("span",U," v"+h(c.value),1)):N("",!0)])])}}}),T=Z(j,[["__scopeId","data-v-38b88084"]]);export{T as default};
