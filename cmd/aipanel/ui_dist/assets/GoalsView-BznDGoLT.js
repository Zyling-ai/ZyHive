import{d as zt,o as Ut,A as St,P as Qe,ac as H,c as p,e as o,b as a,w as s,t as v,g as D,F as k,q as M,p as I,z as j,f as y,j as et,n as V,ad as Yt,l as z,r as b,y as tt,I as F,h as g,i as u,a1 as Nt,K as oe,ae as ye,M as Ht,af as lt,ag as ze,J as Gt,U as Ft,ab as Lt,E as T,B as Bt}from"./index-BjPwO8lO.js";import{A as Rt}from"./AiChat-DYxLoWAV.js";import{_ as Et}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ot={class:"goals-studio"},Pt={class:"sidebar-top"},Xt={class:"sidebar-acts"},jt={class:"gs-filter"},Zt={class:"goal-list"},qt={key:0,class:"goal-item goal-item-new active"},Wt={class:"gi-top"},Jt={class:"gi-title gi-title-new"},Kt={key:1,class:"list-empty"},Qt=["onClick"],el={class:"gi-top"},tl={class:"gi-title"},ll={class:"gi-progress-wrap"},al={class:"gi-progress-num"},sl={class:"gi-bottom"},nl={class:"gi-avatars"},ol={key:0,class:"gi-avatar-more"},il={class:"gi-dates"},dl={class:"gs-editor"},ul={key:0,class:"editor-gantt-overview"},rl={class:"overview-header"},ml={class:"overview-title"},cl={key:0,class:"gantt-empty"},pl={class:"gantt-header"},vl={class:"gantt-label-col"},fl={class:"gantt-scale-hint"},gl={class:"gantt-years"},_l={class:"gantt-months"},yl={class:"gantt-body"},bl={class:"gantt-overlay","aria-hidden":"true"},hl={class:"gantt-timeline-col",style:{position:"relative"}},wl=["onClick"],kl={class:"gantt-label-col"},Vl={class:"gantt-label-inner"},Al={class:"gantt-agent-avatars"},Ml={class:"gantt-goal-name"},Cl={class:"gantt-timeline-col"},Tl={key:0,class:"gantt-bar-label"},Dl=["title"],Il={key:1,class:"gantt-no-date"},xl={key:0,class:"gantt-summary-panel"},$l={class:"gsp-header"},zl={class:"gsp-avatars"},Ul={class:"gsp-title-block"},Sl={class:"gsp-title"},Yl={class:"gsp-body"},Nl={class:"gsp-stat"},Hl={class:"gsp-stat-val"},Gl={class:"gsp-stat"},Fl={class:"gsp-stat-val"},Ll={key:0,class:"gsp-stat"},Bl={class:"gsp-stat-val"},Rl={key:1,class:"gsp-desc"},El={class:"editor-toolbar"},Ol={class:"editor-breadcrumb"},Pl={class:"toolbar-acts"},Xl={class:"editor-form"},jl={style:{width:"100%"}},Zl={class:"editor-toolbar"},ql={class:"editor-breadcrumb"},Wl={class:"crumb-name"},Jl={class:"toolbar-acts"},Kl={class:"editor-form"},Ql={style:{width:"100%"}},ea={class:"tab-panel"},ta={class:"tab-panel-head"},la={class:"code-cell"},aa={class:"tab-panel"},sa={key:0,style:{"text-align":"center",padding:"20px"}},na={class:"record-card"},oa={class:"record-header"},ia={class:"rec-name"},da={class:"rec-output"},ua={class:"chat-panel-head"},ra={class:"chat-wrap"},ma=2*6e4,ca=20*365*864e5,at=30*864e5,pa=zt({__name:"GoalsView",setup(va){const be=b(260),he=b(360),Q=b("");let Ue=0,we=0;function Se(t,e){Q.value=e,Ue=t.clientX,we=e==="side"?be.value:he.value,document.addEventListener("mousemove",Ye),document.addEventListener("mouseup",Ne),t.preventDefault()}function Ye(t){const e=t.clientX-Ue;Q.value==="side"?be.value=Math.max(200,Math.min(400,we+e)):he.value=Math.max(280,Math.min(560,we-e))}function Ne(){Q.value="",document.removeEventListener("mousemove",Ye),document.removeEventListener("mouseup",Ne)}const ie=b([]),Y=b([]),de=b(""),ue=b(""),m=b(null),L=b(!1),re=b(!1),ee=b("basic"),te=b(!1),me=b([]),ke=b(!1),ce=b("0 9 * * 1"),E=b(""),i=tt({title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]}),A=tt({name:"",agentId:"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),Z=F(()=>{const t={};return Y.value.forEach(e=>{t[e.id]=e.name}),t}),O=F(()=>{const t={};return Y.value.forEach(e=>{t[e.id]=e.avatarColor||"#409eff"}),t}),pe=F(()=>{let t=[...ie.value];return de.value&&(t=t.filter(e=>e.status===de.value)),ue.value&&(t=t.filter(e=>(e.agentIds||[]).includes(ue.value))),t}),B=b(at),P=b(Date.now()+at*.4),Ve=Math.round(30.44*864e5),He=[{ms:6e4,kind:"minute",step:1,label:"1åˆ†é’Ÿ"},{ms:5*6e4,kind:"minute",step:5,label:"5åˆ†é’Ÿ"},{ms:15*6e4,kind:"minute",step:15,label:"15åˆ†é’Ÿ"},{ms:30*6e4,kind:"minute",step:30,label:"30åˆ†é’Ÿ"},{ms:36e5,kind:"hour",step:1,label:"1å°æ—¶"},{ms:6*36e5,kind:"hour",step:6,label:"6å°æ—¶"},{ms:12*36e5,kind:"hour",step:12,label:"12å°æ—¶"},{ms:864e5,kind:"day",step:1,label:"1å¤©"},{ms:7*864e5,kind:"week",step:7,label:"1å‘¨"},{ms:Ve,kind:"month",step:1,label:"1æœˆ"},{ms:3*Ve,kind:"month",step:3,label:"3æœˆ"},{ms:6*Ve,kind:"month",step:6,label:"6æœˆ"},{ms:365*864e5,kind:"year",step:1,label:"1å¹´"},{ms:2*365*864e5,kind:"year",step:2,label:"2å¹´"},{ms:5*365*864e5,kind:"year",step:5,label:"5å¹´"}],Ge=F(()=>{const t=B.value/8;return He.reduce((e,n)=>Math.abs(n.ms-t)<Math.abs(e.ms-t)?n:e)}),q=F(()=>({start:new Date(P.value-B.value/2),end:new Date(P.value+B.value/2)})),Fe=F(()=>At(q.value.start,q.value.end,Ge.value)),le=b(700),Ae=b(null),Le=F(()=>{const t=Fe.value,e=le.value;if(!t.length||!e)return t;const r=Math.max(1,Math.floor(e/50));if(t.length<=r)return t;const c=Math.ceil(t.length/r);return t.filter((_,U)=>U%c===0)}),st=Fe,Me=b(!1),Ce=b(!1);let ve=!1,fe=!1,Te=0,De=0,W=0,Ie=0;function Be(){cancelAnimationFrame(Ie),W=0}function nt(t){Be(),ve=!0,fe=!1,Me.value=!0,Ce.value=!1,Te=t.clientX,De=Date.now(),W=0}function ot(t){if(!ve)return;const e=t.clientX-Te,n=Date.now()-De;if(Math.abs(e)>3&&(fe=!0,Ce.value=!0),fe){const r=Math.max(100,le.value||700);n>0&&(W=W*.65+e/n*.35),P.value-=e/r*B.value}Te=t.clientX,De=Date.now()}function Re(){if(ve&&(ve=!1,Me.value=!1,fe&&Math.abs(W)>.05)){let t=W,e=Date.now();const n=()=>{const r=Date.now(),c=Math.min(r-e,64);e=r;const _=Math.max(100,le.value||700);P.value-=t*c/_*B.value;const U=5*365*864e5;P.value=Math.max(Date.now()-U,Math.min(Date.now()+U,P.value)),t*=Math.pow(.92,c/16),Math.abs(t)>.008&&(Ie=requestAnimationFrame(n))};Ie=requestAnimationFrame(n)}}function it(t){t.preventDefault(),Be();const e=Math.exp(t.deltaY*.0015),n=Math.max(ma,Math.min(ca,B.value*e)),r=Ae.value?.getBoundingClientRect();if(r&&r.width>0){const c=Math.max(0,Math.min(1,(t.clientX-r.left)/r.width)),_=P.value-B.value/2+c*B.value;P.value=_+n*(.5-c)}B.value=n}const h=b(null);function dt(t){Ce.value||(h.value=h.value?.id===t.id?null:t)}const Ee=F(()=>{const{start:t,end:e}=q.value,n=Date.now();return n<t.getTime()||n>e.getTime()?null:`${(n-t.getTime())/(e.getTime()-t.getTime())*100}%`}),ut=F(()=>{const t=localStorage.getItem("aipanel_token")||"TOKEN",e=`${window.location.protocol}//${window.location.host}`,n=Y.value.map(c=>`- ${c.id}: ${c.name}`).join(`
`),r=m.value?`
### å½“å‰é€‰ä¸­ç›®æ ‡
ID: ${m.value.id}
æ ‡é¢˜: ${m.value.title}
çŠ¶æ€: ${m.value.status}
è¿›åº¦: ${m.value.progress}%
å¼€å§‹: ${m.value.startAt||"æœªè®¾ç½®"}
ç»“æŸ: ${m.value.endAt||"æœªè®¾ç½®"}`:"";return`## ç›®æ ‡è§„åˆ’åŠ©æ‰‹

ä½ æ˜¯å›¢é˜Ÿçš„ç›®æ ‡è§„åˆ’åŠ©æ‰‹ã€‚

### ðŸŽ¯ æ ¸å¿ƒèƒ½åŠ›ï¼šå¡«å†™è¡¨å•ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰

å½“ç”¨æˆ·æè¿°ç›®æ ‡ä¿¡æ¯æ—¶ï¼Œ**ç›´æŽ¥è¾“å‡º JSON å¡«å……è¡¨å•**ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

\`\`\`json
{"action":"fill_goal","data":{"title":"ç›®æ ‡æ ‡é¢˜","description":"æè¿°ï¼ˆå¯é€‰ï¼‰","type":"team","agentIds":["agentId1"],"status":"active","startAt":"2026-03-01T00:00:00Z","endAt":"2026-06-30T00:00:00Z","progress":0,"milestones":[{"title":"é‡Œç¨‹ç¢‘1","dueAt":"2026-04-01T00:00:00Z","done":false}]}}
\`\`\`

- type: "personal"ï¼ˆä¸ªäººï¼‰æˆ– "team"ï¼ˆå›¢é˜Ÿï¼‰
- status: "draft" / "active" / "completed" / "cancelled"
- agentIds: å‚ä¸Žæˆå‘˜çš„ ID åˆ—è¡¨
- æ—¶é—´æ ¼å¼ï¼šISO 8601ï¼ˆå¦‚ "2026-03-01T00:00:00Z"ï¼‰
- è¾“å‡º JSON åŽï¼Œé¡µé¢ä¼šè‡ªåŠ¨å¡«å……è¡¨å•ï¼Œç”¨æˆ·ç¡®è®¤åŽä¿å­˜

### API æ“ä½œï¼ˆå¦‚éœ€ç›´æŽ¥æ›´æ–°å·²æœ‰ç›®æ ‡ï¼‰

**æ›´æ–°è¿›åº¦ï¼š**
\`\`\`bash
curl -s -X PATCH ${e}/api/goals/{id}/progress -H "Authorization: Bearer ${t}" -H "Content-Type: application/json" -d '{"progress":50}'
\`\`\`

**æ·»åŠ å®šæœŸæ£€æŸ¥ï¼š**
\`\`\`bash
curl -s -X POST ${e}/api/goals/{id}/checks -H "Authorization: Bearer ${t}" -H "Content-Type: application/json" -d '{"name":"æ¯å‘¨æ£€æŸ¥","schedule":"0 9 * * 1","agentId":"agentId","tz":"Asia/Shanghai","prompt":"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€æœ¬å‘¨è¿›å±•","enabled":true}'
\`\`\`

### å½“å‰å›¢é˜Ÿæˆå‘˜
${n}
${r}

**å·¥ä½œæµç¨‹ï¼š**
1. ç”¨æˆ·æè¿°ç›®æ ‡ â†’ ä½ è¾“å‡º fill_goal JSON â†’ é¡µé¢è‡ªåŠ¨å¡«è¡¨
2. ç”¨æˆ·ç¡®è®¤å†…å®¹åŽè‡ªè¡Œç‚¹å‡»ã€Œåˆ›å»ºã€æˆ–ã€Œä¿å­˜ã€æŒ‰é’®
3. å¦‚éœ€æ›´æ–°å·²å­˜åœ¨ç›®æ ‡çš„è¿›åº¦/æ£€æŸ¥ï¼Œä½¿ç”¨ API æ“ä½œ`.trim()});Ut(async()=>{const t=await St.list().catch(()=>({data:[]}));Y.value=(t.data||[]).filter(e=>!e.system),E.value=Y.value[0]?.id||"",await X()}),Qe(Ae,t=>{if(!t)return;new ResizeObserver(n=>{n[0]&&(le.value=n[0].contentRect.width)}).observe(t),le.value=t.getBoundingClientRect().width},{immediate:!0}),Qe(ee,async t=>{t==="records"&&m.value&&await rt(m.value.id)});async function X(){try{const t=await H.list();if(ie.value=t.data||[],m.value){const e=ie.value.find(n=>n.id===m.value.id);e&&(m.value=e)}}catch{}}async function rt(t){ke.value=!0;try{const e=await H.listCheckRecords(t);me.value=(e.data||[]).slice().reverse()}catch{me.value=[]}finally{ke.value=!1}}function xe(t){m.value=t,L.value=!1,ee.value="basic",Object.assign(i,{title:t.title,description:t.description||"",type:t.type,agentIds:[...t.agentIds||[]],status:t.status,progress:t.progress,startAt:R(t.startAt)?t.startAt:"",endAt:R(t.endAt)?t.endAt:"",milestones:(t.milestones||[]).map(e=>({...e}))})}function $e(){m.value=null,L.value=!0,ee.value="basic",Xe.value=Date.now(),Object.assign(i,{title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]})}async function Oe(){if(!i.title.trim()){T.warning("è¯·å¡«å†™ç›®æ ‡æ ‡é¢˜");return}re.value=!0;const t={title:i.title,description:i.description||void 0,type:i.type,agentIds:i.agentIds,status:i.status,progress:i.progress,startAt:i.startAt||void 0,endAt:i.endAt||void 0,milestones:i.milestones.map(e=>({...e,id:e.id||"ms-"+Math.random().toString(36).slice(2,10)}))};try{if(m.value)await H.update(m.value.id,t),T.success("ä¿å­˜æˆåŠŸ"),await X();else{const e=await H.create(t);T.success("åˆ›å»ºæˆåŠŸ"),L.value=!1,await X();const n=ie.value.find(r=>r.id===e.data.id)||e.data;xe(n)}}catch(e){T.error(e.response?.data?.error||"æ“ä½œå¤±è´¥")}finally{re.value=!1}}async function mt(){if(m.value)try{await H.delete(m.value.id),T.success("å·²åˆ é™¤"),m.value=null,await X()}catch{T.error("åˆ é™¤å¤±è´¥")}}function Pe(){i.milestones.push({id:"ms-"+Math.random().toString(36).slice(2,10),title:"",dueAt:"",done:!1,agentIds:[]})}function ct(){Object.assign(A,{name:"",agentId:Y.value[0]?.id||"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),ce.value="0 9 * * 1",te.value=!0}function pt(t){t!=="custom"&&(A.schedule=t)}async function vt(){if(!A.name.trim()){T.warning("è¯·å¡«å†™æ£€æŸ¥åç§°");return}if(!A.agentId){T.warning("è¯·é€‰æ‹©æ‰§è¡Œæˆå‘˜");return}if(m.value)try{await H.addCheck(m.value.id,{...A}),T.success("æ·»åŠ æˆåŠŸ"),te.value=!1;const t=await H.get(m.value.id);m.value=t.data,await X()}catch(t){T.error(t.response?.data?.error||"æ·»åŠ å¤±è´¥")}}async function ft(t){if(m.value)try{await H.updateCheck(m.value.id,t.id,{enabled:t.enabled})}catch{T.error("æ›´æ–°å¤±è´¥")}}async function gt(t){if(m.value)try{await H.runCheck(m.value.id,t.id),T.success("å·²è§¦å‘æ£€æŸ¥")}catch(e){T.error(e.response?.data?.error||"è§¦å‘å¤±è´¥")}}async function _t(t){if(m.value)try{await Bt.confirm(`ç¡®å®šåˆ é™¤æ£€æŸ¥è®¡åˆ’ã€Œ${t.name}ã€ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{type:"warning"}),await H.removeCheck(m.value.id,t.id),T.success("å·²åˆ é™¤");const e=await H.get(m.value.id);m.value=e.data,await X()}catch(e){e!=="cancel"&&T.error("åˆ é™¤å¤±è´¥")}}const Xe=b(0),je=F(()=>E.value?m.value?`goal-${m.value.id}-${E.value}`:`goals-new-${Xe.value}-${E.value}`:"");function yt(t){setTimeout(()=>X(),2e3);const e=c=>{try{const _=JSON.parse(c);if(_.action==="fill_goal"&&_.data)return bt(_.data),!0}catch{}return!1},n=t.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(n?.[1]&&e(n[1]))return;const r=t.match(/(\{"action"\s*:\s*"fill_goal"[\s\S]*?\})/);r?.[1]&&e(r[1])}function bt(t){!L.value&&!m.value&&$e(),t.title&&(i.title=t.title),t.description&&(i.description=t.description),t.type&&(i.type=t.type),t.status&&(i.status=t.status),typeof t.progress=="number"&&(i.progress=t.progress),t.agentIds&&Array.isArray(t.agentIds)&&(i.agentIds=t.agentIds),t.startAt&&(i.startAt=t.startAt),t.endAt&&(i.endAt=t.endAt),t.milestones&&Array.isArray(t.milestones)&&(i.milestones=t.milestones.map(e=>({id:e.id||"ms-"+Math.random().toString(36).slice(2,10),title:e.title||"",dueAt:e.dueAt||"",done:!!e.done,agentIds:e.agentIds||[]}))),T.success("AI å·²å¡«å†™è¡¨å•ï¼Œç¡®è®¤åŽç‚¹å‡»ä¿å­˜")}function R(t){if(!t)return!1;const e=new Date(t);return!isNaN(e.getTime())&&e.getFullYear()>1970}function ht(t){return R(t.startAt)&&R(t.endAt)}function wt(t){const{start:e,end:n}=q.value,r=n.getTime()-e.getTime();return Math.max(1,(new Date(t.endAt).getTime()-new Date(t.startAt).getTime())/r*100)}function kt(t){const{start:e,end:n}=q.value,r=n.getTime()-e.getTime(),c=new Date(t.startAt).getTime(),_=new Date(t.endAt).getTime(),U=Math.max(0,(c-e.getTime())/r*100),se=Math.max(1,(_-c)/r*100),C=t.agentIds?.[0]&&O.value[t.agentIds[0]]?O.value[t.agentIds[0]]:"#409eff",d=t.agentIds?.[1]&&O.value[t.agentIds[1]]?O.value[t.agentIds[1]]:C;return{left:`${U}%`,width:`${se}%`,background:t.agentIds?.length>1?`linear-gradient(90deg,${C},${d})`:C}}function Vt(t){const{start:e,end:n}=q.value;return R(t.dueAt)?`${(new Date(t.dueAt).getTime()-e.getTime())/(n.getTime()-e.getTime())*100}%`:"-100%"}function At(t,e,n){const r=[],c=e.getTime()-t.getTime();if(c<=0||!isFinite(c))return r;const _=300;if(c/n.ms>_){const w=[...He].reverse().find(S=>c/S.ms<=_);w&&(n=w)}const se=w=>((w.getTime()-t.getTime())/c*100).toFixed(2)+"%";let C="",d;if(n.kind==="minute")d=new Date(t),d.setSeconds(0,0),d.setMinutes(Math.floor(d.getMinutes()/n.step)*n.step);else if(n.kind==="hour")d=new Date(t),d.setMinutes(0,0,0),d.setHours(Math.floor(d.getHours()/n.step)*n.step);else if(n.kind==="day")d=new Date(t.getFullYear(),t.getMonth(),t.getDate());else if(n.kind==="week"){d=new Date(t.getFullYear(),t.getMonth(),t.getDate());const w=d.getDay();d.setDate(d.getDate()-(w===0?6:w-1))}else if(n.kind==="month"){const w=t.getMonth();d=new Date(t.getFullYear(),Math.floor(w/n.step)*n.step,1)}else d=new Date(Math.floor(t.getFullYear()/n.step)*n.step,0,1);for(;d.getTime()<=e.getTime();){const w=d.getFullYear(),S=d.getMonth()+1,N=d.getDate(),ne=d.getHours(),_e=d.getMinutes();let G="",J="";n.kind==="minute"||n.kind==="hour"?(G=`${w}-${S}-${N}`,J=`${S}/${N}`):n.kind==="day"||n.kind==="week"?(G=`${w}-${S}`,J=S===1?`${w}å¹´`:`${S}æœˆ`):n.kind==="month"&&(G=String(w),J=String(w));const K=G&&G!==C?J:void 0;K&&(C=G);let x="";n.kind==="minute"?x=`${String(ne).padStart(2,"0")}:${String(_e).padStart(2,"0")}`:n.kind==="hour"?x=`${String(ne).padStart(2,"0")}æ—¶`:n.kind==="day"?x=String(N):n.kind==="week"?x=`${S}/${N}`:n.kind==="month"?x=`${S}æœˆ`:x=String(w),r.push({label:x,yearMark:K,left:se(d)}),n.kind==="minute"?d.setMinutes(d.getMinutes()+n.step):n.kind==="hour"?d.setHours(d.getHours()+n.step):n.kind==="day"||n.kind==="week"?d.setDate(d.getDate()+n.step):n.kind==="month"?d.setMonth(d.getMonth()+n.step):d.setFullYear(d.getFullYear()+n.step)}return r}function ae(t){if(t.status==="completed")return 100;if(!R(t.startAt)||!R(t.endAt))return t.progress;const e=Date.now(),n=new Date(t.startAt).getTime(),r=new Date(t.endAt).getTime();return r<=n?t.progress:Math.min(100,Math.max(0,Math.round((e-n)/(r-n)*100)))}function Ze(t){if(t.status==="completed")return"#67c23a";const e=ae(t);return e>=80?"#409eff":e>=40?"#e6a23c":"#909399"}function qe(t){return{draft:"è‰ç¨¿",active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[t]??t}function We(t){return{draft:"info",active:"",completed:"success",cancelled:"danger"}[t]??"info"}function ge(t){return R(t)?new Date(t).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}):"â€”"}function Mt(t){if(!t)return"";const e=new Date(t);return isNaN(e.getTime())?"":e.toLocaleString("zh-CN")}return(t,e)=>{const n=g("el-icon"),r=g("el-button"),c=g("el-option"),_=g("el-select"),U=g("el-tag"),se=g("el-progress"),C=g("el-input"),d=g("el-form-item"),w=g("el-radio-button"),S=g("el-radio-group"),N=g("el-date-picker"),ne=g("el-slider"),_e=g("el-checkbox"),G=g("el-form"),J=g("el-popconfirm"),K=g("el-tab-pane"),x=g("el-table-column"),Ct=g("el-text"),Je=g("el-switch"),Tt=g("el-table"),Ke=g("el-empty"),Dt=g("el-timeline-item"),It=g("el-timeline"),xt=g("el-tabs"),$t=g("el-dialog");return u(),p("div",Ot,[o("div",{class:"gs-sidebar",style:I({width:be.value+"px"})},[o("div",Pt,[e[35]||(e[35]=o("span",{class:"sidebar-title"},"ç›®æ ‡è§„åˆ’",-1)),o("div",Xt,[a(r,{size:"small",circle:"",onClick:X},{default:s(()=>[a(n,null,{default:s(()=>[a(V(Nt))]),_:1})]),_:1}),a(r,{size:"small",type:"primary",circle:"",onClick:$e},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1})]),_:1})])]),o("div",jt,[a(_,{modelValue:de.value,"onUpdate:modelValue":e[0]||(e[0]=l=>de.value=l),placeholder:"æ‰€æœ‰çŠ¶æ€",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"]),a(_,{modelValue:ue.value,"onUpdate:modelValue":e[1]||(e[1]=l=>ue.value=l),placeholder:"æ‰€æœ‰æˆå‘˜",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[(u(!0),p(k,null,M(Y.value,l=>(u(),z(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",Zt,[L.value?(u(),p("div",qt,[o("div",Wt,[o("span",Jt,v(i.title.trim()||"æ–°ç›®æ ‡â€¦"),1),a(U,{type:"info",size:"small",effect:"plain"},{default:s(()=>[...e[36]||(e[36]=[y("è‰ç¨¿",-1)])]),_:1})]),e[37]||(e[37]=o("div",{class:"gi-new-hint"},"å°šæœªä¿å­˜",-1))])):D("",!0),pe.value.length===0&&!L.value?(u(),p("div",Kt,"æš‚æ— ç›®æ ‡")):D("",!0),(u(!0),p(k,null,M(pe.value,l=>(u(),p("div",{key:l.id,class:j(["goal-item",{active:m.value?.id===l.id}]),onClick:f=>xe(l)},[o("div",el,[o("span",tl,v(l.title),1),a(U,{type:We(l.status),size:"small",effect:"plain"},{default:s(()=>[y(v(qe(l.status)),1)]),_:2},1032,["type"])]),o("div",ll,[o("div",{class:"gi-progress-bar",style:I({width:l.progress+"%",background:Ze(l)})},null,4),o("span",al,v(l.progress)+"%",1)]),o("div",sl,[o("div",nl,[(u(!0),p(k,null,M((l.agentIds||[]).slice(0,3),f=>(u(),p("div",{key:f,class:"gi-avatar",style:I({background:O.value[f]||"#6366f1"})},v((Z.value[f]||f)[0]),5))),128)),(l.agentIds||[]).length>3?(u(),p("span",ol,"+"+v(l.agentIds.length-3),1)):D("",!0)]),o("span",il,v(ge(l.startAt))+" â€” "+v(ge(l.endAt)),1)])],10,Qt))),128))])],4),o("div",{class:j(["gs-handle",{dragging:Q.value==="side"}]),onMousedown:e[2]||(e[2]=l=>Se(l,"side"))},[...e[38]||(e[38]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",dl,[!m.value&&!L.value?(u(),p("div",ul,[o("div",rl,[o("span",ml,[a(n,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:s(()=>[a(V(ye))]),_:1}),e[39]||(e[39]=y(" ç›®æ ‡æ€»è§ˆ Â· ç”˜ç‰¹å›¾ ",-1))]),a(r,{type:"primary",size:"small",onClick:$e},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[40]||(e[40]=y(" æ–°å»ºç›®æ ‡ ",-1))]),_:1})]),pe.value.length===0?(u(),p("div",cl,[a(n,{size:"48",color:"#c0c4cc"},{default:s(()=>[a(V(ye))]),_:1}),e[41]||(e[41]=o("p",null,"æš‚æ— ç›®æ ‡ï¼Œç‚¹å‡»æ–°å»ºå¼€å§‹è§„åˆ’",-1))])):(u(),p("div",{key:1,class:j(["gantt-wrap",{"is-dragging":Me.value}]),onWheel:et(it,["prevent"]),onMousedown:nt,onMousemove:ot,onMouseup:Re,onMouseleave:et(Re,["self"])},[o("div",pl,[o("div",vl,[o("span",fl,v(Ge.value.label)+"/æ ¼ â†•ç¼©æ”¾",1)]),o("div",{class:"gantt-timeline-col",ref_key:"ganttTimelineRef",ref:Ae},[o("div",gl,[(u(!0),p(k,null,M(Le.value.filter(l=>l.yearMark),l=>(u(),p("div",{key:"yr-"+l.left,class:"gantt-year-label",style:I({left:l.left})},v(l.yearMark),5))),128))]),o("div",_l,[(u(!0),p(k,null,M(Le.value,l=>(u(),p("div",{key:l.label+l.left,class:"gantt-month-label",style:I({left:l.left})},v(l.label),5))),128))])],512)]),o("div",yl,[o("div",bl,[e[42]||(e[42]=o("div",{class:"gantt-label-col"},null,-1)),o("div",hl,[(u(!0),p(k,null,M(V(st),l=>(u(),p("div",{key:"gv-"+l.label,class:"gantt-grid-line",style:I({left:l.left})},null,4))),128)),Ee.value!==null?(u(),p("div",{key:0,class:"gantt-today-line",style:I({left:Ee.value})},null,4)):D("",!0)])]),(u(!0),p(k,null,M(pe.value,l=>(u(),p("div",{key:l.id,class:j(["gantt-row",{"is-selected":h.value?.id===l.id}]),onClick:f=>dt(l)},[o("div",kl,[o("div",Vl,[o("div",Al,[(u(!0),p(k,null,M((l.agentIds||[]).slice(0,2),f=>(u(),p("div",{key:f,class:"gantt-avatar",style:I({background:O.value[f]||"#409eff"})},v((Z.value[f]||f).slice(0,1)),5))),128))]),o("span",Ml,v(l.title),1),o("span",{class:j(["gantt-pct","s-"+l.status])},v(ae(l))+"%",3)])]),o("div",Cl,[ht(l)?(u(),p(k,{key:0},[o("div",{class:"gantt-bar",style:I(kt(l))},[o("div",{class:"gantt-bar-progress",style:I({width:ae(l)+"%"})},null,4),wt(l)>8?(u(),p("span",Tl,v(l.title),1)):D("",!0)],4),(u(!0),p(k,null,M(l.milestones||[],f=>(u(),p(k,{key:f.id},[R(f.dueAt)?(u(),p("div",{key:0,class:j(["gantt-milestone",{done:f.done}]),style:I({left:Vt(f)}),title:f.title},null,14,Dl)):D("",!0)],64))),128))],64)):(u(),p("div",Il,"æœªè®¾ç½®æ—¶é—´èŒƒå›´"))])],10,wl))),128))])],34)),a(Yt,{name:"gsp-slide"},{default:s(()=>[h.value?(u(),p("div",xl,[o("div",$l,[o("div",zl,[(u(!0),p(k,null,M((h.value.agentIds||[]).slice(0,3),l=>(u(),p("div",{key:l,class:"gsp-avatar",style:I({background:O.value[l]||"#409eff"})},v((Z.value[l]||l).slice(0,1)),5))),128))]),o("div",Ul,[o("span",Sl,v(h.value.title),1),a(U,{type:We(h.value.status),size:"small"},{default:s(()=>[y(v(qe(h.value.status)),1)]),_:1},8,["type"])]),a(r,{type:"primary",size:"small",onClick:e[3]||(e[3]=l=>{xe(h.value),h.value=null})},{default:s(()=>[...e[43]||(e[43]=[y(" æŸ¥çœ‹è¯¦æƒ… â†’ ",-1)])]),_:1}),a(n,{class:"gsp-close",onClick:e[4]||(e[4]=l=>h.value=null)},{default:s(()=>[a(V(Ht))]),_:1})]),o("div",Yl,[o("div",Nl,[e[44]||(e[44]=o("span",{class:"gsp-stat-label"},"æ—¶é—´è¿›åº¦",-1)),a(se,{percentage:ae(h.value),color:Ze(h.value),"stroke-width":8,style:{flex:"1",margin:"0 10px"}},null,8,["percentage","color"]),o("span",Hl,v(ae(h.value))+"%",1)]),o("div",Gl,[e[45]||(e[45]=o("span",{class:"gsp-stat-label"},"æ—¶é—´",-1)),o("span",Fl,v(ge(h.value.startAt))+" â€” "+v(ge(h.value.endAt)),1)]),h.value.milestones?.length?(u(),p("div",Ll,[e[46]||(e[46]=o("span",{class:"gsp-stat-label"},"é‡Œç¨‹ç¢‘",-1)),o("span",Bl,v(h.value.milestones.filter(l=>l.done).length)+"/"+v(h.value.milestones.length)+" å·²å®Œæˆ ",1)])):D("",!0),h.value.description?(u(),p("div",Rl,v(h.value.description),1)):D("",!0)])])):D("",!0)]),_:1})])):L.value?(u(),p(k,{key:1},[o("div",El,[o("div",Ol,[a(n,{style:{color:"#909399"}},{default:s(()=>[a(V(ye))]),_:1}),e[47]||(e[47]=o("span",{class:"crumb-sep"},"æ–°å»º",-1)),e[48]||(e[48]=o("span",{class:"crumb-name"},"ç›®æ ‡",-1))]),o("div",Pl,[a(r,{size:"small",onClick:e[5]||(e[5]=l=>L.value=!1)},{default:s(()=>[...e[49]||(e[49]=[y("å–æ¶ˆ",-1)])]),_:1}),a(r,{size:"small",type:"primary",loading:re.value,onClick:Oe},{default:s(()=>[a(n,null,{default:s(()=>[a(V(lt))]),_:1}),e[50]||(e[50]=y(" åˆ›å»º ",-1))]),_:1},8,["loading"])])]),o("div",Xl,[a(G,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(d,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(C,{modelValue:i.title,"onUpdate:modelValue":e[6]||(e[6]=l=>i.title=l),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(d,{label:"æè¿°"},{default:s(()=>[a(C,{modelValue:i.description,"onUpdate:modelValue":e[7]||(e[7]=l=>i.description=l),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç±»åž‹"},{default:s(()=>[a(S,{modelValue:i.type,"onUpdate:modelValue":e[8]||(e[8]=l=>i.type=l)},{default:s(()=>[a(w,{value:"personal"},{default:s(()=>[...e[51]||(e[51]=[y("ä¸ªäºº",-1)])]),_:1}),a(w,{value:"team"},{default:s(()=>[...e[52]||(e[52]=[y("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(_,{modelValue:i.agentIds,"onUpdate:modelValue":e[9]||(e[9]=l=>i.agentIds=l),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(u(!0),p(k,null,M(Y.value,l=>(u(),z(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"çŠ¶æ€"},{default:s(()=>[a(_,{modelValue:i.status,"onUpdate:modelValue":e[10]||(e[10]=l=>i.status=l),style:{width:"100%"}},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.startAt,"onUpdate:modelValue":e[11]||(e[11]=l=>i.startAt=l),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.endAt,"onUpdate:modelValue":e[12]||(e[12]=l=>i.endAt=l),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),m.value?(u(),z(d,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(ne,{modelValue:i.progress,"onUpdate:modelValue":e[13]||(e[13]=l=>i.progress=l),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):D("",!0),a(d,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",jl,[(u(!0),p(k,null,M(i.milestones,(l,f)=>(u(),p("div",{key:f,class:"milestone-row"},[a(_e,{modelValue:l.done,"onUpdate:modelValue":$=>l.done=$},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:l.title,"onUpdate:modelValue":$=>l.title=$,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(N,{modelValue:l.dueAt,"onUpdate:modelValue":$=>l.dueAt=$,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(r,{type:"danger",size:"small",circle:"",onClick:$=>i.milestones.splice(f,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(V(ze))]),_:1})]),_:1},8,["onClick"])]))),128)),a(r,{size:"small",onClick:Pe,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[53]||(e[53]=y(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])],64)):m.value?(u(),p(k,{key:2},[o("div",Zl,[o("div",ql,[a(r,{size:"small",text:"",onClick:e[14]||(e[14]=l=>m.value=null),class:"crumb-back",title:"è¿”å›žç”˜ç‰¹å›¾"},{default:s(()=>[a(n,null,{default:s(()=>[a(V(Gt))]),_:1}),e[54]||(e[54]=y(" ç”˜ç‰¹å›¾ ",-1))]),_:1}),e[55]||(e[55]=o("span",{class:"crumb-sep"},"/",-1)),a(n,{style:{color:"#909399"}},{default:s(()=>[a(V(ye))]),_:1}),o("span",Wl,v(m.value.title),1)]),o("div",Jl,[a(r,{size:"small",type:"primary",loading:re.value,onClick:Oe},{default:s(()=>[a(n,null,{default:s(()=>[a(V(lt))]),_:1}),e[56]||(e[56]=y(" ä¿å­˜ ",-1))]),_:1},8,["loading"]),a(J,{title:`ç¡®è®¤åˆ é™¤ã€Œ${m.value.title}ã€ï¼Ÿ`,onConfirm:mt},{reference:s(()=>[a(r,{size:"small",type:"danger",plain:""},{default:s(()=>[a(n,null,{default:s(()=>[a(V(ze))]),_:1})]),_:1})]),_:1},8,["title"])])]),a(xt,{modelValue:ee.value,"onUpdate:modelValue":e[23]||(e[23]=l=>ee.value=l),class:"editor-tabs"},{default:s(()=>[a(K,{label:"åŸºæœ¬ä¿¡æ¯",name:"basic"},{default:s(()=>[o("div",Kl,[a(G,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(d,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(C,{modelValue:i.title,"onUpdate:modelValue":e[15]||(e[15]=l=>i.title=l),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(d,{label:"æè¿°"},{default:s(()=>[a(C,{modelValue:i.description,"onUpdate:modelValue":e[16]||(e[16]=l=>i.description=l),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç±»åž‹"},{default:s(()=>[a(S,{modelValue:i.type,"onUpdate:modelValue":e[17]||(e[17]=l=>i.type=l)},{default:s(()=>[a(w,{value:"personal"},{default:s(()=>[...e[57]||(e[57]=[y("ä¸ªäºº",-1)])]),_:1}),a(w,{value:"team"},{default:s(()=>[...e[58]||(e[58]=[y("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(_,{modelValue:i.agentIds,"onUpdate:modelValue":e[18]||(e[18]=l=>i.agentIds=l),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(u(!0),p(k,null,M(Y.value,l=>(u(),z(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"çŠ¶æ€"},{default:s(()=>[a(_,{modelValue:i.status,"onUpdate:modelValue":e[19]||(e[19]=l=>i.status=l),style:{width:"100%"}},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.startAt,"onUpdate:modelValue":e[20]||(e[20]=l=>i.startAt=l),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.endAt,"onUpdate:modelValue":e[21]||(e[21]=l=>i.endAt=l),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),m.value?(u(),z(d,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(ne,{modelValue:i.progress,"onUpdate:modelValue":e[22]||(e[22]=l=>i.progress=l),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):D("",!0),a(d,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",Ql,[(u(!0),p(k,null,M(i.milestones,(l,f)=>(u(),p("div",{key:f,class:"milestone-row"},[a(_e,{modelValue:l.done,"onUpdate:modelValue":$=>l.done=$},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:l.title,"onUpdate:modelValue":$=>l.title=$,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(N,{modelValue:l.dueAt,"onUpdate:modelValue":$=>l.dueAt=$,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(r,{type:"danger",size:"small",circle:"",onClick:$=>i.milestones.splice(f,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(V(ze))]),_:1})]),_:1},8,["onClick"])]))),128)),a(r,{size:"small",onClick:Pe,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[59]||(e[59]=y(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1}),a(K,{label:"å®šæœŸæ£€æŸ¥",name:"checks"},{default:s(()=>[o("div",ea,[o("div",ta,[a(r,{type:"primary",size:"small",onClick:ct},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[60]||(e[60]=y(" æ·»åŠ æ£€æŸ¥ ",-1))]),_:1})]),a(Tt,{data:m.value.checks,size:"small",stripe:"",class:"checks-table"},{default:s(()=>[a(x,{prop:"name",label:"åç§°","min-width":"120"}),a(x,{label:"é¢‘çŽ‡","min-width":"140"},{default:s(({row:l})=>[o("code",la,v(l.schedule),1),a(Ct,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[y(v(l.tz||"Asia/Shanghai"),1)]),_:2},1024)]),_:1}),a(x,{label:"æˆå‘˜",width:"90"},{default:s(({row:l})=>[y(v(Z.value[l.agentId]||l.agentId),1)]),_:1}),a(x,{label:"å¯ç”¨",width:"60"},{default:s(({row:l})=>[a(Je,{modelValue:l.enabled,"onUpdate:modelValue":f=>l.enabled=f,size:"small",onChange:f=>ft(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(x,{label:"æ“ä½œ",width:"130"},{default:s(({row:l})=>[a(r,{size:"small",link:"",onClick:f=>gt(l)},{default:s(()=>[...e[61]||(e[61]=[y("ç«‹å³è¿è¡Œ",-1)])]),_:1},8,["onClick"]),a(r,{size:"small",link:"",type:"danger",onClick:f=>_t(l)},{default:s(()=>[...e[62]||(e[62]=[y("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),m.value.checks?.length?D("",!0):(u(),z(Ke,{key:0,description:"æš‚æ— æ£€æŸ¥è®¡åˆ’","image-size":60}))])]),_:1}),a(K,{label:"æ£€æŸ¥è®°å½•",name:"records"},{default:s(()=>[o("div",aa,[ke.value?(u(),p("div",sa,[a(n,{class:"is-loading",size:"24"},{default:s(()=>[a(V(Ft))]),_:1})])):me.value.length?(u(),z(It,{key:1,class:"records-timeline"},{default:s(()=>[(u(!0),p(k,null,M(me.value,l=>(u(),z(Dt,{key:l.id,timestamp:Mt(l.runAt),type:l.status==="ok"?"success":"danger",placement:"top"},{default:s(()=>[o("div",na,[o("div",oa,[o("div",{class:"rec-avatar",style:I({background:O.value[l.agentId]||"#409eff"})},v((Z.value[l.agentId]||"?")[0]),5),o("span",ia,v(Z.value[l.agentId]||l.agentId),1),a(U,{type:l.status==="ok"?"success":"danger",size:"small"},{default:s(()=>[y(v(l.status),1)]),_:2},1032,["type"])]),o("div",da,v(l.output||"ï¼ˆæ— è¾“å‡ºï¼‰"),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})):(u(),z(Ke,{key:2,description:"æš‚æ— æ£€æŸ¥è®°å½•","image-size":60}))])]),_:1})]),_:1},8,["modelValue"])],64)):D("",!0)]),o("div",{class:j(["gs-handle",{dragging:Q.value==="chat"}]),onMousedown:e[24]||(e[24]=l=>Se(l,"chat"))},[...e[63]||(e[63]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",{class:"gs-chat",style:I({width:he.value+"px"})},[o("div",ua,[a(n,null,{default:s(()=>[a(V(Lt))]),_:1}),e[64]||(e[64]=o("span",null,"AI ç›®æ ‡åŠ©æ‰‹",-1)),a(_,{modelValue:E.value,"onUpdate:modelValue":e[25]||(e[25]=l=>E.value=l),size:"small",style:{"margin-left":"auto",width:"110px"},placeholder:"é€‰æ‹©æˆå‘˜"},{default:s(()=>[(u(!0),p(k,null,M(Y.value,l=>(u(),z(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",ra,[E.value?(u(),z(Rt,{key:je.value,"agent-id":E.value,"session-id":je.value,context:ut.value,"welcome-message":m.value?`æ­£åœ¨æŸ¥çœ‹ç›®æ ‡ã€Œ${m.value.title}ã€ï¼Œæˆ‘å¯ä»¥å¸®ä½ ä¿®æ”¹ç›®æ ‡ä¿¡æ¯ã€æ·»åŠ é‡Œç¨‹ç¢‘æˆ–è®¾ç½®å®šæœŸæ£€æŸ¥ã€‚`:"ä½ å¥½ï¼æˆ‘å¯ä»¥å¸®ä½ åˆ›å»ºç›®æ ‡ï¼Œè¯´ä¸€ä¸‹éœ€æ±‚å³å¯ï¼Œæˆ‘ä¼šè‡ªåŠ¨å¡«å†™è¡¨å•ã€‚",examples:m.value?["å¸®æˆ‘æŠŠè¿›åº¦æ›´æ–°åˆ° 60%","æ·»åŠ 3ä¸ªé‡Œç¨‹ç¢‘","æ¯å‘¨ä¸€æ£€æŸ¥è¿™ä¸ªç›®æ ‡"]:["å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿç›®æ ‡ï¼šQ2ç”¨æˆ·å¢žé•¿ï¼Œ3æœˆ1æ—¥åˆ°6æœˆ30æ—¥","ä¸ªäººç›®æ ‡ï¼šå­¦ä¹  Go è¯­è¨€ï¼Œæœ¬æœˆå®Œæˆ"],height:"100%",onResponse:yt},null,8,["agent-id","session-id","context","welcome-message","examples"])):D("",!0)])],4),a($t,{modelValue:te.value,"onUpdate:modelValue":e[34]||(e[34]=l=>te.value=l),title:"æ·»åŠ å®šæœŸæ£€æŸ¥",width:"480px"},{footer:s(()=>[a(r,{onClick:e[33]||(e[33]=l=>te.value=!1)},{default:s(()=>[...e[66]||(e[66]=[y("å–æ¶ˆ",-1)])]),_:1}),a(r,{type:"primary",onClick:vt},{default:s(()=>[...e[67]||(e[67]=[y("æ·»åŠ ",-1)])]),_:1})]),default:s(()=>[a(G,{model:A,"label-width":"90px",size:"small"},{default:s(()=>[a(d,{label:"åç§°",required:""},{default:s(()=>[a(C,{modelValue:A.name,"onUpdate:modelValue":e[26]||(e[26]=l=>A.name=l),placeholder:"å¦‚ï¼šæ¯å‘¨è¿›åº¦æ£€æŸ¥"},null,8,["modelValue"])]),_:1}),a(d,{label:"æ‰§è¡Œæˆå‘˜",required:""},{default:s(()=>[a(_,{modelValue:A.agentId,"onUpdate:modelValue":e[27]||(e[27]=l=>A.agentId=l),style:{width:"100%"}},{default:s(()=>[(u(!0),p(k,null,M(Y.value,l=>(u(),z(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"æ£€æŸ¥é¢‘çŽ‡"},{default:s(()=>[a(_,{modelValue:ce.value,"onUpdate:modelValue":e[28]||(e[28]=l=>ce.value=l),style:{width:"100%"},onChange:pt},{default:s(()=>[a(c,{label:"æ¯å¤©ä¸Šåˆ9ç‚¹",value:"0 9 * * *"}),a(c,{label:"æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹",value:"0 9 * * 1"}),a(c,{label:"æ¯å‘¨äº”ä¸‹åˆ5ç‚¹",value:"0 17 * * 5"}),a(c,{label:"æ¯æœˆ1æ—¥ä¸Šåˆ9ç‚¹",value:"0 9 1 * *"}),a(c,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),ce.value==="custom"?(u(),z(d,{key:0,label:"Cron"},{default:s(()=>[a(C,{modelValue:A.schedule,"onUpdate:modelValue":e[29]||(e[29]=l=>A.schedule=l),placeholder:"0 9 * * 1"},null,8,["modelValue"])]),_:1})):D("",!0),a(d,{label:"æ—¶åŒº"},{default:s(()=>[a(_,{modelValue:A.tz,"onUpdate:modelValue":e[30]||(e[30]=l=>A.tz=l),style:{width:"100%"}},{default:s(()=>[a(c,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),a(c,{label:"UTC",value:"UTC"}),a(c,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"æ£€æŸ¥æç¤ºè¯"},{default:s(()=>[a(C,{modelValue:A.prompt,"onUpdate:modelValue":e[31]||(e[31]=l=>A.prompt=l),type:"textarea",rows:3,placeholder:"å¯ç”¨å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt}"},null,8,["modelValue"]),e[65]||(e[65]=o("div",{style:{"font-size":"11px",color:"#94a3b8","margin-top":"3px"}}," å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt} {goal.startAt} {goal.status} ",-1))]),_:1}),a(d,{label:"å¯ç”¨"},{default:s(()=>[a(Je,{modelValue:A.enabled,"onUpdate:modelValue":e[32]||(e[32]=l=>A.enabled=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ya=Et(pa,[["__scopeId","data-v-ed8e5861"]]);export{ya as default};
