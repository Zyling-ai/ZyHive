import{d as zt,o as Ut,A as St,P as Ke,ac as S,c as m,e as o,b as a,w as s,t as f,g as D,F as V,q as C,p as I,z as j,f as h,j as Qe,n as A,ad as Yt,l as $,r as b,y as et,I as Y,h as y,i as d,a1 as Nt,K as oe,ae as _e,M as Ht,af as tt,ag as ze,U as Gt,ab as Ft,E as T,B as Lt}from"./index-DbcP3S-d.js";import{A as Bt}from"./AiChat-hTVgIiva.js";import{_ as Rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Et={class:"goals-studio"},Ot={class:"sidebar-top"},Pt={class:"sidebar-acts"},Xt={class:"gs-filter"},jt={class:"goal-list"},Zt={key:0,class:"goal-item goal-item-new active"},qt={class:"gi-top"},Wt={class:"gi-title gi-title-new"},Jt={key:1,class:"list-empty"},Kt=["onClick"],Qt={class:"gi-top"},el={class:"gi-title"},tl={class:"gi-progress-wrap"},ll={class:"gi-progress-num"},al={class:"gi-bottom"},sl={class:"gi-avatars"},nl={key:0,class:"gi-avatar-more"},ol={class:"gi-dates"},il={class:"gs-editor"},dl={key:0,class:"editor-gantt-overview"},ul={class:"overview-header"},rl={class:"overview-title"},ml={key:0,class:"gantt-empty"},cl={class:"gantt-header"},pl={class:"gantt-label-col"},vl={class:"gantt-scale-hint"},fl={class:"gantt-years"},gl={class:"gantt-months"},_l={class:"gantt-body"},yl={class:"gantt-overlay","aria-hidden":"true"},bl={class:"gantt-timeline-col",style:{position:"relative"}},hl=["onClick"],wl={class:"gantt-label-col"},kl={class:"gantt-label-inner"},Vl={class:"gantt-agent-avatars"},Al={class:"gantt-goal-name"},Ml={class:"gantt-timeline-col"},Cl={key:0,class:"gantt-bar-label"},Tl=["title"],Dl={key:1,class:"gantt-no-date"},Il={key:0,class:"gantt-summary-panel"},xl={class:"gsp-header"},$l={class:"gsp-avatars"},zl={class:"gsp-title-block"},Ul={class:"gsp-title"},Sl={class:"gsp-body"},Yl={class:"gsp-stat"},Nl={class:"gsp-stat-val"},Hl={class:"gsp-stat"},Gl={class:"gsp-stat-val"},Fl={key:0,class:"gsp-stat"},Ll={class:"gsp-stat-val"},Bl={key:1,class:"gsp-desc"},Rl={class:"editor-toolbar"},El={class:"editor-breadcrumb"},Ol={class:"toolbar-acts"},Pl={class:"editor-form"},Xl={style:{width:"100%"}},jl={class:"editor-toolbar"},Zl={class:"editor-breadcrumb"},ql={class:"crumb-name"},Wl={class:"toolbar-acts"},Jl={class:"editor-form"},Kl={style:{width:"100%"}},Ql={class:"tab-panel"},ea={class:"tab-panel-head"},ta={class:"code-cell"},la={class:"tab-panel"},aa={key:0,style:{"text-align":"center",padding:"20px"}},sa={class:"record-card"},na={class:"record-header"},oa={class:"rec-name"},ia={class:"rec-output"},da={class:"chat-panel-head"},ua={class:"chat-wrap"},ra=2*6e4,ma=20*365*864e5,lt=30*864e5,ca=zt({__name:"GoalsView",setup(pa){const ye=b(260),be=b(360),Q=b("");let Ue=0,he=0;function Se(t,e){Q.value=e,Ue=t.clientX,he=e==="side"?ye.value:be.value,document.addEventListener("mousemove",Ye),document.addEventListener("mouseup",Ne),t.preventDefault()}function Ye(t){const e=t.clientX-Ue;Q.value==="side"?ye.value=Math.max(200,Math.min(400,he+e)):be.value=Math.max(280,Math.min(560,he-e))}function Ne(){Q.value="",document.removeEventListener("mousemove",Ye),document.removeEventListener("mouseup",Ne)}const ie=b([]),z=b([]),de=b(""),ue=b(""),r=b(null),N=b(!1),re=b(!1),ee=b("basic"),te=b(!1),me=b([]),we=b(!1),ce=b("0 9 * * 1"),R=b(""),i=et({title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]}),M=et({name:"",agentId:"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),Z=Y(()=>{const t={};return z.value.forEach(e=>{t[e.id]=e.name}),t}),E=Y(()=>{const t={};return z.value.forEach(e=>{t[e.id]=e.avatarColor||"#409eff"}),t}),pe=Y(()=>{let t=[...ie.value];return de.value&&(t=t.filter(e=>e.status===de.value)),ue.value&&(t=t.filter(e=>(e.agentIds||[]).includes(ue.value))),t}),H=b(lt),q=b(Date.now()+lt*.4),ke=Math.round(30.44*864e5),at=[{ms:6e4,kind:"minute",step:1,label:"1åˆ†é’Ÿ"},{ms:5*6e4,kind:"minute",step:5,label:"5åˆ†é’Ÿ"},{ms:15*6e4,kind:"minute",step:15,label:"15åˆ†é’Ÿ"},{ms:30*6e4,kind:"minute",step:30,label:"30åˆ†é’Ÿ"},{ms:36e5,kind:"hour",step:1,label:"1å°æ—¶"},{ms:6*36e5,kind:"hour",step:6,label:"6å°æ—¶"},{ms:12*36e5,kind:"hour",step:12,label:"12å°æ—¶"},{ms:864e5,kind:"day",step:1,label:"1å¤©"},{ms:7*864e5,kind:"week",step:7,label:"1å‘¨"},{ms:ke,kind:"month",step:1,label:"1æœˆ"},{ms:3*ke,kind:"month",step:3,label:"3æœˆ"},{ms:6*ke,kind:"month",step:6,label:"6æœˆ"},{ms:365*864e5,kind:"year",step:1,label:"1å¹´"},{ms:2*365*864e5,kind:"year",step:2,label:"2å¹´"},{ms:5*365*864e5,kind:"year",step:5,label:"5å¹´"}],He=Y(()=>{const t=H.value/8;return at.reduce((e,n)=>Math.abs(n.ms-t)<Math.abs(e.ms-t)?n:e)}),W=Y(()=>({start:new Date(q.value-H.value/2),end:new Date(q.value+H.value/2)})),Ge=Y(()=>At(W.value.start,W.value.end,He.value)),le=b(700),Ve=b(null),Fe=Y(()=>{const t=Ge.value,e=le.value;if(!t.length||!e)return t;const u=Math.max(1,Math.floor(e/50));if(t.length<=u)return t;const c=Math.ceil(t.length/u);return t.filter((k,U)=>U%c===0)}),st=Ge,Ae=b(!1),Me=b(!1);let ve=!1,fe=!1,Ce=0,Te=0,J=0,De=0;function Le(){cancelAnimationFrame(De),J=0}function nt(t){Le(),ve=!0,fe=!1,Ae.value=!0,Me.value=!1,Ce=t.clientX,Te=Date.now(),J=0}function ot(t){if(!ve)return;const e=t.clientX-Ce,n=Date.now()-Te;Math.abs(e)>3&&(fe=!0,Me.value=!0),fe&&(n>0&&(J=J*.65+e/n*.35),q.value-=e/(le.value||700)*H.value),Ce=t.clientX,Te=Date.now()}function Be(){if(ve&&(ve=!1,Ae.value=!1,fe&&Math.abs(J)>.05)){let t=J,e=Date.now();const n=()=>{const u=Date.now(),c=u-e;e=u,q.value-=t*c/(le.value||700)*H.value,t*=Math.pow(.92,c/16),Math.abs(t)>.008&&(De=requestAnimationFrame(n))};De=requestAnimationFrame(n)}}function it(t){t.preventDefault(),Le();const e=Math.exp(t.deltaY*.0015),n=Math.max(ra,Math.min(ma,H.value*e)),u=Ve.value?.getBoundingClientRect();if(u&&u.width>0){const c=Math.max(0,Math.min(1,(t.clientX-u.left)/u.width)),k=q.value-H.value/2+c*H.value;q.value=k+n*(.5-c)}H.value=n}const w=b(null);function dt(t){Me.value||(w.value=w.value?.id===t.id?null:t)}const Re=Y(()=>{const{start:t,end:e}=W.value,n=Date.now();return n<t.getTime()||n>e.getTime()?null:`${(n-t.getTime())/(e.getTime()-t.getTime())*100}%`}),ut=Y(()=>{const t=localStorage.getItem("aipanel_token")||"TOKEN",e=`${window.location.protocol}//${window.location.host}`,n=z.value.map(c=>`- ${c.id}: ${c.name}`).join(`
`),u=r.value?`
### å½“å‰é€‰ä¸­ç›®æ ‡
ID: ${r.value.id}
æ ‡é¢˜: ${r.value.title}
çŠ¶æ€: ${r.value.status}
è¿›åº¦: ${r.value.progress}%
å¼€å§‹: ${r.value.startAt||"æœªè®¾ç½®"}
ç»“æŸ: ${r.value.endAt||"æœªè®¾ç½®"}`:"";return`## ç›®æ ‡è§„åˆ’åŠ©æ‰‹

ä½ æ˜¯å›¢é˜Ÿçš„ç›®æ ‡è§„åˆ’åŠ©æ‰‹ã€‚

### ðŸŽ¯ æ ¸å¿ƒèƒ½åŠ›ï¼šå¡«å†™è¡¨å•ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰

å½“ç”¨æˆ·æè¿°ç›®æ ‡ä¿¡æ¯æ—¶ï¼Œ**ç›´æŽ¥è¾“å‡º JSON å¡«å……è¡¨å•**ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

\`\`\`json
{"action":"fill_goal","data":{"title":"ç›®æ ‡æ ‡é¢˜","description":"æè¿°ï¼ˆå¯é€‰ï¼‰","type":"team","agentIds":["agentId1"],"status":"active","startAt":"2026-03-01T00:00:00Z","endAt":"2026-06-30T00:00:00Z","progress":0,"milestones":[{"title":"é‡Œç¨‹ç¢‘1","dueAt":"2026-04-01T00:00:00Z","done":false}]}}
\`\`\`

- type: "personal"ï¼ˆä¸ªäººï¼‰æˆ– "team"ï¼ˆå›¢é˜Ÿï¼‰
- status: "draft" / "active" / "completed" / "cancelled"
- agentIds: å‚ä¸Žæˆå‘˜çš„ ID åˆ—è¡¨
- æ—¶é—´æ ¼å¼ï¼šISO 8601ï¼ˆå¦‚ "2026-03-01T00:00:00Z"ï¼‰
- è¾“å‡º JSON åŽï¼Œé¡µé¢ä¼šè‡ªåŠ¨å¡«å……è¡¨å•ï¼Œç”¨æˆ·ç¡®è®¤åŽä¿å­˜

### API æ“ä½œï¼ˆå¦‚éœ€ç›´æŽ¥æ›´æ–°å·²æœ‰ç›®æ ‡ï¼‰

**æ›´æ–°è¿›åº¦ï¼š**
\`\`\`bash
curl -s -X PATCH ${e}/api/goals/{id}/progress -H "Authorization: Bearer ${t}" -H "Content-Type: application/json" -d '{"progress":50}'
\`\`\`

**æ·»åŠ å®šæœŸæ£€æŸ¥ï¼š**
\`\`\`bash
curl -s -X POST ${e}/api/goals/{id}/checks -H "Authorization: Bearer ${t}" -H "Content-Type: application/json" -d '{"name":"æ¯å‘¨æ£€æŸ¥","schedule":"0 9 * * 1","agentId":"agentId","tz":"Asia/Shanghai","prompt":"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€æœ¬å‘¨è¿›å±•","enabled":true}'
\`\`\`

### å½“å‰å›¢é˜Ÿæˆå‘˜
${n}
${u}

**å·¥ä½œæµç¨‹ï¼š**
1. ç”¨æˆ·æè¿°ç›®æ ‡ â†’ ä½ è¾“å‡º fill_goal JSON â†’ é¡µé¢è‡ªåŠ¨å¡«è¡¨
2. ç”¨æˆ·ç¡®è®¤å†…å®¹åŽè‡ªè¡Œç‚¹å‡»ã€Œåˆ›å»ºã€æˆ–ã€Œä¿å­˜ã€æŒ‰é’®
3. å¦‚éœ€æ›´æ–°å·²å­˜åœ¨ç›®æ ‡çš„è¿›åº¦/æ£€æŸ¥ï¼Œä½¿ç”¨ API æ“ä½œ`.trim()});Ut(async()=>{const t=await St.list().catch(()=>({data:[]}));z.value=(t.data||[]).filter(e=>!e.system),R.value=z.value[0]?.id||"",await O()}),Ke(Ve,t=>{if(!t)return;new ResizeObserver(n=>{n[0]&&(le.value=n[0].contentRect.width)}).observe(t),le.value=t.getBoundingClientRect().width},{immediate:!0}),Ke(ee,async t=>{t==="records"&&r.value&&await rt(r.value.id)});async function O(){try{const t=await S.list();if(ie.value=t.data||[],r.value){const e=ie.value.find(n=>n.id===r.value.id);e&&(r.value=e)}}catch{}}async function rt(t){we.value=!0;try{const e=await S.listCheckRecords(t);me.value=(e.data||[]).slice().reverse()}catch{me.value=[]}finally{we.value=!1}}function Ie(t){r.value=t,N.value=!1,ee.value="basic",Object.assign(i,{title:t.title,description:t.description||"",type:t.type,agentIds:[...t.agentIds||[]],status:t.status,progress:t.progress,startAt:G(t.startAt)?t.startAt:"",endAt:G(t.endAt)?t.endAt:"",milestones:(t.milestones||[]).map(e=>({...e}))})}function xe(){r.value=null,N.value=!0,ee.value="basic",Pe.value=Date.now(),Object.assign(i,{title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]})}async function Ee(){if(!i.title.trim()){T.warning("è¯·å¡«å†™ç›®æ ‡æ ‡é¢˜");return}re.value=!0;const t={title:i.title,description:i.description||void 0,type:i.type,agentIds:i.agentIds,status:i.status,progress:i.progress,startAt:i.startAt||void 0,endAt:i.endAt||void 0,milestones:i.milestones.map(e=>({...e,id:e.id||"ms-"+Math.random().toString(36).slice(2,10)}))};try{if(r.value)await S.update(r.value.id,t),T.success("ä¿å­˜æˆåŠŸ"),await O();else{const e=await S.create(t);T.success("åˆ›å»ºæˆåŠŸ"),N.value=!1,await O();const n=ie.value.find(u=>u.id===e.data.id)||e.data;Ie(n)}}catch(e){T.error(e.response?.data?.error||"æ“ä½œå¤±è´¥")}finally{re.value=!1}}async function mt(){if(r.value)try{await S.delete(r.value.id),T.success("å·²åˆ é™¤"),r.value=null,await O()}catch{T.error("åˆ é™¤å¤±è´¥")}}function Oe(){i.milestones.push({id:"ms-"+Math.random().toString(36).slice(2,10),title:"",dueAt:"",done:!1,agentIds:[]})}function ct(){Object.assign(M,{name:"",agentId:z.value[0]?.id||"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),ce.value="0 9 * * 1",te.value=!0}function pt(t){t!=="custom"&&(M.schedule=t)}async function vt(){if(!M.name.trim()){T.warning("è¯·å¡«å†™æ£€æŸ¥åç§°");return}if(!M.agentId){T.warning("è¯·é€‰æ‹©æ‰§è¡Œæˆå‘˜");return}if(r.value)try{await S.addCheck(r.value.id,{...M}),T.success("æ·»åŠ æˆåŠŸ"),te.value=!1;const t=await S.get(r.value.id);r.value=t.data,await O()}catch(t){T.error(t.response?.data?.error||"æ·»åŠ å¤±è´¥")}}async function ft(t){if(r.value)try{await S.updateCheck(r.value.id,t.id,{enabled:t.enabled})}catch{T.error("æ›´æ–°å¤±è´¥")}}async function gt(t){if(r.value)try{await S.runCheck(r.value.id,t.id),T.success("å·²è§¦å‘æ£€æŸ¥")}catch(e){T.error(e.response?.data?.error||"è§¦å‘å¤±è´¥")}}async function _t(t){if(r.value)try{await Lt.confirm(`ç¡®å®šåˆ é™¤æ£€æŸ¥è®¡åˆ’ã€Œ${t.name}ã€ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{type:"warning"}),await S.removeCheck(r.value.id,t.id),T.success("å·²åˆ é™¤");const e=await S.get(r.value.id);r.value=e.data,await O()}catch(e){e!=="cancel"&&T.error("åˆ é™¤å¤±è´¥")}}const Pe=b(0),Xe=Y(()=>R.value?r.value?`goal-${r.value.id}-${R.value}`:`goals-new-${Pe.value}-${R.value}`:"");function yt(t){setTimeout(()=>O(),2e3);const e=c=>{try{const k=JSON.parse(c);if(k.action==="fill_goal"&&k.data)return bt(k.data),!0}catch{}return!1},n=t.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(n?.[1]&&e(n[1]))return;const u=t.match(/(\{"action"\s*:\s*"fill_goal"[\s\S]*?\})/);u?.[1]&&e(u[1])}function bt(t){!N.value&&!r.value&&xe(),t.title&&(i.title=t.title),t.description&&(i.description=t.description),t.type&&(i.type=t.type),t.status&&(i.status=t.status),typeof t.progress=="number"&&(i.progress=t.progress),t.agentIds&&Array.isArray(t.agentIds)&&(i.agentIds=t.agentIds),t.startAt&&(i.startAt=t.startAt),t.endAt&&(i.endAt=t.endAt),t.milestones&&Array.isArray(t.milestones)&&(i.milestones=t.milestones.map(e=>({id:e.id||"ms-"+Math.random().toString(36).slice(2,10),title:e.title||"",dueAt:e.dueAt||"",done:!!e.done,agentIds:e.agentIds||[]}))),T.success("AI å·²å¡«å†™è¡¨å•ï¼Œç¡®è®¤åŽç‚¹å‡»ä¿å­˜")}function G(t){if(!t)return!1;const e=new Date(t);return!isNaN(e.getTime())&&e.getFullYear()>1970}function ht(t){return G(t.startAt)&&G(t.endAt)}function wt(t){const{start:e,end:n}=W.value,u=n.getTime()-e.getTime();return Math.max(1,(new Date(t.endAt).getTime()-new Date(t.startAt).getTime())/u*100)}function kt(t){const{start:e,end:n}=W.value,u=n.getTime()-e.getTime(),c=new Date(t.startAt).getTime(),k=new Date(t.endAt).getTime(),U=Math.max(0,(c-e.getTime())/u*100),p=Math.max(1,(k-c)/u*100),_=t.agentIds?.[0]&&E.value[t.agentIds[0]]?E.value[t.agentIds[0]]:"#409eff",v=t.agentIds?.[1]&&E.value[t.agentIds[1]]?E.value[t.agentIds[1]]:_;return{left:`${U}%`,width:`${p}%`,background:t.agentIds?.length>1?`linear-gradient(90deg,${_},${v})`:_}}function Vt(t){const{start:e,end:n}=W.value;return G(t.dueAt)?`${(new Date(t.dueAt).getTime()-e.getTime())/(n.getTime()-e.getTime())*100}%`:"-100%"}function At(t,e,n){const u=[],c=e.getTime()-t.getTime();if(c<=0)return u;const k=_=>((_.getTime()-t.getTime())/c*100).toFixed(2)+"%";let U="",p;if(n.kind==="minute")p=new Date(t),p.setSeconds(0,0),p.setMinutes(Math.floor(p.getMinutes()/n.step)*n.step);else if(n.kind==="hour")p=new Date(t),p.setMinutes(0,0,0),p.setHours(Math.floor(p.getHours()/n.step)*n.step);else if(n.kind==="day")p=new Date(t.getFullYear(),t.getMonth(),t.getDate());else if(n.kind==="week"){p=new Date(t.getFullYear(),t.getMonth(),t.getDate());const _=p.getDay();p.setDate(p.getDate()-(_===0?6:_-1))}else if(n.kind==="month"){const _=t.getMonth();p=new Date(t.getFullYear(),Math.floor(_/n.step)*n.step,1)}else p=new Date(Math.floor(t.getFullYear()/n.step)*n.step,0,1);for(;p.getTime()<=e.getTime();){const _=p.getFullYear(),v=p.getMonth()+1,F=p.getDate(),se=p.getHours(),P=p.getMinutes();let L="",X="";n.kind==="minute"||n.kind==="hour"?(L=`${_}-${v}-${F}`,X=`${v}/${F}`):n.kind==="day"||n.kind==="week"?(L=`${_}-${v}`,X=v===1?`${_}å¹´`:`${v}æœˆ`):n.kind==="month"&&(L=String(_),X=String(_));const K=L&&L!==U?X:void 0;K&&(U=L);let B="";n.kind==="minute"?B=`${String(se).padStart(2,"0")}:${String(P).padStart(2,"0")}`:n.kind==="hour"?B=`${String(se).padStart(2,"0")}æ—¶`:n.kind==="day"?B=String(F):n.kind==="week"?B=`${v}/${F}`:n.kind==="month"?B=`${v}æœˆ`:B=String(_),u.push({label:B,yearMark:K,left:k(p)}),n.kind==="minute"?p.setMinutes(p.getMinutes()+n.step):n.kind==="hour"?p.setHours(p.getHours()+n.step):n.kind==="day"||n.kind==="week"?p.setDate(p.getDate()+n.step):n.kind==="month"?p.setMonth(p.getMonth()+n.step):p.setFullYear(p.getFullYear()+n.step)}return u}function ae(t){if(t.status==="completed")return 100;if(!G(t.startAt)||!G(t.endAt))return t.progress;const e=Date.now(),n=new Date(t.startAt).getTime(),u=new Date(t.endAt).getTime();return u<=n?t.progress:Math.min(100,Math.max(0,Math.round((e-n)/(u-n)*100)))}function je(t){if(t.status==="completed")return"#67c23a";const e=ae(t);return e>=80?"#409eff":e>=40?"#e6a23c":"#909399"}function Ze(t){return{draft:"è‰ç¨¿",active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[t]??t}function qe(t){return{draft:"info",active:"",completed:"success",cancelled:"danger"}[t]??"info"}function ge(t){return G(t)?new Date(t).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}):"â€”"}function Mt(t){if(!t)return"";const e=new Date(t);return isNaN(e.getTime())?"":e.toLocaleString("zh-CN")}return(t,e)=>{const n=y("el-icon"),u=y("el-button"),c=y("el-option"),k=y("el-select"),U=y("el-tag"),p=y("el-progress"),_=y("el-input"),v=y("el-form-item"),F=y("el-radio-button"),se=y("el-radio-group"),P=y("el-date-picker"),L=y("el-slider"),X=y("el-checkbox"),K=y("el-form"),B=y("el-popconfirm"),$e=y("el-tab-pane"),ne=y("el-table-column"),Ct=y("el-text"),We=y("el-switch"),Tt=y("el-table"),Je=y("el-empty"),Dt=y("el-timeline-item"),It=y("el-timeline"),xt=y("el-tabs"),$t=y("el-dialog");return d(),m("div",Et,[o("div",{class:"gs-sidebar",style:I({width:ye.value+"px"})},[o("div",Ot,[e[34]||(e[34]=o("span",{class:"sidebar-title"},"ç›®æ ‡è§„åˆ’",-1)),o("div",Pt,[a(u,{size:"small",circle:"",onClick:O},{default:s(()=>[a(n,null,{default:s(()=>[a(A(Nt))]),_:1})]),_:1}),a(u,{size:"small",type:"primary",circle:"",onClick:xe},{default:s(()=>[a(n,null,{default:s(()=>[a(A(oe))]),_:1})]),_:1})])]),o("div",Xt,[a(k,{modelValue:de.value,"onUpdate:modelValue":e[0]||(e[0]=l=>de.value=l),placeholder:"æ‰€æœ‰çŠ¶æ€",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"]),a(k,{modelValue:ue.value,"onUpdate:modelValue":e[1]||(e[1]=l=>ue.value=l),placeholder:"æ‰€æœ‰æˆå‘˜",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[(d(!0),m(V,null,C(z.value,l=>(d(),$(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",jt,[N.value?(d(),m("div",Zt,[o("div",qt,[o("span",Wt,f(i.title.trim()||"æ–°ç›®æ ‡â€¦"),1),a(U,{type:"info",size:"small",effect:"plain"},{default:s(()=>[...e[35]||(e[35]=[h("è‰ç¨¿",-1)])]),_:1})]),e[36]||(e[36]=o("div",{class:"gi-new-hint"},"å°šæœªä¿å­˜",-1))])):D("",!0),pe.value.length===0&&!N.value?(d(),m("div",Jt,"æš‚æ— ç›®æ ‡")):D("",!0),(d(!0),m(V,null,C(pe.value,l=>(d(),m("div",{key:l.id,class:j(["goal-item",{active:r.value?.id===l.id}]),onClick:g=>Ie(l)},[o("div",Qt,[o("span",el,f(l.title),1),a(U,{type:qe(l.status),size:"small",effect:"plain"},{default:s(()=>[h(f(Ze(l.status)),1)]),_:2},1032,["type"])]),o("div",tl,[o("div",{class:"gi-progress-bar",style:I({width:l.progress+"%",background:je(l)})},null,4),o("span",ll,f(l.progress)+"%",1)]),o("div",al,[o("div",sl,[(d(!0),m(V,null,C((l.agentIds||[]).slice(0,3),g=>(d(),m("div",{key:g,class:"gi-avatar",style:I({background:E.value[g]||"#6366f1"})},f((Z.value[g]||g)[0]),5))),128)),(l.agentIds||[]).length>3?(d(),m("span",nl,"+"+f(l.agentIds.length-3),1)):D("",!0)]),o("span",ol,f(ge(l.startAt))+" â€” "+f(ge(l.endAt)),1)])],10,Kt))),128))])],4),o("div",{class:j(["gs-handle",{dragging:Q.value==="side"}]),onMousedown:e[2]||(e[2]=l=>Se(l,"side"))},[...e[37]||(e[37]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",il,[!r.value&&!N.value?(d(),m("div",dl,[o("div",ul,[o("span",rl,[a(n,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:s(()=>[a(A(_e))]),_:1}),e[38]||(e[38]=h(" ç›®æ ‡æ€»è§ˆ Â· ç”˜ç‰¹å›¾ ",-1))]),a(u,{type:"primary",size:"small",onClick:xe},{default:s(()=>[a(n,null,{default:s(()=>[a(A(oe))]),_:1}),e[39]||(e[39]=h(" æ–°å»ºç›®æ ‡ ",-1))]),_:1})]),pe.value.length===0?(d(),m("div",ml,[a(n,{size:"48",color:"#c0c4cc"},{default:s(()=>[a(A(_e))]),_:1}),e[40]||(e[40]=o("p",null,"æš‚æ— ç›®æ ‡ï¼Œç‚¹å‡»æ–°å»ºå¼€å§‹è§„åˆ’",-1))])):(d(),m("div",{key:1,class:j(["gantt-wrap",{"is-dragging":Ae.value}]),onWheel:Qe(it,["prevent"]),onMousedown:nt,onMousemove:ot,onMouseup:Be,onMouseleave:Qe(Be,["self"])},[o("div",cl,[o("div",pl,[o("span",vl,f(He.value.label)+"/æ ¼ â†•ç¼©æ”¾",1)]),o("div",{class:"gantt-timeline-col",ref_key:"ganttTimelineRef",ref:Ve},[o("div",fl,[(d(!0),m(V,null,C(Fe.value.filter(l=>l.yearMark),l=>(d(),m("div",{key:"yr-"+l.left,class:"gantt-year-label",style:I({left:l.left})},f(l.yearMark),5))),128))]),o("div",gl,[(d(!0),m(V,null,C(Fe.value,l=>(d(),m("div",{key:l.label+l.left,class:"gantt-month-label",style:I({left:l.left})},f(l.label),5))),128))])],512)]),o("div",_l,[o("div",yl,[e[41]||(e[41]=o("div",{class:"gantt-label-col"},null,-1)),o("div",bl,[(d(!0),m(V,null,C(A(st),l=>(d(),m("div",{key:"gv-"+l.label,class:"gantt-grid-line",style:I({left:l.left})},null,4))),128)),Re.value!==null?(d(),m("div",{key:0,class:"gantt-today-line",style:I({left:Re.value})},null,4)):D("",!0)])]),(d(!0),m(V,null,C(pe.value,l=>(d(),m("div",{key:l.id,class:j(["gantt-row",{"is-selected":w.value?.id===l.id}]),onClick:g=>dt(l)},[o("div",wl,[o("div",kl,[o("div",Vl,[(d(!0),m(V,null,C((l.agentIds||[]).slice(0,2),g=>(d(),m("div",{key:g,class:"gantt-avatar",style:I({background:E.value[g]||"#409eff"})},f((Z.value[g]||g).slice(0,1)),5))),128))]),o("span",Al,f(l.title),1),o("span",{class:j(["gantt-pct","s-"+l.status])},f(ae(l))+"%",3)])]),o("div",Ml,[ht(l)?(d(),m(V,{key:0},[o("div",{class:"gantt-bar",style:I(kt(l))},[o("div",{class:"gantt-bar-progress",style:I({width:ae(l)+"%"})},null,4),wt(l)>8?(d(),m("span",Cl,f(l.title),1)):D("",!0)],4),(d(!0),m(V,null,C(l.milestones||[],g=>(d(),m(V,{key:g.id},[G(g.dueAt)?(d(),m("div",{key:0,class:j(["gantt-milestone",{done:g.done}]),style:I({left:Vt(g)}),title:g.title},null,14,Tl)):D("",!0)],64))),128))],64)):(d(),m("div",Dl,"æœªè®¾ç½®æ—¶é—´èŒƒå›´"))])],10,hl))),128))])],34)),a(Yt,{name:"gsp-slide"},{default:s(()=>[w.value?(d(),m("div",Il,[o("div",xl,[o("div",$l,[(d(!0),m(V,null,C((w.value.agentIds||[]).slice(0,3),l=>(d(),m("div",{key:l,class:"gsp-avatar",style:I({background:E.value[l]||"#409eff"})},f((Z.value[l]||l).slice(0,1)),5))),128))]),o("div",zl,[o("span",Ul,f(w.value.title),1),a(U,{type:qe(w.value.status),size:"small"},{default:s(()=>[h(f(Ze(w.value.status)),1)]),_:1},8,["type"])]),a(u,{type:"primary",size:"small",onClick:e[3]||(e[3]=l=>{Ie(w.value),w.value=null})},{default:s(()=>[...e[42]||(e[42]=[h(" æŸ¥çœ‹è¯¦æƒ… â†’ ",-1)])]),_:1}),a(n,{class:"gsp-close",onClick:e[4]||(e[4]=l=>w.value=null)},{default:s(()=>[a(A(Ht))]),_:1})]),o("div",Sl,[o("div",Yl,[e[43]||(e[43]=o("span",{class:"gsp-stat-label"},"æ—¶é—´è¿›åº¦",-1)),a(p,{percentage:ae(w.value),color:je(w.value),"stroke-width":8,style:{flex:"1",margin:"0 10px"}},null,8,["percentage","color"]),o("span",Nl,f(ae(w.value))+"%",1)]),o("div",Hl,[e[44]||(e[44]=o("span",{class:"gsp-stat-label"},"æ—¶é—´",-1)),o("span",Gl,f(ge(w.value.startAt))+" â€” "+f(ge(w.value.endAt)),1)]),w.value.milestones?.length?(d(),m("div",Fl,[e[45]||(e[45]=o("span",{class:"gsp-stat-label"},"é‡Œç¨‹ç¢‘",-1)),o("span",Ll,f(w.value.milestones.filter(l=>l.done).length)+"/"+f(w.value.milestones.length)+" å·²å®Œæˆ ",1)])):D("",!0),w.value.description?(d(),m("div",Bl,f(w.value.description),1)):D("",!0)])])):D("",!0)]),_:1})])):N.value?(d(),m(V,{key:1},[o("div",Rl,[o("div",El,[a(n,{style:{color:"#909399"}},{default:s(()=>[a(A(_e))]),_:1}),e[46]||(e[46]=o("span",{class:"crumb-sep"},"æ–°å»º",-1)),e[47]||(e[47]=o("span",{class:"crumb-name"},"ç›®æ ‡",-1))]),o("div",Ol,[a(u,{size:"small",onClick:e[5]||(e[5]=l=>N.value=!1)},{default:s(()=>[...e[48]||(e[48]=[h("å–æ¶ˆ",-1)])]),_:1}),a(u,{size:"small",type:"primary",loading:re.value,onClick:Ee},{default:s(()=>[a(n,null,{default:s(()=>[a(A(tt))]),_:1}),e[49]||(e[49]=h(" åˆ›å»º ",-1))]),_:1},8,["loading"])])]),o("div",Pl,[a(K,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(v,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(_,{modelValue:i.title,"onUpdate:modelValue":e[6]||(e[6]=l=>i.title=l),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(v,{label:"æè¿°"},{default:s(()=>[a(_,{modelValue:i.description,"onUpdate:modelValue":e[7]||(e[7]=l=>i.description=l),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç±»åž‹"},{default:s(()=>[a(se,{modelValue:i.type,"onUpdate:modelValue":e[8]||(e[8]=l=>i.type=l)},{default:s(()=>[a(F,{value:"personal"},{default:s(()=>[...e[50]||(e[50]=[h("ä¸ªäºº",-1)])]),_:1}),a(F,{value:"team"},{default:s(()=>[...e[51]||(e[51]=[h("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(k,{modelValue:i.agentIds,"onUpdate:modelValue":e[9]||(e[9]=l=>i.agentIds=l),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(d(!0),m(V,null,C(z.value,l=>(d(),$(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"çŠ¶æ€"},{default:s(()=>[a(k,{modelValue:i.status,"onUpdate:modelValue":e[10]||(e[10]=l=>i.status=l),style:{width:"100%"}},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(P,{modelValue:i.startAt,"onUpdate:modelValue":e[11]||(e[11]=l=>i.startAt=l),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(P,{modelValue:i.endAt,"onUpdate:modelValue":e[12]||(e[12]=l=>i.endAt=l),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),r.value?(d(),$(v,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(L,{modelValue:i.progress,"onUpdate:modelValue":e[13]||(e[13]=l=>i.progress=l),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):D("",!0),a(v,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",Xl,[(d(!0),m(V,null,C(i.milestones,(l,g)=>(d(),m("div",{key:g,class:"milestone-row"},[a(X,{modelValue:l.done,"onUpdate:modelValue":x=>l.done=x},null,8,["modelValue","onUpdate:modelValue"]),a(_,{modelValue:l.title,"onUpdate:modelValue":x=>l.title=x,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(P,{modelValue:l.dueAt,"onUpdate:modelValue":x=>l.dueAt=x,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(u,{type:"danger",size:"small",circle:"",onClick:x=>i.milestones.splice(g,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ze))]),_:1})]),_:1},8,["onClick"])]))),128)),a(u,{size:"small",onClick:Oe,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(A(oe))]),_:1}),e[52]||(e[52]=h(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])],64)):r.value?(d(),m(V,{key:2},[o("div",jl,[o("div",Zl,[a(n,{style:{color:"#909399"}},{default:s(()=>[a(A(_e))]),_:1}),e[53]||(e[53]=o("span",{class:"crumb-sep"},"ç›®æ ‡",-1)),o("span",ql,f(r.value.title),1)]),o("div",Wl,[a(u,{size:"small",type:"primary",loading:re.value,onClick:Ee},{default:s(()=>[a(n,null,{default:s(()=>[a(A(tt))]),_:1}),e[54]||(e[54]=h(" ä¿å­˜ ",-1))]),_:1},8,["loading"]),a(B,{title:`ç¡®è®¤åˆ é™¤ã€Œ${r.value.title}ã€ï¼Ÿ`,onConfirm:mt},{reference:s(()=>[a(u,{size:"small",type:"danger",plain:""},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ze))]),_:1})]),_:1})]),_:1},8,["title"])])]),a(xt,{modelValue:ee.value,"onUpdate:modelValue":e[22]||(e[22]=l=>ee.value=l),class:"editor-tabs"},{default:s(()=>[a($e,{label:"åŸºæœ¬ä¿¡æ¯",name:"basic"},{default:s(()=>[o("div",Jl,[a(K,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(v,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(_,{modelValue:i.title,"onUpdate:modelValue":e[14]||(e[14]=l=>i.title=l),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(v,{label:"æè¿°"},{default:s(()=>[a(_,{modelValue:i.description,"onUpdate:modelValue":e[15]||(e[15]=l=>i.description=l),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç±»åž‹"},{default:s(()=>[a(se,{modelValue:i.type,"onUpdate:modelValue":e[16]||(e[16]=l=>i.type=l)},{default:s(()=>[a(F,{value:"personal"},{default:s(()=>[...e[55]||(e[55]=[h("ä¸ªäºº",-1)])]),_:1}),a(F,{value:"team"},{default:s(()=>[...e[56]||(e[56]=[h("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(k,{modelValue:i.agentIds,"onUpdate:modelValue":e[17]||(e[17]=l=>i.agentIds=l),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(d(!0),m(V,null,C(z.value,l=>(d(),$(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"çŠ¶æ€"},{default:s(()=>[a(k,{modelValue:i.status,"onUpdate:modelValue":e[18]||(e[18]=l=>i.status=l),style:{width:"100%"}},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(P,{modelValue:i.startAt,"onUpdate:modelValue":e[19]||(e[19]=l=>i.startAt=l),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(P,{modelValue:i.endAt,"onUpdate:modelValue":e[20]||(e[20]=l=>i.endAt=l),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),r.value?(d(),$(v,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(L,{modelValue:i.progress,"onUpdate:modelValue":e[21]||(e[21]=l=>i.progress=l),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):D("",!0),a(v,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",Kl,[(d(!0),m(V,null,C(i.milestones,(l,g)=>(d(),m("div",{key:g,class:"milestone-row"},[a(X,{modelValue:l.done,"onUpdate:modelValue":x=>l.done=x},null,8,["modelValue","onUpdate:modelValue"]),a(_,{modelValue:l.title,"onUpdate:modelValue":x=>l.title=x,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(P,{modelValue:l.dueAt,"onUpdate:modelValue":x=>l.dueAt=x,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(u,{type:"danger",size:"small",circle:"",onClick:x=>i.milestones.splice(g,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ze))]),_:1})]),_:1},8,["onClick"])]))),128)),a(u,{size:"small",onClick:Oe,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(A(oe))]),_:1}),e[57]||(e[57]=h(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1}),a($e,{label:"å®šæœŸæ£€æŸ¥",name:"checks"},{default:s(()=>[o("div",Ql,[o("div",ea,[a(u,{type:"primary",size:"small",onClick:ct},{default:s(()=>[a(n,null,{default:s(()=>[a(A(oe))]),_:1}),e[58]||(e[58]=h(" æ·»åŠ æ£€æŸ¥ ",-1))]),_:1})]),a(Tt,{data:r.value.checks,size:"small",stripe:"",class:"checks-table"},{default:s(()=>[a(ne,{prop:"name",label:"åç§°","min-width":"120"}),a(ne,{label:"é¢‘çŽ‡","min-width":"140"},{default:s(({row:l})=>[o("code",ta,f(l.schedule),1),a(Ct,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[h(f(l.tz||"Asia/Shanghai"),1)]),_:2},1024)]),_:1}),a(ne,{label:"æˆå‘˜",width:"90"},{default:s(({row:l})=>[h(f(Z.value[l.agentId]||l.agentId),1)]),_:1}),a(ne,{label:"å¯ç”¨",width:"60"},{default:s(({row:l})=>[a(We,{modelValue:l.enabled,"onUpdate:modelValue":g=>l.enabled=g,size:"small",onChange:g=>ft(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(ne,{label:"æ“ä½œ",width:"130"},{default:s(({row:l})=>[a(u,{size:"small",link:"",onClick:g=>gt(l)},{default:s(()=>[...e[59]||(e[59]=[h("ç«‹å³è¿è¡Œ",-1)])]),_:1},8,["onClick"]),a(u,{size:"small",link:"",type:"danger",onClick:g=>_t(l)},{default:s(()=>[...e[60]||(e[60]=[h("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),r.value.checks?.length?D("",!0):(d(),$(Je,{key:0,description:"æš‚æ— æ£€æŸ¥è®¡åˆ’","image-size":60}))])]),_:1}),a($e,{label:"æ£€æŸ¥è®°å½•",name:"records"},{default:s(()=>[o("div",la,[we.value?(d(),m("div",aa,[a(n,{class:"is-loading",size:"24"},{default:s(()=>[a(A(Gt))]),_:1})])):me.value.length?(d(),$(It,{key:1,class:"records-timeline"},{default:s(()=>[(d(!0),m(V,null,C(me.value,l=>(d(),$(Dt,{key:l.id,timestamp:Mt(l.runAt),type:l.status==="ok"?"success":"danger",placement:"top"},{default:s(()=>[o("div",sa,[o("div",na,[o("div",{class:"rec-avatar",style:I({background:E.value[l.agentId]||"#409eff"})},f((Z.value[l.agentId]||"?")[0]),5),o("span",oa,f(Z.value[l.agentId]||l.agentId),1),a(U,{type:l.status==="ok"?"success":"danger",size:"small"},{default:s(()=>[h(f(l.status),1)]),_:2},1032,["type"])]),o("div",ia,f(l.output||"ï¼ˆæ— è¾“å‡ºï¼‰"),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})):(d(),$(Je,{key:2,description:"æš‚æ— æ£€æŸ¥è®°å½•","image-size":60}))])]),_:1})]),_:1},8,["modelValue"])],64)):D("",!0)]),o("div",{class:j(["gs-handle",{dragging:Q.value==="chat"}]),onMousedown:e[23]||(e[23]=l=>Se(l,"chat"))},[...e[61]||(e[61]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",{class:"gs-chat",style:I({width:be.value+"px"})},[o("div",da,[a(n,null,{default:s(()=>[a(A(Ft))]),_:1}),e[62]||(e[62]=o("span",null,"AI ç›®æ ‡åŠ©æ‰‹",-1)),a(k,{modelValue:R.value,"onUpdate:modelValue":e[24]||(e[24]=l=>R.value=l),size:"small",style:{"margin-left":"auto",width:"110px"},placeholder:"é€‰æ‹©æˆå‘˜"},{default:s(()=>[(d(!0),m(V,null,C(z.value,l=>(d(),$(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",ua,[R.value?(d(),$(Bt,{key:Xe.value,"agent-id":R.value,"session-id":Xe.value,context:ut.value,"welcome-message":r.value?`æ­£åœ¨æŸ¥çœ‹ç›®æ ‡ã€Œ${r.value.title}ã€ï¼Œæˆ‘å¯ä»¥å¸®ä½ ä¿®æ”¹ç›®æ ‡ä¿¡æ¯ã€æ·»åŠ é‡Œç¨‹ç¢‘æˆ–è®¾ç½®å®šæœŸæ£€æŸ¥ã€‚`:"ä½ å¥½ï¼æˆ‘å¯ä»¥å¸®ä½ åˆ›å»ºç›®æ ‡ï¼Œè¯´ä¸€ä¸‹éœ€æ±‚å³å¯ï¼Œæˆ‘ä¼šè‡ªåŠ¨å¡«å†™è¡¨å•ã€‚",examples:r.value?["å¸®æˆ‘æŠŠè¿›åº¦æ›´æ–°åˆ° 60%","æ·»åŠ 3ä¸ªé‡Œç¨‹ç¢‘","æ¯å‘¨ä¸€æ£€æŸ¥è¿™ä¸ªç›®æ ‡"]:["å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿç›®æ ‡ï¼šQ2ç”¨æˆ·å¢žé•¿ï¼Œ3æœˆ1æ—¥åˆ°6æœˆ30æ—¥","ä¸ªäººç›®æ ‡ï¼šå­¦ä¹  Go è¯­è¨€ï¼Œæœ¬æœˆå®Œæˆ"],height:"100%",onResponse:yt},null,8,["agent-id","session-id","context","welcome-message","examples"])):D("",!0)])],4),a($t,{modelValue:te.value,"onUpdate:modelValue":e[33]||(e[33]=l=>te.value=l),title:"æ·»åŠ å®šæœŸæ£€æŸ¥",width:"480px"},{footer:s(()=>[a(u,{onClick:e[32]||(e[32]=l=>te.value=!1)},{default:s(()=>[...e[64]||(e[64]=[h("å–æ¶ˆ",-1)])]),_:1}),a(u,{type:"primary",onClick:vt},{default:s(()=>[...e[65]||(e[65]=[h("æ·»åŠ ",-1)])]),_:1})]),default:s(()=>[a(K,{model:M,"label-width":"90px",size:"small"},{default:s(()=>[a(v,{label:"åç§°",required:""},{default:s(()=>[a(_,{modelValue:M.name,"onUpdate:modelValue":e[25]||(e[25]=l=>M.name=l),placeholder:"å¦‚ï¼šæ¯å‘¨è¿›åº¦æ£€æŸ¥"},null,8,["modelValue"])]),_:1}),a(v,{label:"æ‰§è¡Œæˆå‘˜",required:""},{default:s(()=>[a(k,{modelValue:M.agentId,"onUpdate:modelValue":e[26]||(e[26]=l=>M.agentId=l),style:{width:"100%"}},{default:s(()=>[(d(!0),m(V,null,C(z.value,l=>(d(),$(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"æ£€æŸ¥é¢‘çŽ‡"},{default:s(()=>[a(k,{modelValue:ce.value,"onUpdate:modelValue":e[27]||(e[27]=l=>ce.value=l),style:{width:"100%"},onChange:pt},{default:s(()=>[a(c,{label:"æ¯å¤©ä¸Šåˆ9ç‚¹",value:"0 9 * * *"}),a(c,{label:"æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹",value:"0 9 * * 1"}),a(c,{label:"æ¯å‘¨äº”ä¸‹åˆ5ç‚¹",value:"0 17 * * 5"}),a(c,{label:"æ¯æœˆ1æ—¥ä¸Šåˆ9ç‚¹",value:"0 9 1 * *"}),a(c,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),ce.value==="custom"?(d(),$(v,{key:0,label:"Cron"},{default:s(()=>[a(_,{modelValue:M.schedule,"onUpdate:modelValue":e[28]||(e[28]=l=>M.schedule=l),placeholder:"0 9 * * 1"},null,8,["modelValue"])]),_:1})):D("",!0),a(v,{label:"æ—¶åŒº"},{default:s(()=>[a(k,{modelValue:M.tz,"onUpdate:modelValue":e[29]||(e[29]=l=>M.tz=l),style:{width:"100%"}},{default:s(()=>[a(c,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),a(c,{label:"UTC",value:"UTC"}),a(c,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"æ£€æŸ¥æç¤ºè¯"},{default:s(()=>[a(_,{modelValue:M.prompt,"onUpdate:modelValue":e[30]||(e[30]=l=>M.prompt=l),type:"textarea",rows:3,placeholder:"å¯ç”¨å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt}"},null,8,["modelValue"]),e[63]||(e[63]=o("div",{style:{"font-size":"11px",color:"#94a3b8","margin-top":"3px"}}," å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt} {goal.startAt} {goal.status} ",-1))]),_:1}),a(v,{label:"å¯ç”¨"},{default:s(()=>[a(We,{modelValue:M.enabled,"onUpdate:modelValue":e[31]||(e[31]=l=>M.enabled=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),_a=Rt(ca,[["__scopeId","data-v-391fa71b"]]);export{_a as default};
