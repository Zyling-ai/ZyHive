import{d as tt,P as Ll,o as at,i as o,c as v,e as n,b as e,w as t,g as V,F as j,q as se,z as we,t as p,l as z,f as i,j as Ge,p as be,v as Oe,Q as Ml,x as ta,n as P,r as u,I as sl,R as zl,N as Z,E as y,S as fl,h as w,T as aa,U as na,k as Qe,V as gt,W as sa,B as Il,X as ht,A as Vl,m as oa,Y as Tl,Z as Sl,_ as ia,O as El,$ as _t,L as Se,J as ua,K as Rl,a0 as da,a1 as lt,a2 as ra,a3 as ca,a4 as va,a5 as wt,a6 as fa}from"./index-DbcP3S-d.js";import{A as nt}from"./AiChat-hTVgIiva.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pa={class:"skill-studio"},ma={class:"sidebar-top"},ya={class:"sidebar-acts"},ga={class:"skill-list"},_a={key:0,class:"list-empty"},wa=["onClick"],ba={class:"sk-icon"},ha={key:0},ka={class:"sk-info"},xa={class:"sk-name"},Ca={class:"sk-id"},$a={class:"sk-right"},za={key:0,class:"sk-streaming-dot",title:"AI ÁîüÊàê‰∏≠‚Ä¶"},Va={class:"studio-editor"},Ta={key:0,class:"editor-empty"},Sa={class:"editor-toolbar"},Ia={class:"editor-breadcrumb"},La={class:"crumb-name"},Ma={class:"toolbar-acts"},Aa={class:"editor-body"},Ua={class:"tree-title"},Da={class:"tree-item tree-dir"},Fa=["onClick"],Na={key:0,class:"tree-empty"},Ba={key:0,class:"file-editor"},Ea={class:"file-editor-head"},Ra={style:{display:"flex","align-items":"center",gap:"10px"}},Pa={style:{"font-size":"12px",color:"#909399"}},Ka={class:"json-preview"},ja={key:1,class:"file-editor"},Wa={class:"file-editor-head"},Oa={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Ha={style:{"font-size":"11px",color:"#c0c4cc"}},Ya={key:2,class:"file-editor"},Xa={class:"file-editor-head"},qa={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Ja={style:{"font-size":"11px",color:"#c0c4cc"}},Ga=["placeholder"],Qa={class:"chat-panel-head"},Za={key:0,style:{"margin-left":"auto","font-size":"11px",color:"#c0c4cc"}},en={key:0,style:{"margin-left":"6px",color:"#e6a23c"}},ln={class:"chat-wrap"},tn=tt({__name:"SkillStudio",props:{agentId:{}},setup(pl){const Ce=pl,g=Ce.agentId,O=u(200),Ie=u(140),he=u(340),ee=u("");function ke(m,d){const U=m.clientX,$=d==="side"?O.value:d==="tree"?Ie.value:he.value;ee.value=d;const N=M=>{const D=M.clientX-U;d==="side"?O.value=Math.max(140,Math.min(340,$+D)):d==="tree"?Ie.value=Math.max(100,Math.min(280,$+D)):he.value=Math.max(240,Math.min(560,$-D))},Y=()=>{ee.value="",window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",Y),document.body.style.cursor="",document.body.style.userSelect=""};window.addEventListener("mousemove",N),window.addEventListener("mouseup",Y),document.body.style.cssText+="cursor:col-resize;user-select:none;"}const ae=u([]),oe=u(!1),b=u(null),L=u("meta"),T=u({name:"",icon:"",category:"",description:"",version:"1.0.0",enabled:!0}),X=u(""),Le=u(!1),x=u(!1),H=u(!1),q=u(!1),de=u(!1),le=u([]),ie=u(!1),re=u(""),ce=u(!1),$e=u(!1),F={};function Me(m,d){d?F[m]=d:delete F[m]}function te(m){return m?F[m]:null}const ze=u(new Set);function ve(m,d){const U=new Set(ze.value);d?U.add(m):U.delete(m),ze.value=U}const me=u(new Set);Ll(b,async m=>{m&&(me.value.has(m.id)||(me.value.add(m.id),await fl(),await te(m.id)?.resumeSession?.(`skill-studio-${m.id}`)))},{flush:"post"});const Ze=sl(()=>b.value?`‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÊ≠£Âú®Â∏ÆÂä©Áî®Êà∑ÈÖçÁΩÆÊäÄËÉΩ„Äå${b.value.name||b.value.id}„ÄçÔºàID: ${b.value.id}Ôºâ„ÄÇ

## üéØ Ê†∏ÂøÉËÉΩÂäõÔºöËá™Âä®Â°´ÂÖÖË°®ÂçïÔºà‰ºòÂÖà‰ΩøÁî®Ôºâ

ÂΩìÁî®Êà∑ÊèèËø∞ÊäÄËÉΩÈúÄÊ±ÇÊó∂Ôºå**Áõ¥Êé•ËæìÂá∫‰ª•‰∏ã JSONÔºåÈ°µÈù¢‰ºöËá™Âä®Â°´ÂÖÖÊâÄÊúâÂ≠óÊÆµ**Ôºö

\`\`\`json
{"action":"fill_skill","data":{"name":"ÊäÄËÉΩÂêçÁß∞","icon":"üîß","category":"ÂàÜÁ±ª","description":"ÁÆÄË¶ÅÊèèËø∞","enabled":true,"prompt":"# ÊäÄËÉΩÂêçÁß∞\\n\\n## ËßíËâ≤\\n‰Ω†ÊòØ...\\n\\n## ËÉΩÂäõ\\n..."}}
\`\`\`

Â≠óÊÆµËØ¥ÊòéÔºö
- name: ÊäÄËÉΩÊòæÁ§∫ÂêçÁß∞
- icon: emoji ÂõæÊ†áÔºàÂ¶Ç üåê üìù üîçÔºâ
- category: ÂàÜÁ±ªÔºàÂ¶Ç ËØ≠Ë®Ä„ÄÅ‰ª£Á†Å„ÄÅÂàõÊÑèÔºâ
- description: ‰∏ÄÂè•ËØùÊèèËø∞ÂäüËÉΩ
- enabled: true/false
- prompt: ÂÆåÊï¥ÁöÑ SKILL.md ÂÜÖÂÆπÔºàMarkdownÔºåÊîØÊåÅÊç¢Ë°å \\nÔºâ

ËæìÂá∫ JSON ÂêéÈ°µÈù¢Ëá™Âä®Â°´ÂÖÖÔºåÁî®Êà∑Á°ÆËÆ§ÂêéÁÇπ‰øùÂ≠òÂç≥ÂèØ„ÄÇ

## ÂΩìÂâçÊäÄËÉΩ‰ø°ÊÅØ
- ÂêçÁß∞Ôºö${b.value.name||"ÔºàÊú™ÂëΩÂêçÔºâ"}
- ÂàÜÁ±ªÔºö${b.value.category||"ÔºàÊú™ËÆæÁΩÆÔºâ"}
- ÂΩìÂâç SKILL.mdÔºö
\`\`\`markdown
${X.value||"ÔºàÁ©∫Ôºâ"}
\`\`\`

## È´òÁ∫ßÔºöÂàõÂª∫Â∑•ÂÖ∑Êñá‰ª∂Ôºà‰ªÖÈúÄË¶ÅÂ§ñÈÉ®Â∑•ÂÖ∑Êó∂‰ΩøÁî®Ôºâ
Êñá‰ª∂Ë∑ØÂæÑÂøÖÈ°ªÂú® skills/${b.value.id}/ ÁõÆÂΩï‰∏ãÔºåÂ¶Ç skills/${b.value.id}/tools/helper.py`:"‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÂ∏ÆÂä©Áî®Êà∑ËÆæËÆ°Âíå‰ºòÂåñ AI ÊäÄËÉΩÁöÑÁ≥ªÁªüÊèêÁ§∫ËØç„ÄÇ"),ye=sl(()=>b.value?de.value?`Êñ∞ÊäÄËÉΩÂ∑≤ÂàõÂª∫ÔºàID: ${b.value.id}Ôºâ„ÄÇÂëäËØâÊàë‰Ω†ÊÉ≥Ë¶Å‰ªÄ‰πàÂäüËÉΩÔºåÊàë‰ºöËá™Âä®Â°´ÂÜôÂêçÁß∞„ÄÅÊèèËø∞ÂíåÂÆåÊï¥ÁöÑ SKILL.md ÊèêÁ§∫ËØçÔºåÁ°ÆËÆ§ÂêéÁÇπ‰øùÂ≠òÂç≥ÂèØ„ÄÇ`:`ÂΩìÂâçÁºñËæë„Äå${b.value.name}„Äç„ÄÇÂëäËØâÊàëÈúÄË¶ÅÂ¶Ç‰ΩïË∞ÉÊï¥ÔºåÊàë‰ºöÁõ¥Êé•Â°´ÂÜôË°®ÂçïÔºåÊàñËÄÖ‰Ω†‰πüÂèØ‰ª•Áõ¥Êé•ÂØπËØùÊµãËØïÂΩìÂâçÊäÄËÉΩÊïàÊûú„ÄÇ`:"ÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂêéÔºåÊàëÂèØ‰ª•Â∏Æ‰Ω†ÁîüÊàêÈÖçÁΩÆÔºåËá™Âä®Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµ„ÄÇ"),Pe=sl(()=>b.value?de.value?["Â∏ÆÊàëÁîüÊàêËøô‰∏™ÊäÄËÉΩÁöÑÂÆåÊï¥ÈÖçÁΩÆ","Ëøô‰∏™ÊäÄËÉΩÁî®‰∫é‰ªÄ‰πàÂú∫ÊôØÔºü"]:[`Â∏ÆÊàë‰ºòÂåñ„Äå${b.value.name}„ÄçÁöÑÊèêÁ§∫ËØç`,"ÈáçÊñ∞ÁîüÊàêÊõ¥Â•ΩÁöÑ SKILL.md","Áõ¥Êé•ÊµãËØïÔºöÁî®‰∏≠Êñá‰ªãÁªç‰∏Ä‰∏ã‰Ω†ÁöÑÂäüËÉΩ"]:["Â∏ÆÊàëËÆæËÆ°‰∏Ä‰∏™‰ª£Á†ÅÂÆ°Êü•ÊäÄËÉΩ","Â∏ÆÊàëÂÜô‰∏Ä‰∏™ÁøªËØëÂä©Êâã"]);async function ue(){oe.value=!0;try{const m=await zl.list(g);if(ae.value=m.data||[],b.value){const d=ae.value.find(U=>U.id===b.value.id);d&&(b.value=d,Ke(d))}}catch{}finally{oe.value=!1}}function Ke(m){T.value={name:m.name,icon:m.icon||"",category:m.category||"",description:m.description||"",version:m.version||"1.0.0",enabled:m.enabled}}async function el(m){b.value?.id!==m.id&&(b.value=m,Ke(m),L.value="meta",x.value=!1,X.value="",de.value=!1,je(),xe())}async function Ae(){b.value&&L.value!=="prompt"&&(L.value="prompt",X.value||await xe())}async function ge(m,d,U){const $=await Z.read(g,m),N=Array.isArray($.data)?$.data:[],Y=[];for(const M of N){if(U===0&&M.name==="skill.json")continue;const D=d?`${d}/${M.name}`:M.name;if(Y.push({name:M.name,path:D,isDir:M.isDir,depth:U}),M.isDir){const Fe=await ge(`skills/${b.value.id}/${D}`,D,U+1);Y.push(...Fe)}}return Y}async function je(){if(b.value){ie.value=!0;try{le.value=await ge(`skills/${b.value.id}/`,"",0)}catch{le.value=[{name:"SKILL.md",path:"SKILL.md",isDir:!1,depth:0}]}finally{ie.value=!1}}}async function Q(m,d){if(!d){if(m==="SKILL.md"){await Ae();return}L.value=m,ce.value=!1,await We()}}async function We(){if(!(!b.value||!L.value||L.value==="meta"||L.value==="prompt")){$e.value=!0;try{const m=await Z.read(g,`skills/${b.value.id}/${L.value}`);re.value=m.data?.content||"",ce.value=!1}catch{re.value=""}finally{$e.value=!1}}}async function He(m){if(b.value)try{await Z.delete(g,`skills/${b.value.id}/${m}`),L.value===m&&(L.value="prompt"),await je(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function ll(){if(b.value){H.value=!0;try{L.value==="meta"||L.value==="prompt"?(await zl.update(Ce.agentId,b.value.id,{name:T.value.name,icon:T.value.icon,category:T.value.category,description:T.value.description,enabled:T.value.enabled}),(L.value==="prompt"||X.value)&&(await Z.write(g,`skills/${b.value.id}/SKILL.md`,X.value),x.value=!1),await ue()):(await Z.write(g,`skills/${b.value.id}/${L.value}`,re.value),ce.value=!1),y.success("‰øùÂ≠òÊàêÂäü")}catch(m){y.error(m.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{H.value=!1}}}async function Ye(m,d){try{await zl.update(Ce.agentId,m.id,{enabled:d}),await ue()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function ml(){if(b.value)try{await zl.remove(Ce.agentId,b.value.id),y.success("Â∑≤Âà†Èô§"),b.value=null,await ue()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ue(){if(q.value)return;q.value=!0;const m="skill_"+Date.now().toString(36);try{await zl.create(Ce.agentId,{meta:{id:m,name:"Êñ∞ÊäÄËÉΩ",icon:"",category:"",description:"",version:"1.0.0",enabled:!1,source:"local",installedAt:""},promptContent:""}),await ue();const d=ae.value.find(U=>U.id===m);d&&(await el(d),L.value="prompt",X.value="",de.value=!0,await fl(),me.value.has(m)||(me.value.add(m),await te(m)?.resumeSession?.(`skill-studio-${m}`)))}catch(d){y.error(d.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}finally{q.value=!1}}async function Xe(m,d){m===b.value?.id&&(de.value=!1),!(m===b.value?.id&&qe(d))&&(await ue(),m===b.value?.id&&(await Promise.all([je(),xe()]),L.value!=="meta"&&L.value!=="prompt"&&await We()))}function qe(m){const d=N=>{try{const Y=JSON.parse(N);if(Y.action==="fill_skill"&&Y.data){const M=Y.data;return M.name&&(T.value.name=M.name),M.icon&&(T.value.icon=M.icon),M.category&&(T.value.category=M.category),M.description&&(T.value.description=M.description),typeof M.enabled=="boolean"&&(T.value.enabled=M.enabled),M.prompt&&(X.value=M.prompt,x.value=!0,L.value="prompt"),y.success("AI Â∑≤Â°´ÂÜôÊäÄËÉΩ‰ø°ÊÅØÔºåÁ°ÆËÆ§ÂêéÁÇπÂáª‰øùÂ≠ò"),!0}}catch{}return!1},U=m.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(U?.[1]&&d(U[1]))return!0;const $=m.match(/(\{"action"\s*:\s*"fill_skill"[\s\S]*?\})/);return!!($?.[1]&&d($[1]))}async function xe(){if(b.value){Le.value=!0;try{const m=await Z.read(g,`skills/${b.value.id}/SKILL.md`);X.value=m.data?.content||"",x.value=!1}catch{X.value=""}finally{Le.value=!1}}}async function De(){if(!b.value)return;X.value||await Ae();const m=`ËØ∑Áî®„Äå${b.value.name}„ÄçÊäÄËÉΩÊïàÊûúÂõûÂ§çÔºö‰Ω†Â•ΩÔºåËØ∑‰ªãÁªç‰∏Ä‰∏ã‰Ω†ÁöÑÂäüËÉΩ„ÄÇ`;te(b.value?.id)?.fillInput?.(m),y.info("ÊµãËØïÊ∂àÊÅØÂ∑≤Â°´ÂÖ•Âè≥‰æßËÅäÂ§©Ê°ÜÔºåÁÇπÂáªÂèëÈÄÅÂç≥ÂèØÊµãËØï")}return at(ue),(m,d)=>{const U=w("Refresh"),$=w("el-icon"),N=w("el-button"),Y=w("Plus"),M=w("Tools"),D=w("el-tag"),Fe=w("el-switch"),W=w("Setting"),yl=w("FolderOpened"),gl=w("VideoPlay"),ol=w("DocumentChecked"),tl=w("Delete"),il=w("el-popconfirm"),al=w("Folder"),Ve=w("Document"),Te=w("el-input"),r=w("el-form-item"),c=w("el-col"),S=w("el-row"),I=w("el-collapse-item"),_l=w("el-collapse"),wl=w("el-form"),bl=w("ChatLineRound");return o(),v("div",pa,[n("div",{class:"studio-sidebar",style:be({width:O.value+"px"})},[n("div",ma,[d[16]||(d[16]=n("span",{class:"sidebar-title"},"ÊäÄËÉΩÂ∫ì",-1)),n("div",ya,[e(N,{size:"small",loading:oe.value,circle:"",onClick:ue},{default:t(()=>[e($,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"]),e(N,{size:"small",type:"primary",circle:"",loading:q.value,onClick:Ue},{default:t(()=>[e($,null,{default:t(()=>[e(Y)]),_:1})]),_:1},8,["loading"])])]),n("div",ga,[!oe.value&&ae.value.length===0?(o(),v("div",_a,"ÊöÇÊó†ÊäÄËÉΩ")):V("",!0),(o(!0),v(j,null,se(ae.value,_=>(o(),v("div",{key:_.id,class:we(["skill-item",{active:b.value?.id===_.id}]),onClick:C=>el(_)},[n("span",ba,[_.icon?(o(),v("span",ha,p(_.icon),1)):(o(),z($,{key:1},{default:t(()=>[e(M)]),_:1}))]),n("div",ka,[n("div",xa,p(_.name),1),n("div",Ca,p(_.id),1)]),n("div",$a,[ze.value.has(_.id)?(o(),v("span",za)):_.category?(o(),z(D,{key:1,size:"small",effect:"plain",style:{"margin-right":"6px","font-size":"11px"}},{default:t(()=>[i(p(_.category),1)]),_:2},1024)):V("",!0),e(Fe,{"model-value":_.enabled,size:"small",onChange:C=>Ye(_,C),onClick:d[0]||(d[0]=Ge(()=>{},["stop"]))},null,8,["model-value","onChange"])])],10,wa))),128))])],4),n("div",{class:we(["ss-handle",{dragging:ee.value==="side"}]),onMousedown:d[1]||(d[1]=_=>ke(_,"side"))},[...d[17]||(d[17]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),n("div",Va,[b.value?(o(),v(j,{key:1},[n("div",Sa,[n("div",Ia,[e($,{style:{color:"#909399"}},{default:t(()=>[e(yl)]),_:1}),d[20]||(d[20]=n("span",{class:"crumb-sep"},"skills /",-1)),n("span",La,p(b.value.id),1)]),n("div",Ma,[e(N,{size:"small",onClick:De},{default:t(()=>[e($,null,{default:t(()=>[e(gl)]),_:1}),d[21]||(d[21]=i(" ÊµãËØï ",-1))]),_:1}),e(N,{size:"small",type:"primary",loading:H.value,onClick:ll},{default:t(()=>[e($,null,{default:t(()=>[e(ol)]),_:1}),d[22]||(d[22]=i(" ‰øùÂ≠ò ",-1))]),_:1},8,["loading"]),e(il,{title:"Á°ÆËÆ§Âà†Èô§ËØ•ÊäÄËÉΩÔºü",onConfirm:ml},{reference:t(()=>[e(N,{size:"small",type:"danger",plain:""},{default:t(()=>[e($,null,{default:t(()=>[e(tl)]),_:1})]),_:1})]),_:1})])]),n("div",Aa,[n("div",{class:"file-tree",style:be({width:Ie.value+"px"})},[n("div",Ua,[d[23]||(d[23]=i(" ÁõÆÂΩï ",-1)),e(N,{link:"",size:"small",loading:ie.value,onClick:je,style:{"margin-left":"auto",padding:"0"}},{default:t(()=>[e($,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"])]),n("div",Da,[e($,null,{default:t(()=>[e(al)]),_:1}),n("span",null,p(b.value.id)+"/",1)]),n("div",{class:we(["tree-item",{"tree-active":L.value==="meta"}]),onClick:d[2]||(d[2]=_=>L.value="meta")},[e($,null,{default:t(()=>[e(Ve)]),_:1}),d[24]||(d[24]=n("span",null,"skill.json",-1))],2),(o(!0),v(j,null,se(le.value,_=>(o(),v("div",{key:_.path,class:we(["tree-item",{"tree-active":L.value===(_.path==="SKILL.md"?"prompt":_.path),"tree-dir-row":_.isDir}]),style:be({paddingLeft:`${12+_.depth*12}px`}),onClick:C=>Q(_.path,_.isDir)},[_.isDir?(o(),z($,{key:0,style:{color:"#e6a23c"}},{default:t(()=>[e(al)]),_:1})):(o(),z($,{key:1},{default:t(()=>[e(Ve)]),_:1})),n("span",null,p(_.name),1),_.path==="SKILL.md"&&b.value.enabled?(o(),z(D,{key:2,size:"small",type:"success",effect:"plain",style:{"margin-left":"4px","font-size":"10px"}},{default:t(()=>[...d[25]||(d[25]=[i("Ê≥®ÂÖ•‰∏≠",-1)])]),_:1})):V("",!0)],14,Fa))),128)),!ie.value&&le.value.length===0?(o(),v("div",Na,"Á©∫ÁõÆÂΩï")):V("",!0)],4),n("div",{class:we(["ss-handle",{dragging:ee.value==="tree"}]),onMousedown:d[3]||(d[3]=_=>ke(_,"tree"))},[...d[26]||(d[26]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),L.value==="meta"?(o(),v("div",Ba,[n("div",Ea,[e($,null,{default:t(()=>[e(Ve)]),_:1}),d[27]||(d[27]=i(" skill.json ",-1)),d[28]||(d[28]=n("span",{class:"file-hint"},"ÊäÄËÉΩÂÖÉ‰ø°ÊÅØÔºåÂΩ±ÂìçÂàóË°®Â±ïÁ§∫Âíå runner Ë°å‰∏∫",-1))]),e(wl,{model:T.value,"label-width":"72px",size:"small",style:{padding:"16px 20px"}},{default:t(()=>[e(r,{label:"ÊäÄËÉΩ ID"},{default:t(()=>[e(Te,{value:b.value.id,disabled:""},null,8,["value"])]),_:1}),e(S,{gutter:12},{default:t(()=>[e(c,{span:14},{default:t(()=>[e(r,{label:"ÂêçÁß∞"},{default:t(()=>[e(Te,{modelValue:T.value.name,"onUpdate:modelValue":d[4]||(d[4]=_=>T.value.name=_),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:10},{default:t(()=>[e(r,{label:"ÂõæÊ†á"},{default:t(()=>[e(Te,{modelValue:T.value.icon,"onUpdate:modelValue":d[5]||(d[5]=_=>T.value.icon=_),placeholder:"emoji"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(S,{gutter:12},{default:t(()=>[e(c,{span:14},{default:t(()=>[e(r,{label:"ÂàÜÁ±ª"},{default:t(()=>[e(Te,{modelValue:T.value.category,"onUpdate:modelValue":d[6]||(d[6]=_=>T.value.category=_),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:10},{default:t(()=>[e(r,{label:"ÁâàÊú¨"},{default:t(()=>[e(Te,{modelValue:T.value.version,"onUpdate:modelValue":d[7]||(d[7]=_=>T.value.version=_),placeholder:"1.0.0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"ÊèèËø∞"},{default:t(()=>[e(Te,{modelValue:T.value.description,"onUpdate:modelValue":d[8]||(d[8]=_=>T.value.description=_),type:"textarea",rows:2,placeholder:"ÁÆÄË¶ÅÊèèËø∞ÊäÄËÉΩÂäüËÉΩ"},null,8,["modelValue"])]),_:1}),e(r,{label:"Áä∂ÊÄÅ"},{default:t(()=>[n("div",Ra,[e(Fe,{modelValue:T.value.enabled,"onUpdate:modelValue":d[9]||(d[9]=_=>T.value.enabled=_)},null,8,["modelValue"]),n("span",Pa,p(T.value.enabled?"Â∑≤ÂêØÁî®ÔºåSKILL.md Â∞ÜÊ≥®ÂÖ•Á≥ªÁªüÊèêÁ§∫":"Â∑≤Á¶ÅÁî®"),1)])]),_:1}),e(_l,{style:{"margin-top":"8px"}},{default:t(()=>[e(I,{title:"Êü•Áúã skill.json ÂéüÊñá"},{default:t(()=>[n("pre",Ka,p(JSON.stringify({id:b.value.id,...T.value},null,2)),1)]),_:1})]),_:1})]),_:1},8,["model"])])):L.value==="prompt"?(o(),v("div",ja,[n("div",Wa,[e($,null,{default:t(()=>[e(Ve)]),_:1}),d[30]||(d[30]=i(" SKILL.md ",-1)),d[31]||(d[31]=n("span",{class:"file-hint"},"Ê≥®ÂÖ•Âà∞ AI System Prompt ÁöÑÊåá‰ª§ÂÜÖÂÆπ",-1)),n("div",Oa,[x.value?(o(),z(D,{key:0,type:"warning",size:"small"},{default:t(()=>[...d[29]||(d[29]=[i("Êú™‰øùÂ≠ò",-1)])]),_:1})):V("",!0),n("span",Ha,p(X.value.length)+" Â≠óÁ¨¶",1),e(N,{size:"small",circle:"",loading:Le.value,onClick:xe,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e($,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"])])]),Oe(n("textarea",{"onUpdate:modelValue":d[10]||(d[10]=_=>X.value=_),class:"code-textarea",spellcheck:"false",placeholder:`# ÊäÄËÉΩÂêçÁß∞

## ÂäüËÉΩËØ¥Êòé
ÊèèËø∞ËØ•ÊäÄËÉΩÁöÑÁî®ÈÄî‚Ä¶

## Ë°å‰∏∫ËßÑËåÉ
- ËßÑËåÉ 1
- ËßÑËåÉ 2`,onInput:d[11]||(d[11]=_=>x.value=!0)},null,544),[[Ml,X.value]])])):(o(),v("div",Ya,[n("div",Xa,[e($,null,{default:t(()=>[e(Ve)]),_:1}),i(" "+p(L.value)+" ",1),n("div",qa,[ce.value?(o(),z(D,{key:0,type:"warning",size:"small"},{default:t(()=>[...d[32]||(d[32]=[i("Êú™‰øùÂ≠ò",-1)])]),_:1})):V("",!0),n("span",Ja,p(re.value.length)+" Â≠óÁ¨¶",1),e(N,{size:"small",circle:"",loading:$e.value,onClick:We,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e($,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"]),e(il,{title:"Á°ÆËÆ§Âà†Èô§ËØ•Êñá‰ª∂Ôºü",onConfirm:d[12]||(d[12]=_=>He(L.value))},{reference:t(()=>[e(N,{size:"small",circle:"",type:"danger",plain:""},{default:t(()=>[e($,null,{default:t(()=>[e(tl)]),_:1})]),_:1})]),_:1})])]),Oe(n("textarea",{"onUpdate:modelValue":d[13]||(d[13]=_=>re.value=_),class:"code-textarea",spellcheck:"false",placeholder:`ÁºñËæë ${L.value} ‚Ä¶`,onInput:d[14]||(d[14]=_=>ce.value=!0)},null,40,Ga),[[Ml,re.value]])]))])],64)):(o(),v("div",Ta,[e($,{size:"48",color:"#c0c4cc"},{default:t(()=>[e(W)]),_:1}),d[19]||(d[19]=n("p",null,"‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂºÄÂßãÁºñËæë",-1)),e(N,{type:"primary",onClick:Ue},{default:t(()=>[e($,null,{default:t(()=>[e(Y)]),_:1}),d[18]||(d[18]=i(" Êñ∞Âª∫ÊäÄËÉΩ",-1))]),_:1})]))]),n("div",{class:we(["ss-handle",{dragging:ee.value==="chat"}]),onMousedown:d[15]||(d[15]=_=>ke(_,"chat"))},[...d[33]||(d[33]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),n("div",{class:"studio-chat",style:be({width:he.value+"px"})},[n("div",Qa,[e($,null,{default:t(()=>[e(bl)]),_:1}),d[34]||(d[34]=i(" AI Âçè‰ΩúÈÖçÁΩÆ ",-1)),b.value?(o(),v("span",Za,[i(" ÂΩìÂâç: "+p(b.value.name)+" ",1),ze.value.size>1?(o(),v("span",en," ("+p(ze.value.size)+" ‰∏™Âπ∂Ë°åÁîüÊàê‰∏≠) ",1)):V("",!0)])):V("",!0)]),n("div",ln,[(o(!0),v(j,null,se(ae.value,_=>Oe((o(),z(nt,{key:_.id,ref_for:!0,ref:C=>Me(_.id,C),"agent-id":P(g),context:b.value?.id===_.id?Ze.value:"",scenario:"skill-studio","skill-id":_.id,"welcome-message":b.value?.id===_.id?ye.value:"",examples:b.value?.id===_.id?Pe.value:[],compact:"",onResponse:C=>Xe(_.id,C),onStreamingChange:C=>ve(_.id,C)},null,8,["agent-id","context","skill-id","welcome-message","examples","onResponse","onStreamingChange"])),[[ta,b.value?.id===_.id]])),128))])],4)])}}}),an=st(tn,[["__scopeId","data-v-7f01d560"]]),nn={class:"wc-layout"},sn={class:"wc-panel-header"},on={class:"wc-header-actions"},un={class:"wc-panel-body file-tree-body"},dn={key:0,class:"wc-loading"},rn={key:1,class:"wc-empty"},cn={class:"tree-icon-wrap"},vn={key:0,class:"icon-folder-open",viewBox:"0 0 16 16"},fn={key:1,class:"icon-folder",viewBox:"0 0 16 16"},pn=["onKeyup","onBlur"],mn={key:1,class:"tree-node-name"},yn=["onClick"],gn=["onClick"],_n={class:"wc-panel-header"},wn={key:0,class:"wc-panel-title file-path-title"},bn={class:"file-ext-badge"},hn=["title"],kn={key:1,class:"wc-panel-title muted"},xn={class:"wc-header-actions"},Cn={class:"wc-panel-body editor-body"},$n={key:0,class:"wc-empty-editor"},zn={key:1,class:"wc-binary-notice"},Vn={class:"editor-wrap"},Tn=["onKeydown"],Sn={class:"editor-statusbar"},In={class:"stat-chip"},Ln={key:0},Mn={key:1,class:"status-dirty"},An={key:2,class:"status-saved"},Un={class:"wc-panel wc-panel-right"},Dn={class:"session-bar"},Fn={class:"session-bar-left"},Nn={class:"session-opt"},Bn={class:"session-opt-title"},En={class:"session-opt-time"},Rn={class:"chat-area"},Pn={class:"wc-modal"},Kn={class:"wc-modal-footer"},bt=140,jn=380,Wn=900,On=tt({__name:"WorkspaceChatLayout",props:{agentId:{}},emits:["session-change"],setup(pl,{emit:Ce}){const g=pl,O=Ce,Ie={label:"name",children:"children",isLeaf:r=>!r.isDir},he=u(200),ee=u(460),ke=u(),ae=u(),oe=u(),b=u(),L=u(),T=u(),X=u([]),Le=u(!1),x=u(""),H=u(""),q=u(!1),de=u(!1),le=u(null),ie=u(!1),re=u(""),ce=u(""),$e=u(""),F=u({visible:!1,x:0,y:0,node:null}),Me=u([]),te=u();let ze=0,ve=0,me=null;const Ze=u(!1),ye=u(!1);function Pe(r){Ke(r,"left")}function ue(r){Ke(r,"right")}function Ke(r,c){ze=r.clientX,ve=c==="left"?he.value:ee.value,me=c,c==="left"?Ze.value=!0:ye.value=!0,window.addEventListener("mousemove",el),window.addEventListener("mouseup",Ae),document.body.style.cssText+="cursor:col-resize;user-select:none;"}function el(r){const c=r.clientX-ze;me==="left"?he.value=Math.max(bt,Math.min(jn,ve+c)):me==="right"&&(ee.value=Math.max(bt,Math.min(Wn,ve+c)))}function Ae(){Ze.value=!1,ye.value=!1,me=null,window.removeEventListener("mousemove",el),window.removeEventListener("mouseup",Ae),document.body.style.cursor="",document.body.style.userSelect=""}async function ge(){Le.value=!0;try{const r=await Z.readTree(g.agentId);X.value=je(r.data)}catch{X.value=[]}finally{Le.value=!1}}function je(r){return(Array.isArray(r)?r:r?.children??[]).map(S=>({name:S.name,path:S.path??S.name,isDir:!!(S.isDir??S.type==="dir"),size:S.size,children:S.children?.length?je(S.children):void 0})).sort((S,I)=>+I.isDir-+S.isDir||S.name.localeCompare(I.name))}function Q(r){F.value.visible=!1,r.isDir||He(r.path)}function We(r,c){r.preventDefault(),F.value={visible:!0,x:r.clientX,y:r.clientY,node:c}}async function He(r){q.value&&x.value&&!await Il.confirm("ÊúâÊú™‰øùÂ≠òÊõ¥ÊîπÔºåÁªßÁª≠ÂàáÊç¢Ôºü","ÊèêÁ§∫",{confirmButtonText:"ÁªßÁª≠",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)||(x.value=r,q.value=!1,fl(()=>ke.value?.setCurrentKey(r)),await ll())}async function ll(){if(x.value)try{const c=(await Z.read(g.agentId,x.value)).data;de.value=c.binary??c.encoding==="base64",de.value||(H.value=c.content??"",le.value=c.size!=null?{size:c.size,modTime:c.modTime}:null),q.value=!1}catch{H.value=""}}async function Ye(){if(!(!x.value||de.value))try{await Z.write(g.agentId,x.value,H.value),q.value=!1,y.success("Â∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}}async function ml(){if(!(!x.value||!await Il.confirm(`Âà†Èô§ ${x.value}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await Z.delete(g.agentId,x.value),x.value="",H.value="",q.value=!1,await ge(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ue(){const r=re.value.trim();if(r)try{await Z.write(g.agentId,r,""),ie.value=!1,re.value="",await ge(),await He(r)}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function Xe(r){if(await Il.confirm(`Âà†Èô§ ${r.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1))try{await Z.delete(g.agentId,r.path),x.value===r.path&&(x.value="",H.value=""),await ge(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function qe(r){ce.value=r.path,$e.value=r.name,fl(()=>L.value?.focus())}async function xe(r){if(!ce.value||$e.value===r.name){ce.value="";return}const S=(r.path.includes("/")?r.path.substring(0,r.path.lastIndexOf("/")+1):"")+$e.value;try{const I=await Z.read(g.agentId,r.path);await Z.write(g.agentId,S,I.data?.content??""),await Z.delete(g.agentId,r.path),x.value===r.path&&(x.value=S),await ge(),y.success("Â∑≤ÈáçÂëΩÂêç")}catch{y.error("ÈáçÂëΩÂêçÂ§±Ë¥•")}ce.value=""}function De(){F.value.visible=!1,ie.value=!0}function m(){F.value.visible=!1,ie.value=!0}function d(){const r=F.value.node;F.value.visible=!1,r&&qe(r)}async function U(){const r=F.value.node;if(F.value.visible=!1,!(!r||!await Il.confirm(`Âà†Èô§ ${r.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await Z.delete(g.agentId,r.path),x.value===r.path&&(x.value="",H.value=""),await ge(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function $(){F.value.visible&&(F.value.visible=!1)}async function N(){try{const r=await ht.list({agentId:g.agentId,limit:50});Me.value=(r.data?.sessions||[]).sort((c,S)=>S.lastAt-c.lastAt)}catch{Me.value=[]}}function Y(r){te.value=r||void 0,r?T.value?.resumeSession(r):T.value?.startNewSession()}function M(){te.value=void 0,T.value?.startNewSession()}function D(r){te.value=r,O("session-change",r),N()}async function Fe(){await ge(),x.value&&(await new Promise(r=>setTimeout(r,300)),await ll())}const W=sl(()=>(H.value.match(/\n/g)??[]).length+1),yl=sl(()=>x.value?`Áî®Êà∑ÂΩìÂâçÊâìÂºÄÁöÑÊñá‰ª∂: ${x.value}`:void 0);function gl(r){const c=ae.value,S=c.selectionStart;H.value=c.value.slice(0,S)+"  "+c.value.slice(c.selectionEnd),fl(()=>{c.selectionStart=c.selectionEnd=S+2})}function ol(){oe.value&&ae.value&&(oe.value.scrollTop=ae.value.scrollTop)}Ll(ie,async r=>{r&&(await fl(),b.value?.focus())});function tl(r){const c=r.split(".").pop()?.toLowerCase();return c?`.${c}`:"txt"}function il(r){return r?r<1024?`${r}B`:r<1048576?`${(r/1024).toFixed(0)}K`:`${(r/1048576).toFixed(1)}M`:""}function al(r){return il(r)??""}function Ve(r){const c=r.split(".").pop()?.toLowerCase()??"";return{ts:"fc-blue",tsx:"fc-blue",js:"fc-yellow",jsx:"fc-yellow",vue:"fc-green",py:"fc-blue",go:"fc-teal",rs:"fc-orange",md:"fc-gray",json:"fc-yellow",yaml:"fc-red",yml:"fc-red",toml:"fc-gray",html:"fc-orange",css:"fc-blue",scss:"fc-pink",sh:"fc-green",bash:"fc-green",sql:"fc-orange",png:"fc-purple",jpg:"fc-purple",jpeg:"fc-purple",gif:"fc-purple",svg:"fc-purple",webp:"fc-purple",env:"fc-yellow",gitignore:"fc-gray",dockerfile:"fc-teal"}[c]??"fc-default"}function Te(r){if(!r)return"";const c=new Date(r),I=Date.now()-r;return I<6e4?"ÂàöÂàö":I<36e5?`${Math.floor(I/6e4)}ÂàÜÈíüÂâç`:I<864e5?`${Math.floor(I/36e5)}Â∞èÊó∂Ââç`:c.toLocaleDateString()}return at(()=>{ge(),N(),document.addEventListener("click",$)}),aa(()=>{Ae(),document.removeEventListener("click",$)}),(r,c)=>{const S=w("el-tooltip"),I=w("el-icon"),_l=w("el-tree"),wl=w("el-tag"),bl=w("el-option"),_=w("el-select");return o(),v("div",nn,[n("div",{class:"wc-panel wc-panel-left",style:be({width:he.value+"px"})},[n("div",sn,[c[12]||(c[12]=n("span",{class:"wc-panel-title"},"üìÅ Â∑•‰ΩúÂå∫Êñá‰ª∂",-1)),n("div",on,[e(S,{content:"Êñ∞Âª∫Êñá‰ª∂",placement:"top","show-after":500},{default:t(()=>[n("button",{class:"wc-icon-btn",onClick:c[0]||(c[0]=C=>ie.value=!0)},"Ôºã")]),_:1}),e(S,{content:"Âà∑Êñ∞",placement:"top","show-after":500},{default:t(()=>[n("button",{class:"wc-icon-btn",onClick:ge},"‚Ü∫")]),_:1})])]),n("div",un,[Le.value?(o(),v("div",dn,[e(I,{class:"rotating"},{default:t(()=>[e(P(na))]),_:1}),c[13]||(c[13]=i(" Âä†ËΩΩ‰∏≠‚Ä¶ ",-1))])):X.value.length?(o(),z(_l,{key:2,ref_key:"treeRef",ref:ke,data:X.value,props:Ie,"highlight-current":!0,"expand-on-click-node":!0,"default-expand-all":!1,"node-key":"path",class:"wc-file-tree",onNodeClick:Q,onNodeContextmenu:We},{default:t(({node:C,data:fe})=>[n("span",{class:we(["tree-node",{active:fe.path===x.value}])},[n("span",cn,[fe.isDir&&C.expanded?(o(),v("svg",vn,[...c[14]||(c[14]=[n("path",{d:"M1.5 3A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H7.914a.5.5 0 0 1-.354-.146L6.146 2.94A1.5 1.5 0 0 0 5.086 2.5H1.5z"},null,-1)])])):fe.isDir?(o(),v("svg",fn,[...c[15]||(c[15]=[n("path",{d:"M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31z"},null,-1)])])):(o(),v("svg",{key:2,class:we(["icon-file",Ve(fe.name)]),viewBox:"0 0 16 16"},[...c[16]||(c[16]=[n("path",{"fill-rule":"evenodd",d:"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3z"},null,-1)])],2))]),ce.value===fe.path?Oe((o(),v("input",{key:0,"onUpdate:modelValue":c[1]||(c[1]=_e=>$e.value=_e),class:"tree-rename-input",onKeyup:[Qe(_e=>xe(fe),["enter"]),c[2]||(c[2]=Qe(_e=>ce.value="",["escape"]))],onBlur:_e=>xe(fe),onClick:c[3]||(c[3]=Ge(()=>{},["stop"])),ref_key:"renameInputRef",ref:L},null,40,pn)),[[Ml,$e.value]]):(o(),v("span",mn,p(fe.name),1)),n("span",{class:"tree-node-actions",onClick:c[4]||(c[4]=Ge(()=>{},["stop"]))},[n("button",{class:"tree-act-btn",title:"ÈáçÂëΩÂêç",onClick:_e=>qe(fe)},[...c[17]||(c[17]=[n("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[n("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"})],-1)])],8,yn),n("button",{class:"tree-act-btn danger",title:"Âà†Èô§",onClick:_e=>Xe(fe)},[...c[18]||(c[18]=[n("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[n("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),n("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1)])],8,gn)])],2)]),_:1},8,["data"])):(o(),v("div",rn,"Â∑•‰ΩúÂå∫‰∏∫Á©∫"))]),(o(),z(gt,{to:"body"},[F.value.visible?(o(),v("div",{key:0,class:"ctx-menu",style:be({left:F.value.x+"px",top:F.value.y+"px"}),onMouseleave:c[5]||(c[5]=C=>F.value.visible=!1)},[n("div",{class:"ctx-item",onClick:De},"üìÑ Êñ∞Âª∫Êñá‰ª∂"),n("div",{class:"ctx-item",onClick:m},"üìÅ Êñ∞Âª∫Êñá‰ª∂Â§π"),F.value.node&&!F.value.node.isDir?(o(),v("div",{key:0,class:"ctx-item",onClick:d},"‚úé ÈáçÂëΩÂêç")):V("",!0),c[19]||(c[19]=n("div",{class:"ctx-divider"},null,-1)),n("div",{class:"ctx-item danger",onClick:U},"‚úï Âà†Èô§")],36)):V("",!0)]))],4),n("div",{class:we(["wc-handle",{dragging:Ze.value}]),onMousedown:Pe},[...c[20]||(c[20]=[n("div",{class:"wc-handle-bar"},null,-1)])],34),n("div",{class:"wc-panel wc-panel-mid",style:be({width:ee.value+"px"})},[n("div",_n,[x.value?(o(),v("span",wn,[n("span",bn,p(tl(x.value)),1),n("span",{class:"file-path-text",title:x.value},p(x.value),9,hn)])):(o(),v("span",kn,"ÈÄâÊã©Êñá‰ª∂Êü•Áúã")),n("div",xn,[q.value?(o(),z(wl,{key:0,size:"small",type:"warning",style:{"margin-right":"4px"}},{default:t(()=>[...c[21]||(c[21]=[i("Êú™‰øùÂ≠ò",-1)])]),_:1})):V("",!0),x.value&&q.value?(o(),v("button",{key:1,class:"wc-save-btn",onClick:Ye},"‰øùÂ≠ò")):V("",!0),x.value?(o(),v("button",{key:2,class:"wc-icon-btn",title:"Âà∑Êñ∞",onClick:ll},"‚Ü∫")):V("",!0),x.value?(o(),v("button",{key:3,class:"wc-icon-btn danger",title:"Âà†Èô§Êñá‰ª∂",onClick:ml},"‚úï")):V("",!0)])]),n("div",Cn,[x.value?de.value?(o(),v("div",zn,"‚õî ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÊó†Ê≥ïÁºñËæë")):(o(),v(j,{key:2},[n("div",Vn,[n("div",{class:"line-numbers",ref_key:"lineNumRef",ref:oe},[(o(!0),v(j,null,se(W.value,C=>(o(),v("div",{key:C,class:"line-num"},p(C),1))),128))],512),Oe(n("textarea",{ref_key:"editorRef",ref:ae,"onUpdate:modelValue":c[6]||(c[6]=C=>H.value=C),class:"code-editor",spellcheck:"false",autocorrect:"off",autocapitalize:"off",onInput:c[7]||(c[7]=C=>{q.value=!0,ol()}),onScroll:ol,onKeydown:[Qe(Ge(gl,["prevent"]),["tab"]),Qe(Ge(Ye,["ctrl","prevent"]),["s"]),Qe(Ge(Ye,["meta","prevent"]),["s"])]},null,40,Tn),[[Ml,H.value]])]),n("div",Sn,[n("span",In,p(tl(x.value)),1),n("span",null,p(W.value)+" Ë°å",1),n("span",null,p(H.value.length)+" Â≠óÁ¨¶",1),le.value?(o(),v("span",Ln,p(al(le.value.size)),1)):V("",!0),c[23]||(c[23]=n("span",{class:"stat-flex"},null,-1)),q.value?(o(),v("span",Mn,"‚óè Êú™‰øùÂ≠ò")):(o(),v("span",An,"‚úì Â∑≤‰øùÂ≠ò"))])],64)):(o(),v("div",$n,[...c[22]||(c[22]=[n("div",{class:"wc-empty-icon"},"‚úèÔ∏è",-1),n("div",null,"‰ªéÂ∑¶‰æßÈÄâÊã©Êñá‰ª∂",-1),n("div",{class:"wc-empty-hint"},"ÊîØÊåÅÊãñÊãΩÊñá‰ª∂Âà∞Âè≥‰æßËÅäÂ§©Ê°Ü",-1)])]))])],4),n("div",{class:we(["wc-handle",{dragging:ye.value}]),onMousedown:ue},[...c[24]||(c[24]=[n("div",{class:"wc-handle-bar"},null,-1)])],34),n("div",Un,[n("div",Dn,[n("div",Fn,[e(I,{style:{color:"#64748b","font-size":"13px"}},{default:t(()=>[e(P(sa))]),_:1}),e(_,{modelValue:te.value,"onUpdate:modelValue":c[8]||(c[8]=C=>te.value=C),placeholder:"Êñ∞ÂØπËØù",size:"small",clearable:"",class:"session-select",onChange:Y},{default:t(()=>[(o(!0),v(j,null,se(Me.value,C=>(o(),z(bl,{key:C.id,value:C.id,label:C.title||"ÂØπËØù "+C.id.slice(0,8)},{default:t(()=>[n("div",Nn,[n("span",Bn,p(C.title||"Êó†Ê†áÈ¢ò"),1),n("span",En,p(Te(C.lastAt)),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),n("button",{class:"session-new-btn",title:"Êñ∞Âª∫ÂØπËØù",onClick:M},"Ôºã Êñ∞ÂØπËØù")]),n("div",Rn,[e(nt,{"agent-id":pl.agentId,"session-id":te.value||void 0,context:yl.value,height:"100%",ref_key:"chatRef",ref:T,onResponse:Fe,onSessionChange:D},null,8,["agent-id","session-id","context"])])]),(o(),z(gt,{to:"body"},[ie.value?(o(),v("div",{key:0,class:"wc-modal-mask",onClick:c[11]||(c[11]=Ge(C=>ie.value=!1,["self"]))},[n("div",Pn,[c[25]||(c[25]=n("div",{class:"wc-modal-title"},"Êñ∞Âª∫Êñá‰ª∂",-1)),Oe(n("input",{"onUpdate:modelValue":c[9]||(c[9]=C=>re.value=C),class:"wc-modal-input",placeholder:"Â¶Ç notes.md Êàñ scripts/run.sh",onKeyup:Qe(Ue,["enter"]),ref_key:"newFileInput",ref:b},null,544),[[Ml,re.value]]),n("div",Kn,[n("button",{class:"wc-btn",onClick:c[10]||(c[10]=C=>ie.value=!1)},"ÂèñÊ∂à"),n("button",{class:"wc-btn primary",onClick:Ue},"ÂàõÂª∫")])])])):V("",!0)]))])}}}),Hn=st(On,[["__scopeId","data-v-945cea34"]]),Yn={class:"header-left"},Xn={class:"detail-title-block"},qn={class:"detail-title"},Jn={class:"chat-layout"},Gn={width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",style:{"flex-shrink":"0"}},Qn={class:"session-count-badge"},Zn={class:"session-sidebar-header"},es={class:"session-list"},ls=["onClick"],ts={class:"session-item-title"},as={class:"session-item-meta"},ns={key:0,class:"session-empty"},ss={class:"at-panel"},os={key:0,class:"at-form"},is={class:"chat-area"},us={style:{display:"flex","flex-direction":"column",gap:"8px"}},ds={style:{display:"flex","align-items":"center",gap:"10px"}},rs={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},cs={style:{display:"flex","align-items":"center",gap:"6px"}},vs={style:{color:"#bbb","font-size":"12px"}},fs={style:{display:"flex","align-items":"center",gap:"8px"}},ps={style:{"font-weight":"600"}},ms={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},ys={style:{display:"flex","align-items":"center",gap:"8px"}},gs={style:{"font-size":"13px"}},_s={style:{"font-size":"13px",color:"#606266"}},ws={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},bs={key:1,class:"relations-list"},hs={class:"relation-info"},ks={class:"relation-name"},xs={class:"relation-tags"},Cs={class:"relation-desc"},$s={style:{display:"flex","align-items":"center","justify-content":"space-between"}},zs={style:{display:"flex",gap:"8px","margin-top":"4px"}},Vs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ts={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},Ss={style:{"font-size":"12px"}},Is={style:{"font-size":"12px",color:"#606266"}},Ls={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},Ms={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},As={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Us={style:{"margin-bottom":"16px",display:"flex","align-items":"center",gap:"8px"}},Ds={class:"conv-drawer-body"},Fs={key:0,style:{"text-align":"center","margin-bottom":"12px"}},Ns={class:"conv-msg-list"},Bs={class:"conv-msg-meta"},Es={class:"conv-msg-role"},Rs={key:0,class:"conv-msg-sender"},Ps={class:"conv-msg-time"},Ks={class:"conv-msg-content"},js={key:0,class:"conv-msg-empty"},Ws={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Os={class:"channel-card-header"},Hs={class:"channel-card-left"},Ys={class:"channel-card-name"},Xs={key:0,class:"channel-bot-username"},qs={class:"channel-card-actions"},Js={key:0,class:"channel-card-body"},Gs={class:"channel-info-row"},Qs={class:"channel-info-value"},Zs={class:"channel-info-row"},eo={class:"channel-info-value"},lo={key:1,class:"channel-card-body"},to={class:"channel-info-row"},ao={class:"channel-info-value"},no={style:{opacity:"0.6","font-size":"11px","margin-left":"3px"}},so={class:"pending-section"},oo=["onClick"],io={key:0,class:"pending-list"},uo={key:0,style:{"text-align":"center",padding:"12px"}},ro={class:"pending-user-info"},co={class:"pending-user-name"},vo={key:0,class:"pending-user-username"},fo={class:"pending-user-id"},po={class:"pending-user-actions"},mo={key:2,class:"pending-empty"},yo={style:{width:"100%"}},go={style:{display:"flex",gap:"6px","align-items":"center"}},_o={key:0,style:{"margin-top":"6px",display:"flex","align-items":"center",gap:"6px",color:"#909399","font-size":"13px"}},wo={key:1,style:{"margin-top":"6px",color:"#67c23a","font-size":"13px"}},bo={key:2,style:{"margin-top":"6px",color:"#e6a23c","font-size":"13px"}},ho={key:3,style:{"margin-top":"6px",color:"#f56c6c","font-size":"13px"}},ko={key:4,style:{"margin-top":"4px"}},xo={class:"channel-url-preview"},Co={class:"channel-url-text"},$o={class:"channel-url-preview"},zo={class:"channel-url-text"},Vo={style:{padding:"20px","max-width":"800px"}},To={class:"env-add-row",style:{display:"flex",gap:"8px","margin-bottom":"16px","align-items":"flex-start"}},So={style:{"font-size":"13px"}},Io=50,Lo=tt({__name:"AgentDetailView",setup(pl){const Ce=ia(),g=Ce.params.id,O=u(null),Ie=u("chat"),he=u(!1),ee=u(),ke=u([]),ae=u(!1),oe=u();async function b(){ae.value=!0;try{const s=await ht.list({agentId:g,limit:50});ke.value=s.data.sessions}catch{}finally{ae.value=!1}}function L(s){oe.value=s.id,ee.value?.resumeSession(s.id)}function T(){oe.value=void 0,ee.value?.startNewSession()}function X(s){oe.value=s,localStorage.setItem(`zyhive_session_${g}`,s),setTimeout(b,500)}function Le(s){if(!s)return"";const l=Date.now()-s;return l<6e4?"ÂàöÂàö":l<36e5?`${Math.floor(l/6e4)}ÂàÜÂâç`:l<864e5?`${Math.floor(l/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(l/864e5)}Â§©Ââç`}const x=u(!1),H=u(""),q=u(""),de=u(!1),le=u([]);function ie(){x.value=!x.value,x.value&&!le.value.length&&re()}async function re(){try{const s=await Vl.list();le.value=s.data.filter(l=>l.id!==g)}catch{le.value=[]}}function ce(s){const l=le.value.find(f=>f.id===s);l&&ee.value?.fillInput(`@${l.name}: `)}async function $e(){const s=H.value,l=q.value.trim();if(!s||!l)return;const A=le.value.find(nl=>nl.id===s)?.name??s;de.value=!0;const B={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${A}Ôºö
${l}`};ee.value?.appendMessage(B);try{const E=(await Vl.message(s,l,g)).data.response,Be={role:"assistant",text:`‚Üê **${A}** ÂõûÂ§çÔºö

${E}`};ee.value?.appendMessage(Be),q.value="",H.value="",x.value=!1,y.success(`${A} Â∑≤ÂõûÂ§ç`)}catch(nl){const E={role:"system",text:`[Â§±Ë¥•] ËΩ¨ÂèëÂ§±Ë¥•Ôºö${nl.response?.data?.error??nl.message??"ÁΩëÁªúÈîôËØØ"}`};ee.value?.appendMessage(E),y.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{de.value=!1}}const F=u(""),Me=u(""),te=u([]),ze=u(!1),ve=u(""),me=u(!1),Ze=sl(()=>{const s=te.value.find(l=>l.id===ve.value);return s?s.supportsTools===!1:!1}),ye=u([]),Pe=u(""),ue=u(""),Ke=u(!1);function el(){const s=O.value?.env||{};ye.value=Object.entries(s).map(([l,f])=>({key:l,value:f}))}function Ae(){const s=Pe.value.trim();if(!s)return;const l=ye.value.findIndex(f=>f.key===s);l>=0?ye.value[l].value=ue.value:ye.value.push({key:s,value:ue.value}),Pe.value="",ue.value=""}function ge(s){ye.value.splice(s,1)}async function je(){Ke.value=!0;try{const s={};for(const{key:f,value:A}of ye.value)f.trim()&&(s[f.trim()]=A);const l=await Vl.update(g,{env:s});O.value=l.data,y.success("ÁéØÂ¢ÉÂèòÈáèÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ke.value=!1}}const Q=u({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),We=u(!1),He=u(!1);async function ll(){try{const s=await El.getConfig(g);Q.value=s.data,qe()}catch{}}async function Ye(){We.value=!0;try{const s=await El.setConfig(g,Q.value);Q.value=s.data,y.success(Q.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{We.value=!1}}async function ml(){He.value=!0;try{await El.consolidate(g),y.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(qe,1e4)}catch{y.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{He.value=!1}}const Ue=u([]),Xe=u(!1);async function qe(){Xe.value=!0;try{const s=await El.runLog(g);Ue.value=s.data||[]}catch{Ue.value=[]}finally{Xe.value=!1}}const xe=u([]),De=u(""),m=u(""),d=u(!1),U=u([]),$=u(!1),N=u(""),Y=u(!1),M=u(""),D=u([]),Fe=u(!1),W=u({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function yl(){try{const s=await _t.get(g);D.value=s.data.parsed||[]}catch{D.value=[]}}function gl(s){const l=le.value.find(f=>f.id===s);W.value.agentName=l?l.name:s}async function ol(){if(!W.value.agentId)return;if(D.value.find(l=>l.agentId===W.value.agentId)){y.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}D.value.push({...W.value}),W.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await al()}async function tl(s){D.value.splice(s,1),await al()}function il(){if(D.value.length===0)return"";const s=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,l=D.value.map(f=>`| ${f.agentId} | ${f.agentName} | ${f.relationType} | ${f.strength} | ${f.desc||""} |`).join(`
`);return s+`
`+l}async function al(){Fe.value=!0;try{await _t.put(g,il()),y.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Fe.value=!1}}function Ve(s){const l=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let f=0;for(let A=0;A<s.length;A++)f=s.charCodeAt(A)+((f<<5)-f);return l[Math.abs(f)%l.length]??"#409EFF"}function Te(s){return s==="‰∏äÁ∫ß"?"danger":s==="‰∏ãÁ∫ß"?"":s==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function r(s){return s==="Ê†∏ÂøÉ"?"danger":s==="Â∏∏Áî®"?"warning":"info"}const c=u([]),S=u(!1),I=u({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function _l(s){return s==="running"?"success":s==="stopped"?"danger":"info"}function wl(s){return s==="running"?"ËøêË°å‰∏≠":s==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function bl(s){return s?s<1024?s+" B":s<1048576?(s/1024).toFixed(1)+" KB":(s/1048576).toFixed(1)+" MB":"0 B"}function _(s){return s?new Date(s).toLocaleString():""}const C=u([]),fe=u(!1),_e=u(!1),Ne=u(""),Al=u(""),Pl=u(!1),Kl=u(""),h=u({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""}),K=u({loading:!1,status:""});let jl=null;function Wl(s){return/^\*+$/.test(s)}async function ot(){const s=h.value.botToken;if(!(!s||Wl(s))){K.value={loading:!0,status:""};try{const f=(await Se.checkToken(g,s)).data;f.duplicate?K.value={loading:!1,status:"duplicate",usedBy:f.usedBy,usedByCh:f.usedByCh}:f.valid?(K.value={loading:!1,status:"ok",botName:f.botName},!h.value.name&&f.botName&&(h.value.name=f.botName)):K.value={loading:!1,status:"error",error:f.error||"Token Êó†Êïà"}}catch{K.value={loading:!1,status:"error",error:"ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï"}}}}Ll(()=>h.value.type,s=>{Ne.value||(Al.value=Ol(s))}),Ll(()=>h.value.botToken,s=>{K.value={loading:!1,status:""},jl&&clearTimeout(jl),!(!s||Wl(s)||s.length<20||!s.includes(":"))&&(jl=setTimeout(ot,800))});function ul(s,l){return l?`${window.location.origin}/chat/${s}/${l}`:`${window.location.origin}/chat/${s}`}function it(s){navigator.clipboard.writeText(s).then(()=>y.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function dl(){fe.value=!0;try{const s=await Se.list(g);C.value=s.data||[]}catch{C.value=[]}finally{fe.value=!1}}function Ol(s){return s+"-"+Date.now().toString(36)}function kt(){Ne.value="";const s=O.value?.name||"";Al.value=Ol("telegram"),h.value={type:"telegram",name:s,enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},K.value={loading:!1,status:""},_e.value=!0}function xt(s){Ne.value=s.id,h.value={type:s.type,name:s.name,enabled:s.enabled,botToken:s.config?.botToken||"",allowedFrom:s.config?.allowedFrom||"",webPassword:"",webWelcome:s.config?.welcomeMsg||"",webTitle:s.config?.title||""},K.value={loading:!1,status:""},_e.value=!0}async function Ct(){if(!h.value.name||!h.value.type){y.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}if(K.value.status==="duplicate"){y.error(`Bot Token Â∑≤Ë¢´ÊàêÂëò„Äå${K.value.usedBy}„Äç‰ΩøÁî®ÔºåËØ∑Êõ¥Êç¢`);return}Pl.value=!0;try{const s={};if(h.value.type==="telegram"?(h.value.botToken&&(s.botToken=h.value.botToken),h.value.allowedFrom&&(s.allowedFrom=h.value.allowedFrom)):h.value.type==="web"&&(h.value.webPassword&&(s.password=h.value.webPassword),h.value.webWelcome&&(s.welcomeMsg=h.value.webWelcome),h.value.webTitle&&(s.title=h.value.webTitle)),Ne.value){const l=C.value.map(f=>f.id!==Ne.value?f:{...f,name:h.value.name,type:h.value.type,enabled:h.value.enabled,config:{...f.config,...s}});await Se.set(g,l)}else{const l={id:Al.value||Ol(h.value.type),name:h.value.name,type:h.value.type,enabled:h.value.enabled,config:s,status:"untested"};await Se.set(g,[...C.value,l])}y.success(h.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),_e.value=!1,await dl()}catch(s){y.error(s.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Pl.value=!1}}async function $t(){try{await Se.set(g,C.value)}catch(s){y.error(s.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•"),await dl()}}async function zt(s){const l=C.value.filter(f=>f.id!==s.id);try{await Se.set(g,l),C.value=l,y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Vt(s){Kl.value=s.id;try{const l=await Se.test(g,s.id);l.data.valid?y.success(l.data.botName?`ÊµãËØïÊàêÂäü (@${l.data.botName})`:"ÊµãËØïÊàêÂäü"):y.error(l.data.error||"ÊµãËØïÂ§±Ë¥•"),await dl()}catch{y.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{Kl.value=""}}const rl=u({}),Hl=u({}),hl=u(""),Yl=u("");async function Ul(s){Hl.value[s]=!0;try{const l=await Se.listPending(g,s);rl.value[s]=l.data||[]}catch{rl.value[s]=[]}finally{Hl.value[s]=!1}}function Tt(s){hl.value===s?hl.value="":(hl.value=s,Ul(s))}async function St(s,l){Yl.value=`${s}-${l}`;try{await Se.allowUser(g,s,l),y.success(`Áî®Êà∑ ${l} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Ul(s),await dl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}finally{Yl.value=""}}async function It(s,l){try{await Se.dismissUser(g,s,l),y.success("Â∑≤ÂøΩÁï•"),await Ul(s)}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function ut(s,l){try{await Il.confirm(`Á°ÆÂÆöÂ∞ÜÁî®Êà∑ ${l} ‰ªéÁôΩÂêçÂçï‰∏≠ÁßªÈô§ÔºüÁßªÈô§ÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®Ê≠§ Bot„ÄÇ`,"ÁßªÈô§ÁôΩÂêçÂçï",{confirmButtonText:"Á°ÆËÆ§ÁßªÈô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"})}catch{return}try{await Se.removeAllowed(g,s,l),y.success(`Áî®Êà∑ ${l} Â∑≤‰ªéÁôΩÂêçÂçïÁßªÈô§`),await dl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}at(async()=>{try{const B=await Vl.get(g);O.value=B.data}catch{y.error("Âä†ËΩΩ Agent Â§±Ë¥•")}Lt(),Mt(),yl(),re(),ll(),Dl(),dl(),el(),await b();const s=Ce.query.tab;s&&(Ie.value=s);const l=Ce.query.resumeSession,f=l?null:localStorage.getItem(`zyhive_session_${g}`),A=l||f||null;A&&(oe.value=A,await new Promise(B=>setTimeout(B,100)),ee.value?.resumeSession(A),ke.value.find(B=>B.id===A)||(oe.value=A))});async function Lt(){try{const[s,l]=await Promise.all([Z.read(g,"IDENTITY.md"),Z.read(g,"SOUL.md")]);F.value=s.data?.content||"",Me.value=l.data?.content||""}catch{}kl()}async function dt(s,l){try{await Z.write(g,s,l),y.success(`${s} Â∑≤‰øùÂ≠ò`)}catch{y.error(`‰øùÂ≠ò ${s} Â§±Ë¥•`)}}async function Mt(){try{const s=await oa.list();if(te.value=s.data||[],O.value?.modelId)ve.value=O.value.modelId;else{const l=te.value.find(f=>f.provider+"/"+f.model===O.value?.model||f.id===O.value?.model);ve.value=l?.id||""}}catch{te.value=[]}finally{ze.value=!0}}async function At(){if(ve.value){me.value=!0;try{const s=await Vl.update(g,{modelId:ve.value});O.value=s.data,y.success("Ê®°ÂûãÂ∑≤Êõ¥Êñ∞")}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}finally{me.value=!1}}}async function kl(){try{const s=await Tl.tree(g);xe.value=s.data||[]}catch{xe.value=[]}}async function Ut(s){if(!s.isDir){De.value=s.path,U.value=s.path.split("/");try{const l=await Tl.readFile(g,s.path);m.value=l.data?.content||""}catch{m.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function Dt(){if(De.value){d.value=!0;try{await Tl.writeFile(g,De.value,m.value),y.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),kl()}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{d.value=!1}}}async function Ft(){const s=N.value.trim();if(!s){y.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await Tl.writeFile(g,s,`# ${s.split("/").pop()?.replace(".md","")||"New File"}

`),y.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),$.value=!1,N.value="",kl(),De.value=s,U.value=s.split("/"),m.value=`# ${s.split("/").pop()?.replace(".md","")||"New File"}

`}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function Nt(){const s=M.value.trim();if(!s){y.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await Tl.dailyLog(g,s),y.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),Y.value=!1,M.value="",kl()}catch{y.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Dl(){try{const s=await Sl.list(g);c.value=s.data||[]}catch{}}async function Bt(){try{await Sl.create({name:I.value.name,enabled:I.value.enabled,agentId:g,schedule:{kind:"cron",expr:I.value.expr,tz:I.value.tz},payload:{kind:"agentTurn",message:I.value.message},delivery:{mode:"announce"}}),y.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),S.value=!1,Dl()}catch(s){y.error(s.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Et(s){try{await Sl.update(s.id,s)}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function rt(s){try{await Sl.run(s.id),y.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(Dl,2e3)}catch{y.error("ËøêË°åÂ§±Ë¥•")}}async function Rt(s){try{await Sl.delete(s.id),y.success("Â∑≤Âà†Èô§"),Dl()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}const Fl=u(!1),Xl=u([]),ql=u(!1),Jl=u(""),Je=u([]),Gl=u(0),Nl=u(0),Pt=sl(()=>Je.value.length<Gl.value),xl=u(!1);async function ct(){Fl.value=!0;try{const s=await wt.list(g);Xl.value=s.data}catch{y.error("Âä†ËΩΩÂØπËØùÊ∏†ÈÅìÂ§±Ë¥•")}finally{Fl.value=!1}}async function Kt(s){Jl.value=s.channelId,Je.value=[],Gl.value=0,Nl.value=0,ql.value=!0,await vt()}async function vt(){xl.value=!0;try{const l=(await wt.messages(g,Jl.value,{limit:Io,offset:Nl.value})).data;Gl.value=l.total,Nl.value===0?Je.value=l.messages:Je.value=[...l.messages,...Je.value],Nl.value+=l.messages.length}catch{y.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•")}finally{xl.value=!1}}async function jt(){await vt()}return Ll(Ie,s=>{s==="convlogs"&&Xl.value.length===0&&ct()}),(s,l)=>{const f=w("el-button"),A=w("el-text"),B=w("el-tag"),nl=w("el-header"),E=w("el-option"),Be=w("el-select"),J=w("el-input"),Ee=w("el-tab-pane"),Wt=w("el-alert"),R=w("el-form-item"),cl=w("el-form"),Re=w("el-card"),pe=w("el-col"),vl=w("el-row"),ft=w("el-badge"),G=w("el-table-column"),Cl=w("el-table"),$l=w("el-switch"),Ot=w("el-input-number"),ne=w("el-icon"),Ht=w("el-tree"),Ql=w("el-empty"),pt=w("el-breadcrumb-item"),Yt=w("el-breadcrumb"),Bl=w("el-dialog"),Xt=w("el-drawer"),qt=w("el-link"),Jt=w("CircleCheck"),Gt=w("Warning"),Qt=w("CircleClose"),mt=w("InfoFilled"),yt=w("Link"),Zt=w("el-tabs"),ea=w("el-main"),la=w("el-container"),Zl=fa("loading");return o(),z(la,{class:"agent-detail"},{default:t(()=>[e(nl,{class:"detail-header"},{default:t(()=>[n("div",Yn,[e(f,{icon:P(ua),onClick:l[0]||(l[0]=a=>s.$router.push("/agents")),circle:"",size:"small"},null,8,["icon"]),n("div",Xn,[n("h2",qn,p(O.value?.name||"..."),1),e(A,{type:"info",class:"detail-model-mobile"},{default:t(()=>[i(p(O.value?.model),1)]),_:1})]),e(B,{type:_l(O.value?.status),size:"small"},{default:t(()=>[i(p(wl(O.value?.status)),1)]),_:1},8,["type"])]),e(A,{type:"info",class:"detail-model-desktop"},{default:t(()=>[i(p(O.value?.model),1)]),_:1})]),_:1}),e(ea,null,{default:t(()=>[e(Zt,{modelValue:Ie.value,"onUpdate:modelValue":l[48]||(l[48]=a=>Ie.value=a),type:"border-card"},{default:t(()=>[e(Ee,{label:"ÂØπËØù",name:"chat"},{default:t(()=>[n("div",Jn,[n("button",{class:"mobile-session-toggle",onClick:l[1]||(l[1]=a=>he.value=!he.value)},[(o(),v("svg",Gn,[...l[49]||(l[49]=[n("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},null,-1)])])),l[51]||(l[51]=i(" ÂéÜÂè≤ÂØπËØù ",-1)),n("span",Qn,p(ke.value.length),1),(o(),v("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",style:be([{"margin-left":"auto"},{transform:he.value?"rotate(180deg)":""}])},[...l[50]||(l[50]=[n("path",{d:"M7 10l5 5 5-5z"},null,-1)])],4))]),n("div",{class:we(["session-sidebar",{"mobile-session-open":he.value}])},[n("div",Zn,[l[53]||(l[53]=n("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),e(f,{size:"small",type:"primary",plain:"",onClick:T,icon:P(Rl)},{default:t(()=>[...l[52]||(l[52]=[i("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),Oe((o(),v("div",es,[(o(!0),v(j,null,se(ke.value,a=>(o(),v("div",{key:a.id,class:we(["session-item",{active:oe.value===a.id}]),onClick:k=>L(a)},[n("div",ts,p(a.title||"Êñ∞ÂØπËØù"),1),n("div",as,[n("span",null,p(Le(a.lastAt)),1),e(B,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[i(p(a.messageCount)+" Êù° ",1)]),_:2},1024),a.tokenEstimate>6e4?(o(),z(B,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[i("~"+p(Math.round(a.tokenEstimate/1e3))+"k",1)]),_:2},1024)):V("",!0)])],10,ls))),128)),!ae.value&&!ke.value.length?(o(),v("div",ns," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):V("",!0)])),[[Zl,ae.value]]),n("div",ss,[e(f,{size:"small",plain:"",class:"at-toggle-btn",onClick:ie},{default:t(()=>[...l[54]||(l[54]=[n("span",{class:"at-icon"},"@",-1),i(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),x.value?(o(),v("div",os,[e(Be,{modelValue:H.value,"onUpdate:modelValue":l[2]||(l[2]=a=>H.value=a),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:ce},{default:t(()=>[(o(!0),v(j,null,se(le.value,a=>(o(),z(E,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(J,{modelValue:q.value,"onUpdate:modelValue":l[3]||(l[3]=a=>q.value=a),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),e(f,{type:"primary",size:"small",style:{width:"100%"},loading:de.value,disabled:!H.value||!q.value.trim(),onClick:$e},{default:t(()=>[...l[55]||(l[55]=[i(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):V("",!0)])],2),n("div",is,[e(nt,{ref_key:"aiChatRef",ref:ee,"agent-id":P(g),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${O.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,"no-model":ze.value&&te.value.length===0,onSessionChange:X},null,8,["agent-id","welcome-message","no-model"])])])]),_:1}),e(Ee,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:t(()=>[e(Hn,{"agent-id":P(g),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Ee,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:t(()=>[e(Re,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[56]||(l[56]=[n("span",{style:{"font-weight":"600"}},"Âü∫Êú¨ËÆæÁΩÆ",-1)])]),default:t(()=>[e(cl,{"label-width":"80px",size:"default"},{default:t(()=>[e(R,{label:"‰ΩøÁî®Ê®°Âûã"},{default:t(()=>[n("div",us,[n("div",ds,[e(Be,{modelValue:ve.value,"onUpdate:modelValue":l[4]||(l[4]=a=>ve.value=a),placeholder:"ÈÄâÊã©Ê®°Âûã",style:{width:"300px"}},{default:t(()=>[(o(!0),v(j,null,se(te.value,a=>(o(),z(E,{key:a.id,label:a.name||a.model,value:a.id},{default:t(()=>[n("div",rs,[n("span",{style:be(a.supportsTools===!1?"color:#999":"")},p(a.name||a.model),5),n("div",cs,[a.supportsTools===!1?(o(),z(B,{key:0,size:"small",type:"warning",style:{"font-size":"10px",padding:"0 4px",height:"16px","line-height":"16px"}},{default:t(()=>[...l[57]||(l[57]=[i("Êó†Â∑•ÂÖ∑",-1)])]),_:1})):V("",!0),n("span",vs,p(a.provider),1)])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(f,{type:"primary",loading:me.value,onClick:At,disabled:!ve.value},{default:t(()=>[...l[58]||(l[58]=[i("‰øùÂ≠ò",-1)])]),_:1},8,["loading","disabled"])]),Ze.value?(o(),z(Wt,{key:0,type:"warning",closable:!1,"show-icon":"",style:{padding:"6px 12px"}},{title:t(()=>[...l[59]||(l[59]=[n("span",{style:{"font-size":"13px"}},[i(" ÂΩìÂâçÊ®°Âûã "),n("b",null,"‰∏çÊîØÊåÅÂ∑•ÂÖ∑Ë∞ÉÁî®"),i("ÔºåÊñá‰ª∂ËØªÂÜô„ÄÅ‰ª£Á†ÅÊâßË°åÁ≠âÂäüËÉΩÂ∞ÜÊó†Ê≥ï‰ΩøÁî®„ÄÇÂ¶ÇÈúÄÂÆåÊï¥ËÉΩÂäõÔºåËØ∑ÂàáÊç¢Âà∞ÊîØÊåÅÂ∑•ÂÖ∑ÁöÑÊ®°Âûã„ÄÇ ")],-1)])]),_:1})):V("",!0)])]),_:1})]),_:1})]),_:1}),e(vl,{gutter:20},{default:t(()=>[e(pe,{xs:24,sm:12},{default:t(()=>[e(Re,{header:"IDENTITY.md",style:{"margin-bottom":"16px"}},{default:t(()=>[e(J,{modelValue:F.value,"onUpdate:modelValue":l[5]||(l[5]=a=>F.value=a),type:"textarea",rows:15,onBlur:l[6]||(l[6]=a=>dt("IDENTITY.md",F.value))},null,8,["modelValue"])]),_:1})]),_:1}),e(pe,{xs:24,sm:12},{default:t(()=>[e(Re,{header:"SOUL.md"},{default:t(()=>[e(J,{modelValue:Me.value,"onUpdate:modelValue":l[7]||(l[7]=a=>Me.value=a),type:"textarea",rows:15,onBlur:l[8]||(l[8]=a=>dt("SOUL.md",Me.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ee,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:t(()=>[e(vl,{gutter:20},{default:t(()=>[e(pe,{span:14},{default:t(()=>[e(Re,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[60]||(l[60]=[n("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:t(()=>[e(cl,{model:W.value,"label-position":"top",size:"default"},{default:t(()=>[e(vl,{gutter:12},{default:t(()=>[e(pe,{span:10},{default:t(()=>[e(R,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:t(()=>[e(Be,{modelValue:W.value.agentId,"onUpdate:modelValue":l[9]||(l[9]=a=>W.value.agentId=a),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:gl},{default:t(()=>[(o(!0),v(j,null,se(le.value,a=>(o(),z(E,{key:a.id,label:a.name,value:a.id},{default:t(()=>[n("div",fs,[n("div",{style:be([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:Ve(a.id)}])},p(a.name.charAt(0)),5),n("span",null,p(a.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(pe,{span:7},{default:t(()=>[e(R,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:t(()=>[e(Be,{modelValue:W.value.relationType,"onUpdate:modelValue":l[10]||(l[10]=a=>W.value.relationType=a),style:{width:"100%"}},{default:t(()=>[e(E,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),e(E,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),e(E,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),e(E,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(pe,{span:7},{default:t(()=>[e(R,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:t(()=>[e(Be,{modelValue:W.value.strength,"onUpdate:modelValue":l[11]||(l[11]=a=>W.value.strength=a),style:{width:"100%"}},{default:t(()=>[e(E,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),e(E,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),e(E,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(vl,{gutter:12},{default:t(()=>[e(pe,{span:18},{default:t(()=>[e(R,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:t(()=>[e(J,{modelValue:W.value.desc,"onUpdate:modelValue":l[12]||(l[12]=a=>W.value.desc=a),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),e(pe,{span:6},{default:t(()=>[e(R,{label:" "},{default:t(()=>[e(f,{type:"primary",style:{width:"100%"},disabled:!W.value.agentId||!W.value.relationType||!W.value.strength,loading:Fe.value,onClick:ol},{default:t(()=>[...l[61]||(l[61]=[i(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Re,null,{header:t(()=>[n("span",ps,[l[62]||(l[62]=i("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),e(ft,{value:D.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:t(()=>[D.value.length===0?(o(),v("div",ms," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(o(),z(Cl,{key:1,data:D.value,size:"small",style:{width:"100%"}},{default:t(()=>[e(G,{label:"ÊàêÂëò","min-width":"120"},{default:t(({row:a})=>[n("div",ys,[n("div",{style:be([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:Ve(a.agentId)}])},p(a.agentName.charAt(0)),5),n("span",gs,p(a.agentName),1)])]),_:1}),e(G,{label:"Á±ªÂûã",width:"100"},{default:t(({row:a})=>[e(B,{type:Te(a.relationType),size:"small"},{default:t(()=>[i(p(a.relationType),1)]),_:2},1032,["type"])]),_:1}),e(G,{label:"Á®ãÂ∫¶",width:"80"},{default:t(({row:a})=>[e(B,{type:r(a.strength),size:"small",effect:"plain"},{default:t(()=>[i(p(a.strength),1)]),_:2},1032,["type"])]),_:1}),e(G,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:t(({row:a})=>[n("span",_s,p(a.desc||"‚Äî"),1)]),_:1}),e(G,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:t(({$index:a})=>[e(f,{type:"danger",link:"",size:"small",onClick:k=>tl(a)},{default:t(()=>[...l[63]||(l[63]=[i("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),e(pe,{span:10},{default:t(()=>[e(Re,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:t(()=>[D.value.length===0?(o(),v("div",ws," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(o(),v("div",bs,[(o(!0),v(j,null,se(D.value,a=>(o(),v("div",{key:a.agentId,class:"relation-card"},[n("div",{class:"relation-avatar",style:be({background:Ve(a.agentId)})},p(a.agentName.charAt(0).toUpperCase()),5),n("div",hs,[n("div",ks,p(a.agentName),1),n("div",xs,[e(B,{type:Te(a.relationType),size:"small"},{default:t(()=>[i(p(a.relationType),1)]),_:2},1032,["type"]),e(B,{type:r(a.strength),size:"small",effect:"plain"},{default:t(()=>[i(p(a.strength),1)]),_:2},1032,["type"])]),n("div",Cs,p(a.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(Ee,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:t(()=>[e(Re,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[n("div",$s,[l[64]||(l[64]=n("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),e($l,{modelValue:Q.value.enabled,"onUpdate:modelValue":l[13]||(l[13]=a=>Q.value.enabled=a),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:Ye},null,8,["modelValue"])])]),default:t(()=>[e(cl,{model:Q.value,"label-position":"top",size:"small",disabled:!Q.value.enabled},{default:t(()=>[e(vl,{gutter:16},{default:t(()=>[e(pe,{span:6},{default:t(()=>[e(R,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:t(()=>[e(Be,{modelValue:Q.value.schedule,"onUpdate:modelValue":l[14]||(l[14]=a=>Q.value.schedule=a),style:{width:"100%"}},{default:t(()=>[e(E,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),e(E,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),e(E,{label:"ÊØèÂ§©",value:"daily"}),e(E,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(pe,{span:5},{default:t(()=>[e(R,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:t(()=>[e(Ot,{modelValue:Q.value.keepTurns,"onUpdate:modelValue":l[15]||(l[15]=a=>Q.value.keepTurns=a),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(pe,{span:13},{default:t(()=>[e(R,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:t(()=>[e(J,{modelValue:Q.value.focusHint,"onUpdate:modelValue":l[16]||(l[16]=a=>Q.value.focusHint=a),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n("div",zs,[e(f,{type:"primary",size:"small",loading:We.value,onClick:Ye},{default:t(()=>[...l[65]||(l[65]=[i(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),e(f,{size:"small",loading:He.value,onClick:ml},{default:t(()=>[...l[66]||(l[66]=[i(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),e(A,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:t(()=>[i(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+p(Q.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),e(Re,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[n("div",Vs,[l[68]||(l[68]=n("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),e(f,{size:"small",text:"",onClick:qe,loading:Xe.value},{default:t(()=>[...l[67]||(l[67]=[i("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:t(()=>[Ue.value.length===0&&!Xe.value?(o(),v("div",Ts," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(o(),z(Cl,{key:1,data:Ue.value.slice(0,20),size:"small"},{default:t(()=>[e(G,{label:"Êó∂Èó¥",width:"160"},{default:t(({row:a})=>[n("span",Ss,p(_(a.timestamp)),1)]),_:1}),e(G,{label:"Áä∂ÊÄÅ",width:"72"},{default:t(({row:a})=>[e(B,{type:a.status==="ok"?"success":"danger",size:"small"},{default:t(()=>[i(p(a.status),1)]),_:2},1032,["type"])]),_:1}),e(G,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[n("span",Is,p(a.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),n("div",Ls,[e(f,{type:"primary",size:"small",onClick:l[17]||(l[17]=a=>$.value=!0)},{default:t(()=>[e(ne,null,{default:t(()=>[e(P(Rl))]),_:1}),l[69]||(l[69]=i(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),e(f,{size:"small",onClick:l[18]||(l[18]=a=>Y.value=!0)},{default:t(()=>[e(ne,null,{default:t(()=>[e(P(da))]),_:1}),l[70]||(l[70]=i(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),e(f,{size:"small",onClick:kl},{default:t(()=>[e(ne,null,{default:t(()=>[e(P(lt))]),_:1}),l[71]||(l[71]=i(" Âà∑Êñ∞ ",-1))]),_:1})]),e(vl,{gutter:16},{default:t(()=>[e(pe,{span:7},{default:t(()=>[e(Re,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:t(()=>[e(Ht,{data:xe.value,props:{label:"name",children:"children",isLeaf:a=>!a.isDir},onNodeClick:Ut,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:t(({data:a})=>[n("span",Ms,[a.isDir?(o(),z(ne,{key:0,style:{color:"#E6A23C"}},{default:t(()=>[e(P(ra))]),_:1})):(o(),z(ne,{key:1,style:{color:"#409EFF"}},{default:t(()=>[e(P(ca))]),_:1})),n("span",null,p(a.name),1),!a.isDir&&a.size?(o(),z(A,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:t(()=>[i(p(bl(a.size)),1)]),_:2},1024)):V("",!0)])]),_:1},8,["data","props"]),xe.value.length===0?(o(),z(Ql,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):V("",!0)]),_:1})]),_:1}),e(pe,{span:17},{default:t(()=>[e(Re,{shadow:"hover"},{header:t(()=>[n("div",As,[e(Yt,{separator:"/"},{default:t(()=>[e(pt,null,{default:t(()=>[...l[72]||(l[72]=[i("memory",-1)])]),_:1}),(o(!0),v(j,null,se(U.value,(a,k)=>(o(),z(pt,{key:k},{default:t(()=>[i(p(a),1)]),_:2},1024))),128))]),_:1}),De.value?(o(),z(f,{key:0,type:"primary",size:"small",onClick:Dt,loading:d.value},{default:t(()=>[...l[73]||(l[73]=[i("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):V("",!0)])]),default:t(()=>[De.value?(o(),z(J,{key:0,modelValue:m.value,"onUpdate:modelValue":l[19]||(l[19]=a=>m.value=a),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(o(),z(Ql,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),e(Bl,{modelValue:$.value,"onUpdate:modelValue":l[22]||(l[22]=a=>$.value=a),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:t(()=>[e(f,{onClick:l[21]||(l[21]=a=>$.value=!1)},{default:t(()=>[...l[75]||(l[75]=[i("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Ft},{default:t(()=>[...l[76]||(l[76]=[i("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(cl,{"label-width":"80px"},{default:t(()=>[e(R,{label:"Ë∑ØÂæÑ"},{default:t(()=>[e(J,{modelValue:N.value,"onUpdate:modelValue":l[20]||(l[20]=a=>N.value=a),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),e(A,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:t(()=>[...l[74]||(l[74]=[i("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Bl,{modelValue:Y.value,"onUpdate:modelValue":l[25]||(l[25]=a=>Y.value=a),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:t(()=>[e(f,{onClick:l[24]||(l[24]=a=>Y.value=!1)},{default:t(()=>[...l[77]||(l[77]=[i("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Nt},{default:t(()=>[...l[78]||(l[78]=[i("Êèê‰∫§",-1)])]),_:1})]),default:t(()=>[e(J,{modelValue:M.value,"onUpdate:modelValue":l[23]||(l[23]=a=>M.value=a),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(Ee,{label:"ÊäÄËÉΩ",name:"skills"},{default:t(()=>[e(an,{"agent-id":P(g),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Ee,{label:"ÂéÜÂè≤ÂØπËØù",name:"convlogs"},{default:t(()=>[n("div",Us,[l[79]||(l[79]=n("span",{style:{"font-weight":"600","font-size":"15px"}},"Ê∏†ÈÅìÂØπËØùËÆ∞ÂΩï",-1)),e(f,{size:"small",icon:P(lt),circle:"",onClick:ct,loading:Fl.value},null,8,["icon","loading"])]),Oe((o(),z(Cl,{data:Xl.value,stripe:"","empty-text":"ÊöÇÊó†ÂØπËØùËÆ∞ÂΩï"},{default:t(()=>[e(G,{label:"Ê∏†ÈÅì","min-width":"200"},{default:t(({row:a})=>[n("span",null,p(a.channelType==="telegram"?"Telegram":"Web")+" "+p(a.channelId),1)]),_:1}),e(G,{label:"Ê∂àÊÅØÊï∞",width:"100"},{default:t(({row:a})=>[i(p(a.messageCount)+" Êù°",1)]),_:1}),e(G,{label:"ÊúÄÂêéÊ¥ªË∑É",width:"180"},{default:t(({row:a})=>[i(p(a.lastAt?new Date(a.lastAt).toLocaleString("zh-CN"):"-"),1)]),_:1}),e(G,{label:"Êìç‰Ωú",width:"100"},{default:t(({row:a})=>[e(f,{size:"small",type:"primary",plain:"",onClick:k=>Kt(a)},{default:t(()=>[...l[80]||(l[80]=[i("Êü•Áúã",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Zl,Fl.value]]),e(Xt,{modelValue:ql.value,"onUpdate:modelValue":l[26]||(l[26]=a=>ql.value=a),title:Jl.value+" ÂØπËØùËÆ∞ÂΩï",direction:"rtl",size:"520px","destroy-on-close":!1},{default:t(()=>[n("div",Ds,[Pt.value?(o(),v("div",Fs,[e(f,{size:"small",plain:"",loading:xl.value,onClick:jt},{default:t(()=>[...l[81]||(l[81]=[i("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):V("",!0),Oe((o(),v("div",Ns,[(o(!0),v(j,null,se(Je.value,(a,k)=>(o(),v("div",{key:k,class:we(["conv-msg-item",a.role==="user"?"conv-msg-user":"conv-msg-assistant"])},[n("div",Bs,[n("span",Es,p(a.role==="user"?"Áî®Êà∑":"Âä©Êâã"),1),a.sender?(o(),v("span",Rs,p(a.sender),1)):V("",!0),n("span",Ps,p(a.ts?new Date(a.ts).toLocaleString("zh-CN"):""),1)]),n("div",Ks,p(a.content),1)],2))),128)),!xl.value&&Je.value.length===0?(o(),v("div",js," ÊöÇÊó†Ê∂àÊÅØËÆ∞ÂΩï ")):V("",!0)])),[[Zl,xl.value&&Je.value.length===0]])])]),_:1},8,["modelValue","title"])]),_:1}),e(Ee,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:t(()=>[e(f,{type:"primary",onClick:l[27]||(l[27]=a=>S.value=!0),style:{"margin-bottom":"16px"}},{default:t(()=>[e(ne,null,{default:t(()=>[e(P(Rl))]),_:1}),l[82]||(l[82]=i(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),e(Cl,{data:c.value,stripe:""},{default:t(()=>[e(G,{prop:"name",label:"ÂêçÁß∞"}),e(G,{label:"Ë∞ÉÂ∫¶"},{default:t(({row:a})=>[i(p(a.schedule?.expr)+" ("+p(a.schedule?.tz)+")",1)]),_:1}),e(G,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:t(({row:a})=>[a.state?.lastRunAtMs?(o(),v(j,{key:0},[e(B,{type:a.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:t(()=>[i(p(a.state?.lastStatus),1)]),_:2},1032,["type"]),e(A,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:t(()=>[i(p(_(a.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(o(),z(A,{key:1,type:"info",size:"small"},{default:t(()=>[...l[83]||(l[83]=[i("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),e(G,{label:"ÂêØÁî®",width:"80"},{default:t(({row:a})=>[e($l,{modelValue:a.enabled,"onUpdate:modelValue":k=>a.enabled=k,onChange:k=>Et(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(G,{label:"Êìç‰Ωú",width:"220"},{default:t(({row:a})=>[a.payload?.message==="__MEMORY_CONSOLIDATE__"?(o(),v(j,{key:0},[e(B,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:t(()=>[...l[84]||(l[84]=[i("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),e(f,{size:"small",onClick:k=>rt(a)},{default:t(()=>[...l[85]||(l[85]=[i("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(o(),v(j,{key:1},[e(f,{size:"small",onClick:k=>rt(a)},{default:t(()=>[...l[86]||(l[86]=[i("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",type:"danger",onClick:k=>Rt(a)},{default:t(()=>[...l[87]||(l[87]=[i("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),e(Bl,{modelValue:S.value,"onUpdate:modelValue":l[34]||(l[34]=a=>S.value=a),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:t(()=>[e(f,{onClick:l[33]||(l[33]=a=>S.value=!1)},{default:t(()=>[...l[88]||(l[88]=[i("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Bt},{default:t(()=>[...l[89]||(l[89]=[i("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(cl,{model:I.value,"label-width":"100px"},{default:t(()=>[e(R,{label:"ÂêçÁß∞"},{default:t(()=>[e(J,{modelValue:I.value.name,"onUpdate:modelValue":l[28]||(l[28]=a=>I.value.name=a)},null,8,["modelValue"])]),_:1}),e(R,{label:"Cron Ë°®ËææÂºè"},{default:t(()=>[e(J,{modelValue:I.value.expr,"onUpdate:modelValue":l[29]||(l[29]=a=>I.value.expr=a),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),e(R,{label:"Êó∂Âå∫"},{default:t(()=>[e(Be,{modelValue:I.value.tz,"onUpdate:modelValue":l[30]||(l[30]=a=>I.value.tz=a)},{default:t(()=>[e(E,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(E,{label:"UTC",value:"UTC"}),e(E,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),e(R,{label:"Ê∂àÊÅØ"},{default:t(()=>[e(J,{modelValue:I.value.message,"onUpdate:modelValue":l[31]||(l[31]=a=>I.value.message=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(R,{label:"ÂêØÁî®"},{default:t(()=>[e($l,{modelValue:I.value.enabled,"onUpdate:modelValue":l[32]||(l[32]=a=>I.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),e(Ee,{label:"Ê∏†ÈÅì",name:"channels"},{default:t(()=>[n("div",Ws,[e(A,{type:"info",size:"small"},{default:t(()=>[...l[90]||(l[90]=[i("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),e(f,{type:"primary",size:"small",onClick:kt},{default:t(()=>[e(ne,null,{default:t(()=>[e(P(Rl))]),_:1}),l[91]||(l[91]=i(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(o(!0),v(j,null,se(C.value,a=>(o(),v("div",{key:a.id,class:"channel-card"},[n("div",Os,[n("div",Hs,[e(B,{size:"small",style:{"margin-right":"8px"}},{default:t(()=>[i(p(a.type),1)]),_:2},1024),n("span",Ys,p(a.name),1),a.config?.botName?(o(),v("span",Xs,"@"+p(a.config.botName),1)):V("",!0),e(B,{type:a.status==="ok"?"success":a.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:t(()=>[i(p(a.status==="ok"?"‚úì Ê≠£Â∏∏":a.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),n("div",qs,[e($l,{modelValue:a.enabled,"onUpdate:modelValue":k=>a.enabled=k,size:"small",onChange:$t,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),e(f,{size:"small",onClick:k=>Vt(a),loading:Kl.value===a.id},{default:t(()=>[...l[92]||(l[92]=[i("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),e(f,{size:"small",onClick:k=>xt(a)},{default:t(()=>[...l[93]||(l[93]=[i("ÁºñËæë",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",type:"danger",plain:"",onClick:k=>zt(a)},{default:t(()=>[...l[94]||(l[94]=[i("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),a.type==="web"?(o(),v("div",Js,[n("div",Gs,[l[96]||(l[96]=n("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),n("span",Qs,[e(qt,{href:ul(P(g),a.id),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:t(()=>[i(p(ul(P(g),a.id)),1)]),_:2},1032,["href"]),e(f,{size:"small",link:"",style:{"margin-left":"8px"},onClick:k=>it(ul(P(g),a.id))},{default:t(()=>[...l[95]||(l[95]=[i("Â§çÂà∂",-1)])]),_:1},8,["onClick"])])]),n("div",Zs,[l[97]||(l[97]=n("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),n("span",eo,[e(B,{size:"small",type:a.config?.password?"warning":"info",effect:"plain"},{default:t(()=>[i(p(a.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):V("",!0),a.type==="telegram"?(o(),v("div",lo,[n("div",to,[l[99]||(l[99]=n("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),n("span",ao,[a.allowedFromUsers?.length?(o(!0),v(j,{key:0},se(a.allowedFromUsers,k=>(o(),z(B,{key:k.id,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:et=>ut(a.id,k.id)},{default:t(()=>[i(p(k.username?"@"+k.username:k.firstName||String(k.id))+" ",1),n("span",no,"("+p(k.id)+")",1)]),_:2},1032,["onClose"]))),128)):a.config?.allowedFrom?(o(!0),v(j,{key:1},se(a.config.allowedFrom.split(","),k=>(o(),z(B,{key:k,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:et=>ut(a.id,Number(k.trim()))},{default:t(()=>[i(p(k.trim()),1)]),_:2},1032,["onClose"]))),128)):(o(),z(A,{key:2,type:"warning",size:"small"},{default:t(()=>[...l[98]||(l[98]=[i("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),n("div",so,[n("div",{class:"pending-section-header",onClick:k=>Tt(a.id)},[l[101]||(l[101]=n("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),e(ft,{value:(rl.value[a.id]||[]).length,hidden:!(rl.value[a.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),e(f,{size:"small",link:"",onClick:Ge(k=>Ul(a.id),["stop"]),style:{"margin-left":"8px"}},{default:t(()=>[...l[100]||(l[100]=[i("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),e(ne,{style:be([{"margin-left":"4px",transition:"transform 0.2s"},{transform:hl.value===a.id?"rotate(180deg)":""}])},{default:t(()=>[e(P(va))]),_:1},8,["style"])],8,oo),hl.value===a.id?(o(),v("div",io,[Hl.value[a.id]?(o(),v("div",uo,[e(A,{type:"info",size:"small"},{default:t(()=>[...l[102]||(l[102]=[i("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(rl.value[a.id]||[]).length?(o(!0),v(j,{key:1},se(rl.value[a.id],k=>(o(),v("div",{key:k.id,class:"pending-user-row"},[n("div",ro,[n("span",co,p(k.firstName||"Êú™Áü•"),1),k.username?(o(),v("span",vo,"@"+p(k.username),1)):V("",!0),n("span",fo,"ID: "+p(k.id),1),e(A,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[i(p(Le(k.lastSeen)),1)]),_:2},1024)]),n("div",po,[e(f,{size:"small",type:"success",plain:"",onClick:et=>St(a.id,k.id),loading:Yl.value===`${a.id}-${k.id}`},{default:t(()=>[...l[103]||(l[103]=[i("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),e(f,{size:"small",type:"danger",plain:"",onClick:et=>It(a.id,k.id)},{default:t(()=>[...l[104]||(l[104]=[i("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(o(),v("div",mo," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):V("",!0)])])):V("",!0)]))),128)),!fe.value&&!C.value.length?(o(),z(Ql,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):V("",!0),e(Bl,{modelValue:_e.value,"onUpdate:modelValue":l[45]||(l[45]=a=>_e.value=a),title:Ne.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:t(()=>[e(f,{onClick:l[44]||(l[44]=a=>_e.value=!1)},{default:t(()=>[...l[114]||(l[114]=[i("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Ct,loading:Pl.value},{default:t(()=>[...l[115]||(l[115]=[i("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(cl,{model:h.value,"label-width":"120px"},{default:t(()=>[e(R,{label:"Á±ªÂûã",required:""},{default:t(()=>[e(Be,{modelValue:h.value.type,"onUpdate:modelValue":l[35]||(l[35]=a=>h.value.type=a),style:{width:"100%"}},{default:t(()=>[e(E,{label:"Telegram",value:"telegram"}),e(E,{label:"Web ËÅäÂ§©È°µ",value:"web"}),e(E,{label:"iMessage",value:"imessage"}),e(E,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),e(R,{label:"ÂêçÁß∞",required:""},{default:t(()=>[e(J,{modelValue:h.value.name,"onUpdate:modelValue":l[36]||(l[36]=a=>h.value.name=a),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),h.value.type==="telegram"?(o(),v(j,{key:0},[e(R,{label:"Bot Token",required:""},{default:t(()=>[n("div",yo,[n("div",go,[e(J,{modelValue:h.value.botToken,"onUpdate:modelValue":l[37]||(l[37]=a=>h.value.botToken=a),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ",style:{flex:"1"},status:K.value.status==="error"?"error":K.value.status==="ok"?"success":""},null,8,["modelValue","status"]),e(f,{size:"default",loading:K.value.loading,type:K.value.status==="ok"?"success":K.value.status==="error"?"danger":"default",onClick:ot,disabled:!h.value.botToken||Wl(h.value.botToken)},{default:t(()=>[...l[105]||(l[105]=[i("È™åËØÅ",-1)])]),_:1},8,["loading","type","disabled"])]),K.value.loading?(o(),v("div",_o,[e(ne,{class:"is-loading"},{default:t(()=>[e(P(lt))]),_:1}),l[106]||(l[106]=i(" Ê≠£Âú®È™åËØÅ Token‚Ä¶ ",-1))])):K.value.status==="ok"?(o(),v("div",wo,[e(ne,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Jt)]),_:1}),l[107]||(l[107]=i("Token ÊúâÊïàÔºåBot ÂêçÁß∞Ôºö",-1)),n("b",null,"@"+p(K.value.botName),1)])):K.value.status==="duplicate"?(o(),v("div",bo,[e(ne,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Gt)]),_:1}),l[108]||(l[108]=i("Ê≠§ Token Â∑≤Ë¢´ÊàêÂëò„Äå",-1)),n("b",null,p(K.value.usedBy),1),i("„ÄçÁöÑÊ∏†ÈÅì„Äå"+p(K.value.usedByCh)+"„Äç‰ΩøÁî® ",1)])):K.value.status==="error"?(o(),v("div",ho,[e(ne,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Qt)]),_:1}),i(p(K.value.error),1)])):(o(),v("div",ko,[e(A,{type:"info",size:"small"},{default:t(()=>[e(ne,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(mt)]),_:1}),l[109]||(l[109]=i("ËæìÂÖ•ÂÆåÊàêÂêéËá™Âä®È™åËØÅÔºå‰πüÂèØÁÇπÂè≥‰æß„ÄåÈ™åËØÅ„ÄçÊåâÈíÆÊâãÂä®Ëß¶Âèë",-1))]),_:1})]))])]),_:1}),e(R,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:t(()=>[e(J,{modelValue:h.value.allowedFrom,"onUpdate:modelValue":l[38]||(l[38]=a=>h.value.allowedFrom=a),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),e(A,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[e(ne,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(mt)]),_:1}),l[110]||(l[110]=i("ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1))]),_:1})]),_:1})],64)):V("",!0),h.value.type==="web"?(o(),v(j,{key:1},[Ne.value?(o(),z(R,{key:0,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[n("div",xo,[e(ne,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(yt)]),_:1}),n("span",Co,p(ul(P(g),Ne.value)),1),e(f,{size:"small",link:"",onClick:l[39]||(l[39]=a=>it(ul(P(g),Ne.value)))},{default:t(()=>[...l[111]||(l[111]=[i("Â§çÂà∂",-1)])]),_:1})])]),_:1})):V("",!0),Ne.value?V("",!0):(o(),z(R,{key:1,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[n("div",$o,[e(ne,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(yt)]),_:1}),n("span",zo,p(ul(P(g),Al.value)),1),e(B,{size:"small",type:"info",effect:"plain"},{default:t(()=>[...l[112]||(l[112]=[i("‰øùÂ≠òÂêéÁîüÊïà",-1)])]),_:1})]),e(A,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...l[113]||(l[113]=[i(" ÊØè‰∏™ Web Ê∏†ÈÅìÊúâÁã¨Á´ãÈìæÊé•ÔºåÂèØÂêåÊó∂ÂºÄÊîæÂ§ö‰∏™ÂÖ•Âè£ ",-1)])]),_:1})]),_:1})),e(R,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:t(()=>[e(J,{modelValue:h.value.webPassword,"onUpdate:modelValue":l[40]||(l[40]=a=>h.value.webPassword=a),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),e(R,{label:"Ê¨¢ËøéËØ≠"},{default:t(()=>[e(J,{modelValue:h.value.webWelcome,"onUpdate:modelValue":l[41]||(l[41]=a=>h.value.webWelcome=a),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),e(R,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:t(()=>[e(J,{modelValue:h.value.webTitle,"onUpdate:modelValue":l[42]||(l[42]=a=>h.value.webTitle=a),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):V("",!0),e(R,{label:"ÂêØÁî®"},{default:t(()=>[e($l,{modelValue:h.value.enabled,"onUpdate:modelValue":l[43]||(l[43]=a=>h.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(Ee,{label:"ÁéØÂ¢ÉÂèòÈáè",name:"env"},{default:t(()=>[n("div",Vo,[l[119]||(l[119]=n("div",{style:{"margin-bottom":"16px"}},[n("h3",{style:{margin:"0 0 8px 0","font-size":"15px"}},[i("ÁéØÂ¢ÉÂèòÈáè "),n("span",{style:{"font-size":"12px",color:"#888","font-weight":"400"}},"Ôºà‰ªÖÊ≠§ÊàêÂëòÂèØËßÅÔºâ")]),n("p",{style:{margin:"0 0 6px",color:"#666","font-size":"13px"}},[i(" ÈÖçÁΩÆÊ≠§ AI ÊàêÂëò"),n("strong",null,"ÁßÅÊúâ"),i("ÁöÑÁéØÂ¢ÉÂèòÈáèÔºàÂ¶Ç‰∏ìÂ±ûÁöÑ GitHub Token„ÄÅÂæÆ‰ø° AppSecret Á≠âÔºâ„ÄÇ"),n("br"),i(" ÂèòÈáè‰ºöÊ≥®ÂÖ•Âà∞ bash Â∑•ÂÖ∑ÁöÑÊâßË°åÁéØÂ¢É‰∏≠Ôºå"),n("strong",null,"‰∏çÂèóÁ≥ªÁªüÈªòËÆ§ËøáÊª§ÂΩ±Âìç"),i("Ôºå‰∏î"),n("strong",null,"‰ªÖÂØπÊú¨ÊàêÂëòÂèØËßÅ"),i("„ÄÇ ")]),n("p",{style:{margin:"0",color:"#94a3b8","font-size":"12px",background:"#1e293b",padding:"6px 10px","border-radius":"6px",display:"inline-block"}},[i(" üí° AI ÊàêÂëòÂèØ‰ª•ÈÄöËøá "),n("code",{style:{color:"#38bdf8"}},"self_set_env"),i(" Â∑•ÂÖ∑Ëá™Ë°åÊ∑ªÂä†ÁéØÂ¢ÉÂèòÈáèÔºåÊó†ÈúÄÊâãÂä®Âú®Ê≠§È°µÈù¢Êìç‰Ωú„ÄÇ"),n("br"),i(" ÂÖ®Â±ÄÂÖ±‰∫´ÁöÑ API KeyÔºàÂ¶Ç Brave SearchÔºâËØ∑Âú®Â∑¶‰æß„Äå"),n("strong",null,"ËÉΩÂäõ"),i("„ÄçÊùøÂùóÈÖçÁΩÆ„ÄÇ ")])],-1)),n("div",To,[e(J,{modelValue:Pe.value,"onUpdate:modelValue":l[46]||(l[46]=a=>Pe.value=a),placeholder:"KEYÔºàÂ¶Ç GITHUB_TOKENÔºâ",style:{width:"220px","font-family":"monospace"},size:"small",onKeyup:Qe(Ae,["enter"])},null,8,["modelValue"]),e(J,{modelValue:ue.value,"onUpdate:modelValue":l[47]||(l[47]=a=>ue.value=a),placeholder:"VALUE",style:{flex:"1","font-family":"monospace"},size:"small",type:"password","show-password":"",onKeyup:Qe(Ae,["enter"])},null,8,["modelValue"]),e(f,{size:"small",type:"primary",onClick:Ae,disabled:!Pe.value.trim()},{default:t(()=>[...l[116]||(l[116]=[i(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled"])]),e(Cl,{data:ye.value,size:"small",style:{width:"100%","margin-bottom":"16px"},"empty-text":"ÊöÇÊó†ÁéØÂ¢ÉÂèòÈáè"},{default:t(()=>[e(G,{label:"KEY","min-width":"200"},{default:t(({row:a})=>[n("code",So,p(a.key),1)]),_:1}),e(G,{label:"VALUE","min-width":"200"},{default:t(({row:a})=>[e(J,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,type:"password","show-password":"",size:"small",style:{"font-family":"monospace"},placeholder:"ÔºàÊú™ËÆæÁΩÆÔºâ"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(G,{label:"Êìç‰Ωú",width:"80",fixed:"right"},{default:t(({$index:a})=>[e(f,{size:"small",type:"danger",link:"",onClick:k=>ge(a)},{default:t(()=>[...l[117]||(l[117]=[i("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(f,{type:"primary",size:"small",loading:Ke.value,onClick:je},{default:t(()=>[...l[118]||(l[118]=[i(" ‰øùÂ≠òÁéØÂ¢ÉÂèòÈáè ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Do=st(Lo,[["__scopeId","data-v-34bb0355"]]);export{Do as default};
