import{u as B}from"./agents-BX2uQBLi.js";import{d as L,o as j,s as q,m as E,c as b,e as l,t as o,b as s,w as t,g as k,l as h,r as _,h as i,i as m,f as d,n as C,p as G,F as K,q as H}from"./index-CsSNqLGf.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"dashboard-page"},Q={key:0,class:"no-model-banner warn-model-banner"},R={class:"no-model-banner-left"},U={class:"no-model-banner-title"},W={key:1,class:"no-model-banner"},X={class:"stat-value"},Y={class:"stat-value"},Z={class:"stat-value"},ee={class:"stat-value"},te={style:{"font-weight":"600"}},se={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ae={style:{display:"flex","align-items":"center",gap:"8px"}},le=L({__name:"DashboardView",setup(ne){const v=B(),f=_(null),w=_(-1),x=_(!0),I=_(!1),$=_("");j(async()=>{v.fetchAll(),await Promise.allSettled([q.get().then(n=>{f.value=n.data}).catch(()=>{}),E.list().then(n=>{const e=n.data??[];w.value=e.length;const p=e.find(u=>u.isDefault)??e[0];p&&p.status==="error"&&(I.value=!0,$.value=p.name||p.provider)}).catch(()=>{w.value=0})]),x.value=!1});function S(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function T(n){return n==="running"?"è¿è¡Œä¸­":n==="stopped"?"å·²åœæ­¢":"ç©ºé—²"}function z(n){return n?n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}k`:String(n):"0"}return(n,e)=>{const p=i("router-link"),u=i("el-card"),g=i("el-col"),V=i("el-row"),F=i("DataAnalysis"),M=i("el-icon"),A=i("el-button"),r=i("el-table-column"),c=i("el-tag"),D=i("el-table"),N=i("el-text"),P=i("el-empty");return m(),b("div",O,[e[15]||(e[15]=l("h2",{style:{margin:"0 0 20px"}},"ä»ªè¡¨ç›˜",-1)),!x.value&&I.value?(m(),b("div",Q,[l("div",R,[e[2]||(e[2]=l("span",{class:"no-model-banner-icon"},"ğŸš«",-1)),l("div",null,[l("div",U,"é»˜è®¤æ¨¡å‹ã€Œ"+o($.value)+"ã€è¿æ¥å¤±è´¥",1),e[1]||(e[1]=l("div",{class:"no-model-banner-desc"},"å½“å‰ IP å¯èƒ½è¢«è¯¥æ¨¡å‹æä¾›å•†å±è”½ï¼ˆå¦‚ Anthropic é™åˆ¶å›½å†… IPï¼‰ã€‚è¯·åˆ‡æ¢é»˜è®¤æ¨¡å‹ï¼Œæˆ–ä¸º Anthropic é…ç½®è½¬å‘åœ°å€ã€‚",-1))])]),s(p,{to:"/config/models",class:"no-model-banner-btn"},{default:t(()=>[...e[3]||(e[3]=[d("å»è®¾ç½® â†’",-1)])]),_:1})])):k("",!0),!x.value&&w.value===0?(m(),b("div",W,[e[5]||(e[5]=l("div",{class:"no-model-banner-left"},[l("span",{class:"no-model-banner-icon"},"âš ï¸"),l("div",null,[l("div",{class:"no-model-banner-title"},"è¿˜æ²¡æœ‰é…ç½® AI æ¨¡å‹"),l("div",{class:"no-model-banner-desc"},"æ·»åŠ æ¨¡å‹ API Key åï¼ŒAI æˆå‘˜æ‰èƒ½å¼€å§‹å·¥ä½œã€‚æ”¯æŒ Claudeã€DeepSeekã€GPT-4 ç­‰ã€‚")])],-1)),s(p,{to:"/config/models",class:"no-model-banner-btn"},{default:t(()=>[...e[4]||(e[4]=[d("ç«‹å³é…ç½® â†’",-1)])]),_:1})])):k("",!0),s(V,{gutter:12,style:{"margin-bottom":"20px"}},{default:t(()=>[s(g,{xs:12,sm:12,md:6,lg:6},{default:t(()=>[s(u,{shadow:"never",class:"stat-card stat-card--members"},{default:t(()=>[e[6]||(e[6]=l("div",{class:"stat-label"},"AI æˆå‘˜",-1)),l("div",X,o(f.value?.agents.total??C(v).list.length),1)]),_:1})]),_:1}),s(g,{xs:12,sm:12,md:6,lg:6},{default:t(()=>[s(u,{shadow:"never",class:"stat-card stat-card--sessions"},{default:t(()=>[e[7]||(e[7]=l("div",{class:"stat-label"},"å¯¹è¯æ€»æ•°",-1)),l("div",Y,o(f.value?.sessions.total??0),1)]),_:1})]),_:1}),s(g,{xs:12,sm:12,md:6,lg:6,style:{"margin-top":"0"}},{default:t(()=>[s(u,{shadow:"never",class:"stat-card stat-card--messages"},{default:t(()=>[e[8]||(e[8]=l("div",{class:"stat-label"},"æ¶ˆæ¯æ€»æ•°",-1)),l("div",Z,o(f.value?.sessions.totalMessages??0),1)]),_:1})]),_:1}),s(g,{xs:12,sm:12,md:6,lg:6,style:{"margin-top":"0"}},{default:t(()=>[s(u,{shadow:"never",class:"stat-card stat-card--tokens"},{default:t(()=>[e[9]||(e[9]=l("div",{class:"stat-label"},"Token ç”¨é‡",-1)),l("div",ee,o(z(f.value?.sessions.totalTokens??0)),1)]),_:1})]),_:1})]),_:1}),f.value?.topAgents?.length?(m(),h(u,{key:2,shadow:"hover",style:{"margin-bottom":"24px"}},{header:t(()=>[l("span",te,[s(M,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[s(F)]),_:1}),e[10]||(e[10]=d("æˆå‘˜ç”¨é‡æ’è¡Œ",-1))])]),default:t(()=>[s(D,{data:f.value.topAgents,stripe:"",style:{width:"100%"}},{default:t(()=>[s(r,{label:"æˆå‘˜","min-width":"140"},{default:t(({row:a})=>[s(A,{type:"primary",link:"",onClick:y=>n.$router.push(`/agents/${a.id}`)},{default:t(()=>[d(o(a.name),1)]),_:2},1032,["onClick"])]),_:1}),s(r,{label:"å¯¹è¯æ•°",width:"100",align:"center"},{default:t(({row:a})=>[s(c,{size:"small",type:"info"},{default:t(()=>[d(o(a.sessions),1)]),_:2},1024)]),_:1}),s(r,{label:"æ¶ˆæ¯æ•°",width:"100",align:"center"},{default:t(({row:a})=>[d(o(a.messages),1)]),_:1}),s(r,{label:"Token ç”¨é‡",width:"130",align:"center"},{default:t(({row:a})=>[s(c,{size:"small",type:a.tokens>1e5?"danger":a.tokens>5e4?"warning":"success",effect:"plain"},{default:t(()=>[d(o(z(a.tokens)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})):k("",!0),s(u,{shadow:"hover"},{header:t(()=>[l("div",se,[e[12]||(e[12]=l("span",{style:{"font-weight":"600"}},"æˆå‘˜çŠ¶æ€",-1)),s(A,{type:"primary",size:"small",onClick:e[0]||(e[0]=a=>n.$router.push("/agents"))},{default:t(()=>[...e[11]||(e[11]=[d(" ç®¡ç†æˆå‘˜ ",-1)])]),_:1})])]),default:t(()=>[s(D,{data:C(v).list,stripe:"",style:{width:"100%"}},{default:t(()=>[s(r,{label:"åç§°","min-width":"150"},{default:t(({row:a})=>[l("div",ae,[l("div",{class:"avatar-dot",style:G({background:a.avatarColor||"#409eff"})},o(a.name.charAt(0)),5),l("span",null,o(a.name),1)])]),_:1}),s(r,{label:"æ¨¡å‹","min-width":"180"},{default:t(({row:a})=>[s(c,{size:"small",type:"info"},{default:t(()=>[d(o(a.modelId||a.model||"-"),1)]),_:2},1024)]),_:1}),s(r,{label:"é€šé“","min-width":"140"},{default:t(({row:a})=>[a.channelIds?.length?(m(!0),b(K,{key:0},H(a.channelIds,y=>(m(),h(c,{key:y,size:"small",style:{"margin-right":"4px"}},{default:t(()=>[d(o(y),1)]),_:2},1024))),128)):(m(),h(N,{key:1,type:"info",size:"small"},{default:t(()=>[...e[13]||(e[13]=[d("â€”",-1)])]),_:1}))]),_:1}),s(r,{label:"çŠ¶æ€",width:"100"},{default:t(({row:a})=>[s(c,{type:S(a.status),size:"small"},{default:t(()=>[d(o(T(a.status)),1)]),_:2},1032,["type"])]),_:1}),s(r,{label:"æ“ä½œ",width:"100"},{default:t(({row:a})=>[s(A,{type:"primary",size:"small",link:"",onClick:y=>n.$router.push(`/agents/${a.id}`)},{default:t(()=>[...e[14]||(e[14]=[d(" å¯¹è¯ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),C(v).list.length===0?(m(),h(P,{key:0,description:"æš‚æ—  AI æˆå‘˜"})):k("",!0)]),_:1})])}}}),re=J(le,[["__scopeId","data-v-fc159f0b"]]);export{re as default};
