import{d as B,P as y,o as U,T as z,c as u,e as l,b as o,w as g,f as w,t as x,n as V,aa as E,a1 as O,r,I as S,ap as W,S as C,h as n,i as d,F as q,q as D,z as G,g as H}from"./index-CsSNqLGf.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"logs-page"},j={class:"logs-header"},J={style:{margin:"0"}},K={style:{"font-size":"13px",color:"#909399","margin-top":"4px"}},Q={style:{display:"flex",gap:"10px","align-items":"center"}},X={class:"log-text"},Y={key:0,class:"log-empty"},Z=B({__name:"LogsView",setup($){const p=r([]),a=r(""),_=r(!1),i=r(!0),h=r(null);let f=null;const c=S(()=>{if(!a.value)return p.value;const t=a.value.toLowerCase();return p.value.filter(e=>e.toLowerCase().includes(t))});function L(t){const e=t.toUpperCase();return e.includes("ERROR")||e.includes("[ERR]")||e.includes("FATAL")?"level-error":e.includes("WARN")||e.includes("[WARN]")||e.includes("WARNING")?"level-warn":e.includes("INFO")||e.includes("[INFO]")?"level-info":"level-default"}async function v(){_.value=!0;try{const t=await W.get(500);p.value=t.data.lines??[],i.value&&(await C(),m())}catch{}finally{_.value=!1}}function m(){const t=h.value;t&&(t.scrollTop=t.scrollHeight)}return y(i,t=>{t&&m()}),y(c,async()=>{i.value&&(await C(),m())}),U(()=>{v(),f=setInterval(v,5e3)}),z(()=>{f&&clearInterval(f)}),(t,e)=>{const N=n("List"),k=n("el-icon"),R=n("el-input"),I=n("el-switch"),A=n("el-button"),T=n("el-empty"),b=n("el-card");return d(),u("div",P,[l("div",j,[l("div",null,[l("h2",J,[o(k,{style:{"vertical-align":"-2px","margin-right":"6px"}},{default:g(()=>[o(N)]),_:1}),e[2]||(e[2]=w("系统日志",-1))]),l("div",K," 共 "+x(c.value.length)+" 条 · 每 5 秒自动刷新 ",1)]),l("div",Q,[o(R,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),placeholder:"关键词过滤…",clearable:"",style:{width:"220px"},"prefix-icon":V(E)},null,8,["modelValue","prefix-icon"]),o(I,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),"active-text":"自动滚动"},null,8,["modelValue"]),o(A,{onClick:v,loading:_.value,icon:V(O)},{default:g(()=>[...e[3]||(e[3]=[w("刷新",-1)])]),_:1},8,["loading","icon"])])]),o(b,{shadow:"never",class:"log-card"},{default:g(()=>[l("div",{ref_key:"logContainer",ref:h,class:"log-container"},[(d(!0),u(q,null,D(c.value,(s,F)=>(d(),u("div",{key:F,class:G(["log-line",L(s)])},[l("span",X,x(s),1)],2))),128)),c.value.length===0?(d(),u("div",Y,[o(T,{description:a.value?"无匹配日志":"暂无日志内容"},null,8,["description"])])):H("",!0)],512)]),_:1})])}}}),le=M(Z,[["__scopeId","data-v-abf510f6"]]);export{le as default};
