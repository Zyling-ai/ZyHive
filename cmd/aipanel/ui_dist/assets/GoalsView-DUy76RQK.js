import{d as xt,o as $t,A as zt,P as We,ac as Y,c as r,e as o,b as a,w as s,t as f,g as I,F as V,q as C,p as D,z as j,f as h,j as Je,n as A,ad as Ut,l as $,r as b,y as Ke,I as S,h as y,i as d,a1 as Yt,K as ne,ae as ge,M as St,af as Qe,ag as xe,U as Nt,ab as Ht,E as T,B as Gt}from"./index-C7QKZ4Pt.js";import{A as Ft}from"./AiChat-DSjnM6zA.js";import{_ as Lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Bt={class:"goals-studio"},Rt={class:"sidebar-top"},Et={class:"sidebar-acts"},Ot={class:"gs-filter"},Pt={class:"goal-list"},Xt={key:0,class:"goal-item goal-item-new active"},jt={class:"gi-top"},Zt={class:"gi-title gi-title-new"},qt={key:1,class:"list-empty"},Wt=["onClick"],Jt={class:"gi-top"},Kt={class:"gi-title"},Qt={class:"gi-progress-wrap"},el={class:"gi-progress-num"},tl={class:"gi-bottom"},ll={class:"gi-avatars"},al={key:0,class:"gi-avatar-more"},sl={class:"gi-dates"},nl={class:"gs-editor"},ol={key:0,class:"editor-gantt-overview"},il={class:"overview-header"},dl={class:"overview-title"},ul={key:0,class:"gantt-empty"},rl={class:"gantt-header"},ml={class:"gantt-label-col"},cl={class:"gantt-scale-hint"},pl={class:"gantt-years"},vl={class:"gantt-months"},fl={class:"gantt-body"},gl={class:"gantt-overlay","aria-hidden":"true"},_l={class:"gantt-timeline-col",style:{position:"relative"}},yl=["onClick"],bl={class:"gantt-label-col"},hl={class:"gantt-label-inner"},wl={class:"gantt-agent-avatars"},kl={class:"gantt-goal-name"},Vl={class:"gantt-timeline-col"},Al={key:0,class:"gantt-bar-label"},Ml=["title"],Cl={key:1,class:"gantt-no-date"},Tl={key:0,class:"gantt-summary-panel"},Il={class:"gsp-header"},Dl={class:"gsp-avatars"},xl={class:"gsp-title-block"},$l={class:"gsp-title"},zl={class:"gsp-body"},Ul={class:"gsp-stat"},Yl={class:"gsp-stat-val"},Sl={class:"gsp-stat"},Nl={class:"gsp-stat-val"},Hl={key:0,class:"gsp-stat"},Gl={class:"gsp-stat-val"},Fl={key:1,class:"gsp-desc"},Ll={class:"editor-toolbar"},Bl={class:"editor-breadcrumb"},Rl={class:"toolbar-acts"},El={class:"editor-form"},Ol={style:{width:"100%"}},Pl={class:"editor-toolbar"},Xl={class:"editor-breadcrumb"},jl={class:"crumb-name"},Zl={class:"toolbar-acts"},ql={class:"editor-form"},Wl={style:{width:"100%"}},Jl={class:"tab-panel"},Kl={class:"tab-panel-head"},Ql={class:"code-cell"},ea={class:"tab-panel"},ta={key:0,style:{"text-align":"center",padding:"20px"}},la={class:"record-card"},aa={class:"record-header"},sa={class:"rec-name"},na={class:"rec-output"},oa={class:"chat-panel-head"},ia={class:"chat-wrap"},da=2*6e4,ua=20*365*864e5,et=6*30.44*864e5|0,ra=xt({__name:"GoalsView",setup(ma){const _e=b(260),ye=b(360),Q=b("");let $e=0,be=0;function ze(l,e){Q.value=e,$e=l.clientX,be=e==="side"?_e.value:ye.value,document.addEventListener("mousemove",Ue),document.addEventListener("mouseup",Ye),l.preventDefault()}function Ue(l){const e=l.clientX-$e;Q.value==="side"?_e.value=Math.max(200,Math.min(400,be+e)):ye.value=Math.max(280,Math.min(560,be-e))}function Ye(){Q.value="",document.removeEventListener("mousemove",Ue),document.removeEventListener("mouseup",Ye)}const oe=b([]),z=b([]),ie=b(""),de=b(""),u=b(null),N=b(!1),ue=b(!1),ee=b("basic"),te=b(!1),re=b([]),he=b(!1),me=b("0 9 * * 1"),B=b(""),i=Ke({title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]}),M=Ke({name:"",agentId:"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),Z=S(()=>{const l={};return z.value.forEach(e=>{l[e.id]=e.name}),l}),R=S(()=>{const l={};return z.value.forEach(e=>{l[e.id]=e.avatarColor||"#409eff"}),l}),ce=S(()=>{let l=[...oe.value];return ie.value&&(l=l.filter(e=>e.status===ie.value)),de.value&&(l=l.filter(e=>(e.agentIds||[]).includes(de.value))),l}),H=b(et),q=b(Date.now()+et*.4),tt=[{ms:6e4,kind:"minute",step:1,label:"1åˆ†é’Ÿ"},{ms:5*6e4,kind:"minute",step:5,label:"5åˆ†é’Ÿ"},{ms:15*6e4,kind:"minute",step:15,label:"15åˆ†é’Ÿ"},{ms:30*6e4,kind:"minute",step:30,label:"30åˆ†é’Ÿ"},{ms:36e5,kind:"hour",step:1,label:"1å°æ—¶"},{ms:6*36e5,kind:"hour",step:6,label:"6å°æ—¶"},{ms:12*36e5,kind:"hour",step:12,label:"12å°æ—¶"},{ms:864e5,kind:"day",step:1,label:"1å¤©"},{ms:7*864e5,kind:"week",step:7,label:"1å‘¨"},{ms:30.44*864e5|0,kind:"month",step:1,label:"1æœˆ"},{ms:3*(30.44*864e5|0),kind:"month",step:3,label:"3æœˆ"},{ms:6*(30.44*864e5|0),kind:"month",step:6,label:"6æœˆ"},{ms:365*864e5,kind:"year",step:1,label:"1å¹´"},{ms:2*365*864e5,kind:"year",step:2,label:"2å¹´"},{ms:5*365*864e5,kind:"year",step:5,label:"5å¹´"}],Se=S(()=>{const l=H.value/8;return tt.reduce((e,n)=>Math.abs(n.ms-l)<Math.abs(e.ms-l)?n:e)}),W=S(()=>({start:new Date(q.value-H.value/2),end:new Date(q.value+H.value/2)})),Ne=S(()=>kt(W.value.start,W.value.end,Se.value)),le=b(700),we=b(null),He=S(()=>{const l=Ne.value,e=le.value;if(!l.length||!e)return l;const m=Math.max(1,Math.floor(e/50));if(l.length<=m)return l;const c=Math.ceil(l.length/m);return l.filter((k,U)=>U%c===0)}),lt=Ne,ke=b(!1),Ve=b(!1);let pe=!1,ve=!1,Ae=0,Me=0,J=0,Ce=0;function Ge(){cancelAnimationFrame(Ce),J=0}function at(l){Ge(),pe=!0,ve=!1,ke.value=!0,Ve.value=!1,Ae=l.clientX,Me=Date.now(),J=0}function st(l){if(!pe)return;const e=l.clientX-Ae,n=Date.now()-Me;Math.abs(e)>3&&(ve=!0,Ve.value=!0),ve&&(n>0&&(J=J*.65+e/n*.35),q.value-=e/(le.value||700)*H.value),Ae=l.clientX,Me=Date.now()}function Fe(){if(pe&&(pe=!1,ke.value=!1,ve&&Math.abs(J)>.05)){let l=J,e=Date.now();const n=()=>{const m=Date.now(),c=m-e;e=m,q.value-=l*c/(le.value||700)*H.value,l*=Math.pow(.92,c/16),Math.abs(l)>.008&&(Ce=requestAnimationFrame(n))};Ce=requestAnimationFrame(n)}}function nt(l){l.preventDefault(),Ge();const e=Math.exp(l.deltaY*.0015),n=Math.max(da,Math.min(ua,H.value*e)),m=we.value?.getBoundingClientRect();if(m&&m.width>0){const c=Math.max(0,Math.min(1,(l.clientX-m.left)/m.width)),k=q.value-H.value/2+c*H.value;q.value=k+n*(.5-c)}H.value=n}const w=b(null);function ot(l){Ve.value||(w.value=w.value?.id===l.id?null:l)}const Le=S(()=>{const{start:l,end:e}=W.value,n=Date.now();return n<l.getTime()||n>e.getTime()?null:`${(n-l.getTime())/(e.getTime()-l.getTime())*100}%`}),it=S(()=>{const l=localStorage.getItem("aipanel_token")||"TOKEN",e=`${window.location.protocol}//${window.location.host}`,n=z.value.map(c=>`- ${c.id}: ${c.name}`).join(`
`),m=u.value?`
### å½“å‰é€‰ä¸­ç›®æ ‡
ID: ${u.value.id}
æ ‡é¢˜: ${u.value.title}
çŠ¶æ€: ${u.value.status}
è¿›åº¦: ${u.value.progress}%
å¼€å§‹: ${u.value.startAt||"æœªè®¾ç½®"}
ç»“æŸ: ${u.value.endAt||"æœªè®¾ç½®"}`:"";return`## ç›®æ ‡è§„åˆ’åŠ©æ‰‹

ä½ æ˜¯å›¢é˜Ÿçš„ç›®æ ‡è§„åˆ’åŠ©æ‰‹ã€‚

### ðŸŽ¯ æ ¸å¿ƒèƒ½åŠ›ï¼šå¡«å†™è¡¨å•ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰

å½“ç”¨æˆ·æè¿°ç›®æ ‡ä¿¡æ¯æ—¶ï¼Œ**ç›´æŽ¥è¾“å‡º JSON å¡«å……è¡¨å•**ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

\`\`\`json
{"action":"fill_goal","data":{"title":"ç›®æ ‡æ ‡é¢˜","description":"æè¿°ï¼ˆå¯é€‰ï¼‰","type":"team","agentIds":["agentId1"],"status":"active","startAt":"2026-03-01T00:00:00Z","endAt":"2026-06-30T00:00:00Z","progress":0,"milestones":[{"title":"é‡Œç¨‹ç¢‘1","dueAt":"2026-04-01T00:00:00Z","done":false}]}}
\`\`\`

- type: "personal"ï¼ˆä¸ªäººï¼‰æˆ– "team"ï¼ˆå›¢é˜Ÿï¼‰
- status: "draft" / "active" / "completed" / "cancelled"
- agentIds: å‚ä¸Žæˆå‘˜çš„ ID åˆ—è¡¨
- æ—¶é—´æ ¼å¼ï¼šISO 8601ï¼ˆå¦‚ "2026-03-01T00:00:00Z"ï¼‰
- è¾“å‡º JSON åŽï¼Œé¡µé¢ä¼šè‡ªåŠ¨å¡«å……è¡¨å•ï¼Œç”¨æˆ·ç¡®è®¤åŽä¿å­˜

### API æ“ä½œï¼ˆå¦‚éœ€ç›´æŽ¥æ›´æ–°å·²æœ‰ç›®æ ‡ï¼‰

**æ›´æ–°è¿›åº¦ï¼š**
\`\`\`bash
curl -s -X PATCH ${e}/api/goals/{id}/progress -H "Authorization: Bearer ${l}" -H "Content-Type: application/json" -d '{"progress":50}'
\`\`\`

**æ·»åŠ å®šæœŸæ£€æŸ¥ï¼š**
\`\`\`bash
curl -s -X POST ${e}/api/goals/{id}/checks -H "Authorization: Bearer ${l}" -H "Content-Type: application/json" -d '{"name":"æ¯å‘¨æ£€æŸ¥","schedule":"0 9 * * 1","agentId":"agentId","tz":"Asia/Shanghai","prompt":"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€æœ¬å‘¨è¿›å±•","enabled":true}'
\`\`\`

### å½“å‰å›¢é˜Ÿæˆå‘˜
${n}
${m}

**å·¥ä½œæµç¨‹ï¼š**
1. ç”¨æˆ·æè¿°ç›®æ ‡ â†’ ä½ è¾“å‡º fill_goal JSON â†’ é¡µé¢è‡ªåŠ¨å¡«è¡¨
2. ç”¨æˆ·ç¡®è®¤å†…å®¹åŽè‡ªè¡Œç‚¹å‡»ã€Œåˆ›å»ºã€æˆ–ã€Œä¿å­˜ã€æŒ‰é’®
3. å¦‚éœ€æ›´æ–°å·²å­˜åœ¨ç›®æ ‡çš„è¿›åº¦/æ£€æŸ¥ï¼Œä½¿ç”¨ API æ“ä½œ`.trim()});$t(async()=>{const l=await zt.list().catch(()=>({data:[]}));z.value=(l.data||[]).filter(e=>!e.system),B.value=z.value[0]?.id||"",await E()}),We(we,l=>{if(!l)return;new ResizeObserver(n=>{n[0]&&(le.value=n[0].contentRect.width)}).observe(l),le.value=l.getBoundingClientRect().width},{immediate:!0}),We(ee,async l=>{l==="records"&&u.value&&await dt(u.value.id)});async function E(){try{const l=await Y.list();if(oe.value=l.data||[],u.value){const e=oe.value.find(n=>n.id===u.value.id);e&&(u.value=e)}}catch{}}async function dt(l){he.value=!0;try{const e=await Y.listCheckRecords(l);re.value=(e.data||[]).slice().reverse()}catch{re.value=[]}finally{he.value=!1}}function Te(l){u.value=l,N.value=!1,ee.value="basic",Object.assign(i,{title:l.title,description:l.description||"",type:l.type,agentIds:[...l.agentIds||[]],status:l.status,progress:l.progress,startAt:P(l.startAt)?l.startAt:"",endAt:P(l.endAt)?l.endAt:"",milestones:(l.milestones||[]).map(e=>({...e}))})}function Ie(){u.value=null,N.value=!0,ee.value="basic",Ee.value=Date.now(),Object.assign(i,{title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]})}async function Be(){if(!i.title.trim()){T.warning("è¯·å¡«å†™ç›®æ ‡æ ‡é¢˜");return}ue.value=!0;const l={title:i.title,description:i.description||void 0,type:i.type,agentIds:i.agentIds,status:i.status,progress:i.progress,startAt:i.startAt||void 0,endAt:i.endAt||void 0,milestones:i.milestones.map(e=>({...e,id:e.id||"ms-"+Math.random().toString(36).slice(2,10)}))};try{if(u.value)await Y.update(u.value.id,l),T.success("ä¿å­˜æˆåŠŸ"),await E();else{const e=await Y.create(l);T.success("åˆ›å»ºæˆåŠŸ"),N.value=!1,await E();const n=oe.value.find(m=>m.id===e.data.id)||e.data;Te(n)}}catch(e){T.error(e.response?.data?.error||"æ“ä½œå¤±è´¥")}finally{ue.value=!1}}async function ut(){if(u.value)try{await Y.delete(u.value.id),T.success("å·²åˆ é™¤"),u.value=null,await E()}catch{T.error("åˆ é™¤å¤±è´¥")}}function Re(){i.milestones.push({id:"ms-"+Math.random().toString(36).slice(2,10),title:"",dueAt:"",done:!1,agentIds:[]})}function rt(){Object.assign(M,{name:"",agentId:z.value[0]?.id||"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),me.value="0 9 * * 1",te.value=!0}function mt(l){l!=="custom"&&(M.schedule=l)}async function ct(){if(!M.name.trim()){T.warning("è¯·å¡«å†™æ£€æŸ¥åç§°");return}if(!M.agentId){T.warning("è¯·é€‰æ‹©æ‰§è¡Œæˆå‘˜");return}if(u.value)try{await Y.addCheck(u.value.id,{...M}),T.success("æ·»åŠ æˆåŠŸ"),te.value=!1;const l=await Y.get(u.value.id);u.value=l.data,await E()}catch(l){T.error(l.response?.data?.error||"æ·»åŠ å¤±è´¥")}}async function pt(l){if(u.value)try{await Y.updateCheck(u.value.id,l.id,{enabled:l.enabled})}catch{T.error("æ›´æ–°å¤±è´¥")}}async function vt(l){if(u.value)try{await Y.runCheck(u.value.id,l.id),T.success("å·²è§¦å‘æ£€æŸ¥")}catch(e){T.error(e.response?.data?.error||"è§¦å‘å¤±è´¥")}}async function ft(l){if(u.value)try{await Gt.confirm(`ç¡®å®šåˆ é™¤æ£€æŸ¥è®¡åˆ’ã€Œ${l.name}ã€ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{type:"warning"}),await Y.removeCheck(u.value.id,l.id),T.success("å·²åˆ é™¤");const e=await Y.get(u.value.id);u.value=e.data,await E()}catch(e){e!=="cancel"&&T.error("åˆ é™¤å¤±è´¥")}}const Ee=b(0),Oe=S(()=>B.value?u.value?`goal-${u.value.id}-${B.value}`:`goals-new-${Ee.value}-${B.value}`:"");function gt(l){setTimeout(()=>E(),2e3);const e=c=>{try{const k=JSON.parse(c);if(k.action==="fill_goal"&&k.data)return _t(k.data),!0}catch{}return!1},n=l.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(n?.[1]&&e(n[1]))return;const m=l.match(/(\{"action"\s*:\s*"fill_goal"[\s\S]*?\})/);m?.[1]&&e(m[1])}function _t(l){!N.value&&!u.value&&Ie(),l.title&&(i.title=l.title),l.description&&(i.description=l.description),l.type&&(i.type=l.type),l.status&&(i.status=l.status),typeof l.progress=="number"&&(i.progress=l.progress),l.agentIds&&Array.isArray(l.agentIds)&&(i.agentIds=l.agentIds),l.startAt&&(i.startAt=l.startAt),l.endAt&&(i.endAt=l.endAt),l.milestones&&Array.isArray(l.milestones)&&(i.milestones=l.milestones.map(e=>({id:e.id||"ms-"+Math.random().toString(36).slice(2,10),title:e.title||"",dueAt:e.dueAt||"",done:!!e.done,agentIds:e.agentIds||[]}))),T.success("AI å·²å¡«å†™è¡¨å•ï¼Œç¡®è®¤åŽç‚¹å‡»ä¿å­˜")}function P(l){if(!l)return!1;const e=new Date(l);return!isNaN(e.getTime())&&e.getFullYear()>1970}function yt(l){return P(l.startAt)&&P(l.endAt)}function bt(l){const{start:e,end:n}=W.value,m=n.getTime()-e.getTime();return Math.max(1,(new Date(l.endAt).getTime()-new Date(l.startAt).getTime())/m*100)}function ht(l){const{start:e,end:n}=W.value,m=n.getTime()-e.getTime(),c=new Date(l.startAt).getTime(),k=new Date(l.endAt).getTime(),U=Math.max(0,(c-e.getTime())/m*100),p=Math.max(1,(k-c)/m*100),_=l.agentIds?.[0]&&R.value[l.agentIds[0]]?R.value[l.agentIds[0]]:"#409eff",v=l.agentIds?.[1]&&R.value[l.agentIds[1]]?R.value[l.agentIds[1]]:_;return{left:`${U}%`,width:`${p}%`,background:l.agentIds?.length>1?`linear-gradient(90deg,${_},${v})`:_}}function wt(l){const{start:e,end:n}=W.value;return P(l.dueAt)?`${(new Date(l.dueAt).getTime()-e.getTime())/(n.getTime()-e.getTime())*100}%`:"-100%"}function kt(l,e,n){const m=[],c=e.getTime()-l.getTime();if(c<=0)return m;const k=_=>((_.getTime()-l.getTime())/c*100).toFixed(2)+"%";let U="",p;if(n.kind==="minute")p=new Date(l),p.setSeconds(0,0),p.setMinutes(Math.floor(p.getMinutes()/n.step)*n.step);else if(n.kind==="hour")p=new Date(l),p.setMinutes(0,0,0),p.setHours(Math.floor(p.getHours()/n.step)*n.step);else if(n.kind==="day")p=new Date(l.getFullYear(),l.getMonth(),l.getDate());else if(n.kind==="week"){p=new Date(l.getFullYear(),l.getMonth(),l.getDate());const _=p.getDay();p.setDate(p.getDate()-(_===0?6:_-1))}else if(n.kind==="month"){const _=l.getMonth();p=new Date(l.getFullYear(),Math.floor(_/n.step)*n.step,1)}else p=new Date(Math.floor(l.getFullYear()/n.step)*n.step,0,1);for(;p.getTime()<=e.getTime();){const _=p.getFullYear(),v=p.getMonth()+1,G=p.getDate(),ae=p.getHours(),O=p.getMinutes();let F="",X="";n.kind==="minute"||n.kind==="hour"?(F=`${_}-${v}-${G}`,X=`${v}/${G}`):n.kind==="day"||n.kind==="week"?(F=`${_}-${v}`,X=v===1?`${_}å¹´`:`${v}æœˆ`):n.kind==="month"&&(F=String(_),X=String(_));const K=F&&F!==U?X:void 0;K&&(U=F);let L="";n.kind==="minute"?L=`${String(ae).padStart(2,"0")}:${String(O).padStart(2,"0")}`:n.kind==="hour"?L=`${String(ae).padStart(2,"0")}æ—¶`:n.kind==="day"?L=String(G):n.kind==="week"?L=`${v}/${G}`:n.kind==="month"?L=`${v}æœˆ`:L=String(_),m.push({label:L,yearMark:K,left:k(p)}),n.kind==="minute"?p.setMinutes(p.getMinutes()+n.step):n.kind==="hour"?p.setHours(p.getHours()+n.step):n.kind==="day"||n.kind==="week"?p.setDate(p.getDate()+n.step):n.kind==="month"?p.setMonth(p.getMonth()+n.step):p.setFullYear(p.getFullYear()+n.step)}return m}function Pe(l){return l.status==="completed"?"#67c23a":l.progress>=80?"#409eff":l.progress>=40?"#e6a23c":"#909399"}function Xe(l){return{draft:"è‰ç¨¿",active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[l]??l}function je(l){return{draft:"info",active:"",completed:"success",cancelled:"danger"}[l]??"info"}function fe(l){return P(l)?new Date(l).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}):"â€”"}function Vt(l){if(!l)return"";const e=new Date(l);return isNaN(e.getTime())?"":e.toLocaleString("zh-CN")}return(l,e)=>{const n=y("el-icon"),m=y("el-button"),c=y("el-option"),k=y("el-select"),U=y("el-tag"),p=y("el-progress"),_=y("el-input"),v=y("el-form-item"),G=y("el-radio-button"),ae=y("el-radio-group"),O=y("el-date-picker"),F=y("el-slider"),X=y("el-checkbox"),K=y("el-form"),L=y("el-popconfirm"),De=y("el-tab-pane"),se=y("el-table-column"),At=y("el-text"),Ze=y("el-switch"),Mt=y("el-table"),qe=y("el-empty"),Ct=y("el-timeline-item"),Tt=y("el-timeline"),It=y("el-tabs"),Dt=y("el-dialog");return d(),r("div",Bt,[o("div",{class:"gs-sidebar",style:D({width:_e.value+"px"})},[o("div",Rt,[e[34]||(e[34]=o("span",{class:"sidebar-title"},"ç›®æ ‡è§„åˆ’",-1)),o("div",Et,[a(m,{size:"small",circle:"",onClick:E},{default:s(()=>[a(n,null,{default:s(()=>[a(A(Yt))]),_:1})]),_:1}),a(m,{size:"small",type:"primary",circle:"",onClick:Ie},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ne))]),_:1})]),_:1})])]),o("div",Ot,[a(k,{modelValue:ie.value,"onUpdate:modelValue":e[0]||(e[0]=t=>ie.value=t),placeholder:"æ‰€æœ‰çŠ¶æ€",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"]),a(k,{modelValue:de.value,"onUpdate:modelValue":e[1]||(e[1]=t=>de.value=t),placeholder:"æ‰€æœ‰æˆå‘˜",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[(d(!0),r(V,null,C(z.value,t=>(d(),$(c,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",Pt,[N.value?(d(),r("div",Xt,[o("div",jt,[o("span",Zt,f(i.title.trim()||"æ–°ç›®æ ‡â€¦"),1),a(U,{type:"info",size:"small",effect:"plain"},{default:s(()=>[...e[35]||(e[35]=[h("è‰ç¨¿",-1)])]),_:1})]),e[36]||(e[36]=o("div",{class:"gi-new-hint"},"å°šæœªä¿å­˜",-1))])):I("",!0),ce.value.length===0&&!N.value?(d(),r("div",qt,"æš‚æ— ç›®æ ‡")):I("",!0),(d(!0),r(V,null,C(ce.value,t=>(d(),r("div",{key:t.id,class:j(["goal-item",{active:u.value?.id===t.id}]),onClick:g=>Te(t)},[o("div",Jt,[o("span",Kt,f(t.title),1),a(U,{type:je(t.status),size:"small",effect:"plain"},{default:s(()=>[h(f(Xe(t.status)),1)]),_:2},1032,["type"])]),o("div",Qt,[o("div",{class:"gi-progress-bar",style:D({width:t.progress+"%",background:Pe(t)})},null,4),o("span",el,f(t.progress)+"%",1)]),o("div",tl,[o("div",ll,[(d(!0),r(V,null,C((t.agentIds||[]).slice(0,3),g=>(d(),r("div",{key:g,class:"gi-avatar",style:D({background:R.value[g]||"#6366f1"})},f((Z.value[g]||g)[0]),5))),128)),(t.agentIds||[]).length>3?(d(),r("span",al,"+"+f(t.agentIds.length-3),1)):I("",!0)]),o("span",sl,f(fe(t.startAt))+" â€” "+f(fe(t.endAt)),1)])],10,Wt))),128))])],4),o("div",{class:j(["gs-handle",{dragging:Q.value==="side"}]),onMousedown:e[2]||(e[2]=t=>ze(t,"side"))},[...e[37]||(e[37]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",nl,[!u.value&&!N.value?(d(),r("div",ol,[o("div",il,[o("span",dl,[a(n,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:s(()=>[a(A(ge))]),_:1}),e[38]||(e[38]=h(" ç›®æ ‡æ€»è§ˆ Â· ç”˜ç‰¹å›¾ ",-1))]),a(m,{type:"primary",size:"small",onClick:Ie},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ne))]),_:1}),e[39]||(e[39]=h(" æ–°å»ºç›®æ ‡ ",-1))]),_:1})]),ce.value.length===0?(d(),r("div",ul,[a(n,{size:"48",color:"#c0c4cc"},{default:s(()=>[a(A(ge))]),_:1}),e[40]||(e[40]=o("p",null,"æš‚æ— ç›®æ ‡ï¼Œç‚¹å‡»æ–°å»ºå¼€å§‹è§„åˆ’",-1))])):(d(),r("div",{key:1,class:j(["gantt-wrap",{"is-dragging":ke.value}]),onWheel:Je(nt,["prevent"]),onMousedown:at,onMousemove:st,onMouseup:Fe,onMouseleave:Je(Fe,["self"])},[o("div",rl,[o("div",ml,[o("span",cl,f(Se.value.label)+"/æ ¼ â†•ç¼©æ”¾",1)]),o("div",{class:"gantt-timeline-col",ref_key:"ganttTimelineRef",ref:we},[o("div",pl,[(d(!0),r(V,null,C(He.value.filter(t=>t.yearMark),t=>(d(),r("div",{key:"yr-"+t.left,class:"gantt-year-label",style:D({left:t.left})},f(t.yearMark),5))),128))]),o("div",vl,[(d(!0),r(V,null,C(He.value,t=>(d(),r("div",{key:t.label+t.left,class:"gantt-month-label",style:D({left:t.left})},f(t.label),5))),128))])],512)]),o("div",fl,[o("div",gl,[e[41]||(e[41]=o("div",{class:"gantt-label-col"},null,-1)),o("div",_l,[(d(!0),r(V,null,C(A(lt),t=>(d(),r("div",{key:"gv-"+t.label,class:"gantt-grid-line",style:D({left:t.left})},null,4))),128)),Le.value!==null?(d(),r("div",{key:0,class:"gantt-today-line",style:D({left:Le.value})},null,4)):I("",!0)])]),(d(!0),r(V,null,C(ce.value,t=>(d(),r("div",{key:t.id,class:j(["gantt-row",{"is-selected":w.value?.id===t.id}]),onClick:g=>ot(t)},[o("div",bl,[o("div",hl,[o("div",wl,[(d(!0),r(V,null,C((t.agentIds||[]).slice(0,2),g=>(d(),r("div",{key:g,class:"gantt-avatar",style:D({background:R.value[g]||"#409eff"})},f((Z.value[g]||g).slice(0,1)),5))),128))]),o("span",kl,f(t.title),1),o("span",{class:j(["gantt-pct","s-"+t.status])},f(t.progress)+"%",3)])]),o("div",Vl,[yt(t)?(d(),r(V,{key:0},[o("div",{class:"gantt-bar",style:D(ht(t))},[o("div",{class:"gantt-bar-progress",style:D({width:t.progress+"%"})},null,4),bt(t)>8?(d(),r("span",Al,f(t.title),1)):I("",!0)],4),(d(!0),r(V,null,C(t.milestones||[],g=>(d(),r(V,{key:g.id},[P(g.dueAt)?(d(),r("div",{key:0,class:j(["gantt-milestone",{done:g.done}]),style:D({left:wt(g)}),title:g.title},null,14,Ml)):I("",!0)],64))),128))],64)):(d(),r("div",Cl,"æœªè®¾ç½®æ—¶é—´èŒƒå›´"))])],10,yl))),128))])],34)),a(Ut,{name:"gsp-slide"},{default:s(()=>[w.value?(d(),r("div",Tl,[o("div",Il,[o("div",Dl,[(d(!0),r(V,null,C((w.value.agentIds||[]).slice(0,3),t=>(d(),r("div",{key:t,class:"gsp-avatar",style:D({background:R.value[t]||"#409eff"})},f((Z.value[t]||t).slice(0,1)),5))),128))]),o("div",xl,[o("span",$l,f(w.value.title),1),a(U,{type:je(w.value.status),size:"small"},{default:s(()=>[h(f(Xe(w.value.status)),1)]),_:1},8,["type"])]),a(m,{type:"primary",size:"small",onClick:e[3]||(e[3]=t=>{Te(w.value),w.value=null})},{default:s(()=>[...e[42]||(e[42]=[h(" æŸ¥çœ‹è¯¦æƒ… â†’ ",-1)])]),_:1}),a(n,{class:"gsp-close",onClick:e[4]||(e[4]=t=>w.value=null)},{default:s(()=>[a(A(St))]),_:1})]),o("div",zl,[o("div",Ul,[e[43]||(e[43]=o("span",{class:"gsp-stat-label"},"è¿›åº¦",-1)),a(p,{percentage:w.value.progress,color:Pe(w.value),"stroke-width":8,style:{flex:"1",margin:"0 10px"}},null,8,["percentage","color"]),o("span",Yl,f(w.value.progress)+"%",1)]),o("div",Sl,[e[44]||(e[44]=o("span",{class:"gsp-stat-label"},"æ—¶é—´",-1)),o("span",Nl,f(fe(w.value.startAt))+" â€” "+f(fe(w.value.endAt)),1)]),w.value.milestones?.length?(d(),r("div",Hl,[e[45]||(e[45]=o("span",{class:"gsp-stat-label"},"é‡Œç¨‹ç¢‘",-1)),o("span",Gl,f(w.value.milestones.filter(t=>t.done).length)+"/"+f(w.value.milestones.length)+" å·²å®Œæˆ ",1)])):I("",!0),w.value.description?(d(),r("div",Fl,f(w.value.description),1)):I("",!0)])])):I("",!0)]),_:1})])):N.value?(d(),r(V,{key:1},[o("div",Ll,[o("div",Bl,[a(n,{style:{color:"#909399"}},{default:s(()=>[a(A(ge))]),_:1}),e[46]||(e[46]=o("span",{class:"crumb-sep"},"æ–°å»º",-1)),e[47]||(e[47]=o("span",{class:"crumb-name"},"ç›®æ ‡",-1))]),o("div",Rl,[a(m,{size:"small",onClick:e[5]||(e[5]=t=>N.value=!1)},{default:s(()=>[...e[48]||(e[48]=[h("å–æ¶ˆ",-1)])]),_:1}),a(m,{size:"small",type:"primary",loading:ue.value,onClick:Be},{default:s(()=>[a(n,null,{default:s(()=>[a(A(Qe))]),_:1}),e[49]||(e[49]=h(" åˆ›å»º ",-1))]),_:1},8,["loading"])])]),o("div",El,[a(K,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(v,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(_,{modelValue:i.title,"onUpdate:modelValue":e[6]||(e[6]=t=>i.title=t),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(v,{label:"æè¿°"},{default:s(()=>[a(_,{modelValue:i.description,"onUpdate:modelValue":e[7]||(e[7]=t=>i.description=t),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç±»åž‹"},{default:s(()=>[a(ae,{modelValue:i.type,"onUpdate:modelValue":e[8]||(e[8]=t=>i.type=t)},{default:s(()=>[a(G,{value:"personal"},{default:s(()=>[...e[50]||(e[50]=[h("ä¸ªäºº",-1)])]),_:1}),a(G,{value:"team"},{default:s(()=>[...e[51]||(e[51]=[h("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(k,{modelValue:i.agentIds,"onUpdate:modelValue":e[9]||(e[9]=t=>i.agentIds=t),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(d(!0),r(V,null,C(z.value,t=>(d(),$(c,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"çŠ¶æ€"},{default:s(()=>[a(k,{modelValue:i.status,"onUpdate:modelValue":e[10]||(e[10]=t=>i.status=t),style:{width:"100%"}},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(O,{modelValue:i.startAt,"onUpdate:modelValue":e[11]||(e[11]=t=>i.startAt=t),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(O,{modelValue:i.endAt,"onUpdate:modelValue":e[12]||(e[12]=t=>i.endAt=t),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),u.value?(d(),$(v,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(F,{modelValue:i.progress,"onUpdate:modelValue":e[13]||(e[13]=t=>i.progress=t),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):I("",!0),a(v,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",Ol,[(d(!0),r(V,null,C(i.milestones,(t,g)=>(d(),r("div",{key:g,class:"milestone-row"},[a(X,{modelValue:t.done,"onUpdate:modelValue":x=>t.done=x},null,8,["modelValue","onUpdate:modelValue"]),a(_,{modelValue:t.title,"onUpdate:modelValue":x=>t.title=x,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(O,{modelValue:t.dueAt,"onUpdate:modelValue":x=>t.dueAt=x,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(m,{type:"danger",size:"small",circle:"",onClick:x=>i.milestones.splice(g,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(A(xe))]),_:1})]),_:1},8,["onClick"])]))),128)),a(m,{size:"small",onClick:Re,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ne))]),_:1}),e[52]||(e[52]=h(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])],64)):u.value?(d(),r(V,{key:2},[o("div",Pl,[o("div",Xl,[a(n,{style:{color:"#909399"}},{default:s(()=>[a(A(ge))]),_:1}),e[53]||(e[53]=o("span",{class:"crumb-sep"},"ç›®æ ‡",-1)),o("span",jl,f(u.value.title),1)]),o("div",Zl,[a(m,{size:"small",type:"primary",loading:ue.value,onClick:Be},{default:s(()=>[a(n,null,{default:s(()=>[a(A(Qe))]),_:1}),e[54]||(e[54]=h(" ä¿å­˜ ",-1))]),_:1},8,["loading"]),a(L,{title:`ç¡®è®¤åˆ é™¤ã€Œ${u.value.title}ã€ï¼Ÿ`,onConfirm:ut},{reference:s(()=>[a(m,{size:"small",type:"danger",plain:""},{default:s(()=>[a(n,null,{default:s(()=>[a(A(xe))]),_:1})]),_:1})]),_:1},8,["title"])])]),a(It,{modelValue:ee.value,"onUpdate:modelValue":e[22]||(e[22]=t=>ee.value=t),class:"editor-tabs"},{default:s(()=>[a(De,{label:"åŸºæœ¬ä¿¡æ¯",name:"basic"},{default:s(()=>[o("div",ql,[a(K,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(v,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(_,{modelValue:i.title,"onUpdate:modelValue":e[14]||(e[14]=t=>i.title=t),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(v,{label:"æè¿°"},{default:s(()=>[a(_,{modelValue:i.description,"onUpdate:modelValue":e[15]||(e[15]=t=>i.description=t),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç±»åž‹"},{default:s(()=>[a(ae,{modelValue:i.type,"onUpdate:modelValue":e[16]||(e[16]=t=>i.type=t)},{default:s(()=>[a(G,{value:"personal"},{default:s(()=>[...e[55]||(e[55]=[h("ä¸ªäºº",-1)])]),_:1}),a(G,{value:"team"},{default:s(()=>[...e[56]||(e[56]=[h("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(k,{modelValue:i.agentIds,"onUpdate:modelValue":e[17]||(e[17]=t=>i.agentIds=t),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(d(!0),r(V,null,C(z.value,t=>(d(),$(c,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"çŠ¶æ€"},{default:s(()=>[a(k,{modelValue:i.status,"onUpdate:modelValue":e[18]||(e[18]=t=>i.status=t),style:{width:"100%"}},{default:s(()=>[a(c,{label:"è‰ç¨¿",value:"draft"}),a(c,{label:"è¿›è¡Œä¸­",value:"active"}),a(c,{label:"å·²å®Œæˆ",value:"completed"}),a(c,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(O,{modelValue:i.startAt,"onUpdate:modelValue":e[19]||(e[19]=t=>i.startAt=t),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(v,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(O,{modelValue:i.endAt,"onUpdate:modelValue":e[20]||(e[20]=t=>i.endAt=t),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),u.value?(d(),$(v,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(F,{modelValue:i.progress,"onUpdate:modelValue":e[21]||(e[21]=t=>i.progress=t),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):I("",!0),a(v,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",Wl,[(d(!0),r(V,null,C(i.milestones,(t,g)=>(d(),r("div",{key:g,class:"milestone-row"},[a(X,{modelValue:t.done,"onUpdate:modelValue":x=>t.done=x},null,8,["modelValue","onUpdate:modelValue"]),a(_,{modelValue:t.title,"onUpdate:modelValue":x=>t.title=x,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(O,{modelValue:t.dueAt,"onUpdate:modelValue":x=>t.dueAt=x,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(m,{type:"danger",size:"small",circle:"",onClick:x=>i.milestones.splice(g,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(A(xe))]),_:1})]),_:1},8,["onClick"])]))),128)),a(m,{size:"small",onClick:Re,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ne))]),_:1}),e[57]||(e[57]=h(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1}),a(De,{label:"å®šæœŸæ£€æŸ¥",name:"checks"},{default:s(()=>[o("div",Jl,[o("div",Kl,[a(m,{type:"primary",size:"small",onClick:rt},{default:s(()=>[a(n,null,{default:s(()=>[a(A(ne))]),_:1}),e[58]||(e[58]=h(" æ·»åŠ æ£€æŸ¥ ",-1))]),_:1})]),a(Mt,{data:u.value.checks,size:"small",stripe:"",class:"checks-table"},{default:s(()=>[a(se,{prop:"name",label:"åç§°","min-width":"120"}),a(se,{label:"é¢‘çŽ‡","min-width":"140"},{default:s(({row:t})=>[o("code",Ql,f(t.schedule),1),a(At,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[h(f(t.tz||"Asia/Shanghai"),1)]),_:2},1024)]),_:1}),a(se,{label:"æˆå‘˜",width:"90"},{default:s(({row:t})=>[h(f(Z.value[t.agentId]||t.agentId),1)]),_:1}),a(se,{label:"å¯ç”¨",width:"60"},{default:s(({row:t})=>[a(Ze,{modelValue:t.enabled,"onUpdate:modelValue":g=>t.enabled=g,size:"small",onChange:g=>pt(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(se,{label:"æ“ä½œ",width:"130"},{default:s(({row:t})=>[a(m,{size:"small",link:"",onClick:g=>vt(t)},{default:s(()=>[...e[59]||(e[59]=[h("ç«‹å³è¿è¡Œ",-1)])]),_:1},8,["onClick"]),a(m,{size:"small",link:"",type:"danger",onClick:g=>ft(t)},{default:s(()=>[...e[60]||(e[60]=[h("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),u.value.checks?.length?I("",!0):(d(),$(qe,{key:0,description:"æš‚æ— æ£€æŸ¥è®¡åˆ’","image-size":60}))])]),_:1}),a(De,{label:"æ£€æŸ¥è®°å½•",name:"records"},{default:s(()=>[o("div",ea,[he.value?(d(),r("div",ta,[a(n,{class:"is-loading",size:"24"},{default:s(()=>[a(A(Nt))]),_:1})])):re.value.length?(d(),$(Tt,{key:1,class:"records-timeline"},{default:s(()=>[(d(!0),r(V,null,C(re.value,t=>(d(),$(Ct,{key:t.id,timestamp:Vt(t.runAt),type:t.status==="ok"?"success":"danger",placement:"top"},{default:s(()=>[o("div",la,[o("div",aa,[o("div",{class:"rec-avatar",style:D({background:R.value[t.agentId]||"#409eff"})},f((Z.value[t.agentId]||"?")[0]),5),o("span",sa,f(Z.value[t.agentId]||t.agentId),1),a(U,{type:t.status==="ok"?"success":"danger",size:"small"},{default:s(()=>[h(f(t.status),1)]),_:2},1032,["type"])]),o("div",na,f(t.output||"ï¼ˆæ— è¾“å‡ºï¼‰"),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})):(d(),$(qe,{key:2,description:"æš‚æ— æ£€æŸ¥è®°å½•","image-size":60}))])]),_:1})]),_:1},8,["modelValue"])],64)):I("",!0)]),o("div",{class:j(["gs-handle",{dragging:Q.value==="chat"}]),onMousedown:e[23]||(e[23]=t=>ze(t,"chat"))},[...e[61]||(e[61]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",{class:"gs-chat",style:D({width:ye.value+"px"})},[o("div",oa,[a(n,null,{default:s(()=>[a(A(Ht))]),_:1}),e[62]||(e[62]=o("span",null,"AI ç›®æ ‡åŠ©æ‰‹",-1)),a(k,{modelValue:B.value,"onUpdate:modelValue":e[24]||(e[24]=t=>B.value=t),size:"small",style:{"margin-left":"auto",width:"110px"},placeholder:"é€‰æ‹©æˆå‘˜"},{default:s(()=>[(d(!0),r(V,null,C(z.value,t=>(d(),$(c,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",ia,[B.value?(d(),$(Ft,{key:Oe.value,"agent-id":B.value,"session-id":Oe.value,context:it.value,"welcome-message":u.value?`æ­£åœ¨æŸ¥çœ‹ç›®æ ‡ã€Œ${u.value.title}ã€ï¼Œæˆ‘å¯ä»¥å¸®ä½ ä¿®æ”¹ç›®æ ‡ä¿¡æ¯ã€æ·»åŠ é‡Œç¨‹ç¢‘æˆ–è®¾ç½®å®šæœŸæ£€æŸ¥ã€‚`:"ä½ å¥½ï¼æˆ‘å¯ä»¥å¸®ä½ åˆ›å»ºç›®æ ‡ï¼Œè¯´ä¸€ä¸‹éœ€æ±‚å³å¯ï¼Œæˆ‘ä¼šè‡ªåŠ¨å¡«å†™è¡¨å•ã€‚",examples:u.value?["å¸®æˆ‘æŠŠè¿›åº¦æ›´æ–°åˆ° 60%","æ·»åŠ 3ä¸ªé‡Œç¨‹ç¢‘","æ¯å‘¨ä¸€æ£€æŸ¥è¿™ä¸ªç›®æ ‡"]:["å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿç›®æ ‡ï¼šQ2ç”¨æˆ·å¢žé•¿ï¼Œ3æœˆ1æ—¥åˆ°6æœˆ30æ—¥","ä¸ªäººç›®æ ‡ï¼šå­¦ä¹  Go è¯­è¨€ï¼Œæœ¬æœˆå®Œæˆ"],height:"100%",onResponse:gt},null,8,["agent-id","session-id","context","welcome-message","examples"])):I("",!0)])],4),a(Dt,{modelValue:te.value,"onUpdate:modelValue":e[33]||(e[33]=t=>te.value=t),title:"æ·»åŠ å®šæœŸæ£€æŸ¥",width:"480px"},{footer:s(()=>[a(m,{onClick:e[32]||(e[32]=t=>te.value=!1)},{default:s(()=>[...e[64]||(e[64]=[h("å–æ¶ˆ",-1)])]),_:1}),a(m,{type:"primary",onClick:ct},{default:s(()=>[...e[65]||(e[65]=[h("æ·»åŠ ",-1)])]),_:1})]),default:s(()=>[a(K,{model:M,"label-width":"90px",size:"small"},{default:s(()=>[a(v,{label:"åç§°",required:""},{default:s(()=>[a(_,{modelValue:M.name,"onUpdate:modelValue":e[25]||(e[25]=t=>M.name=t),placeholder:"å¦‚ï¼šæ¯å‘¨è¿›åº¦æ£€æŸ¥"},null,8,["modelValue"])]),_:1}),a(v,{label:"æ‰§è¡Œæˆå‘˜",required:""},{default:s(()=>[a(k,{modelValue:M.agentId,"onUpdate:modelValue":e[26]||(e[26]=t=>M.agentId=t),style:{width:"100%"}},{default:s(()=>[(d(!0),r(V,null,C(z.value,t=>(d(),$(c,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"æ£€æŸ¥é¢‘çŽ‡"},{default:s(()=>[a(k,{modelValue:me.value,"onUpdate:modelValue":e[27]||(e[27]=t=>me.value=t),style:{width:"100%"},onChange:mt},{default:s(()=>[a(c,{label:"æ¯å¤©ä¸Šåˆ9ç‚¹",value:"0 9 * * *"}),a(c,{label:"æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹",value:"0 9 * * 1"}),a(c,{label:"æ¯å‘¨äº”ä¸‹åˆ5ç‚¹",value:"0 17 * * 5"}),a(c,{label:"æ¯æœˆ1æ—¥ä¸Šåˆ9ç‚¹",value:"0 9 1 * *"}),a(c,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),me.value==="custom"?(d(),$(v,{key:0,label:"Cron"},{default:s(()=>[a(_,{modelValue:M.schedule,"onUpdate:modelValue":e[28]||(e[28]=t=>M.schedule=t),placeholder:"0 9 * * 1"},null,8,["modelValue"])]),_:1})):I("",!0),a(v,{label:"æ—¶åŒº"},{default:s(()=>[a(k,{modelValue:M.tz,"onUpdate:modelValue":e[29]||(e[29]=t=>M.tz=t),style:{width:"100%"}},{default:s(()=>[a(c,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),a(c,{label:"UTC",value:"UTC"}),a(c,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"æ£€æŸ¥æç¤ºè¯"},{default:s(()=>[a(_,{modelValue:M.prompt,"onUpdate:modelValue":e[30]||(e[30]=t=>M.prompt=t),type:"textarea",rows:3,placeholder:"å¯ç”¨å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt}"},null,8,["modelValue"]),e[63]||(e[63]=o("div",{style:{"font-size":"11px",color:"#94a3b8","margin-top":"3px"}}," å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt} {goal.startAt} {goal.status} ",-1))]),_:1}),a(v,{label:"å¯ç”¨"},{default:s(()=>[a(Ze,{modelValue:M.enabled,"onUpdate:modelValue":e[31]||(e[31]=t=>M.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),fa=Lt(ra,[["__scopeId","data-v-21184c3b"]]);export{fa as default};
