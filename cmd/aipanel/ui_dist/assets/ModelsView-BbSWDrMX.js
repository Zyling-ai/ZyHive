import{d as ce,o as me,m as V,c as u,e as i,b as a,w as o,l as k,g as A,r as v,h as d,i as n,n as h,K as ye,f as r,F as j,q as L,t as p,a7 as ve,a8 as fe,z as be,a1 as _e,a9 as ge,aa as ke,y as he,I as G,E as x,B as xe}from"./index-DS0rbJSH.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ue={class:"models-page"},we={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Ve={style:{"font-weight":"600"}},Ie={style:{display:"flex","flex-wrap":"wrap",gap:"8px","margin-top":"6px","align-items":"center"}},Ae={style:{"font-size":"12px",color:"#606266"}},Ce={key:1,style:{"font-size":"12px",color:"#909399"}},ze={class:"provider-grid"},Me=["onClick"],He={class:"provider-icon"},De={class:"provider-label"},Pe={class:"provider-guide"},Fe={class:"guide-row"},$e={class:"guide-text"},qe=["href"],Ee={key:0,class:"guide-row"},Oe={key:1,class:"guide-row"},Be={class:"guide-text"},je={class:"guide-row"},Le=["href"],Se={style:{"font-size":"13px"}},Ne={class:"field-hint"},Re={key:0,style:{color:"var(--el-color-success)"}},Te={key:1},Ge={style:{display:"flex",gap:"8px",width:"100%","align-items":"center"}},Je={key:0,style:{"font-size":"12px",color:"var(--el-color-danger)"}},Qe={key:1,style:{"font-size":"12px",color:"var(--el-color-success)"}},We={key:2,style:{"font-size":"12px",color:"#909399"}},Xe=ce({__name:"ModelsView",setup(Ye){const S=[{key:"anthropic",label:"Anthropic",icon:"ðŸ”®",baseUrl:"https://api.anthropic.com/v1",website:"https://anthropic.com",apiKeyUrl:"https://console.anthropic.com/settings/keys",apiKeyHint:"åœ¨ Anthropic Console åˆ›å»º API Key",keyFormat:"sk-ant-api03-...",modelHint:"å¦‚ claude-sonnet-4-6",compatible:!1},{key:"openai",label:"OpenAI",icon:"ðŸ¤–",baseUrl:"https://api.openai.com/v1",website:"https://openai.com",apiKeyUrl:"https://platform.openai.com/api-keys",apiKeyHint:"åœ¨ OpenAI Platform åˆ›å»º API Key",keyFormat:"sk-proj-...",modelHint:"å¦‚ gpt-4oã€o1-mini",compatible:!0},{key:"deepseek",label:"DeepSeek",icon:"ðŸŒŠ",baseUrl:"https://api.deepseek.com/v1",website:"https://deepseek.com",apiKeyUrl:"https://platform.deepseek.com/api_keys",apiKeyHint:"åœ¨ DeepSeek Platform åˆ›å»º API Key",keyFormat:"sk-...",modelHint:"å¦‚ deepseek-chatã€deepseek-reasoner",compatible:!0},{key:"moonshot",label:"Kimi",icon:"ðŸŒ™",baseUrl:"https://api.moonshot.cn/v1",website:"https://kimi.moonshot.cn",apiKeyUrl:"https://platform.moonshot.cn/console/api-keys",apiKeyHint:"åœ¨æœˆä¹‹æš—é¢å¼€æ”¾å¹³å°åˆ›å»º API Key",keyFormat:"sk-...",modelHint:"å¦‚ moonshot-v1-8kã€moonshot-v1-32k",compatible:!0},{key:"zhipu",label:"æ™ºè°± GLM",icon:"ðŸ§ ",baseUrl:"https://open.bigmodel.cn/api/paas/v4",website:"https://open.bigmodel.cn",apiKeyUrl:"https://open.bigmodel.cn/usercenter/apikeys",apiKeyHint:"åœ¨æ™ºè°± AI å¼€æ”¾å¹³å°åˆ›å»º API Key",keyFormat:"éšæœºå­—ç¬¦ä¸²",modelHint:"å¦‚ glm-4ã€glm-4-flash",compatible:!0},{key:"minimax",label:"MiniMax",icon:"âœ¨",baseUrl:"https://api.minimax.chat/v1",website:"https://minimax.io",apiKeyUrl:"https://platform.minimax.io/user-center/basic-information/interface-key",apiKeyHint:"åœ¨ MiniMax å¼€æ”¾å¹³å°åˆ›å»º API Key",keyFormat:"eyJ...",modelHint:"å¦‚ abab6.5s-chatã€MiniMax-Text-01",compatible:!0},{key:"qwen",label:"é€šä¹‰åƒé—®",icon:"â˜ï¸",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",website:"https://tongyi.aliyun.com",apiKeyUrl:"https://dashscope.console.aliyun.com/apiKey",apiKeyHint:"åœ¨é˜¿é‡Œäº‘ DashScope æŽ§åˆ¶å°èŽ·å– API Key",keyFormat:"sk-...",modelHint:"å¦‚ qwen-turboã€qwen-plusã€qwen-max",compatible:!0},{key:"openrouter",label:"OpenRouter",icon:"ðŸ”€",baseUrl:"https://openrouter.ai/api/v1",website:"https://openrouter.ai",apiKeyUrl:"https://openrouter.ai/keys",apiKeyHint:"åœ¨ OpenRouter åˆ›å»º API Keyï¼Œå¯è®¿é—®æ•°ç™¾ä¸ªæ¨¡åž‹",keyFormat:"sk-or-v1-...",modelHint:"ç‚¹å‡»ã€ŒèŽ·å–å¯ç”¨æ¨¡åž‹ã€åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡åž‹",compatible:!0},{key:"custom",label:"è‡ªå®šä¹‰",icon:"âš™ï¸",baseUrl:"",website:"",apiKeyUrl:"",apiKeyHint:"å¡«å†™ä»»æ„ OpenAI-compatible æŽ¥å£åœ°å€å’Œå¯¹åº”çš„ API Key",modelHint:"æ‰‹åŠ¨å¡«å†™æ¨¡åž‹ ID",compatible:!0}],M=Object.fromEntries(S.map(t=>[t.key,t])),J=S,H=v([]),K=v(!1),I=v(""),$=v(!1),q=v(""),E=v(!1),m=v(""),c=v([]),O=v(""),D=v([]),s=he({id:"",name:"",provider:"anthropic",model:"",apiKey:"",baseUrl:"https://api.anthropic.com",isDefault:!1}),y=G(()=>M[s.provider]||null),U=G(()=>D.value.find(t=>t.provider===s.provider)||null);me(async()=>{await Promise.all([P(),Q()])});function w(t){return M[t]?.baseUrl||"â€”"}async function P(){try{const t=await V.list();H.value=t.data}catch{}}async function Q(){try{const t=await V.envKeys();D.value=t.data.envKeys||[]}catch{}}function W(t){s.provider=t,s.baseUrl=w(t),s.model="",c.value=[],m.value="",t==="openrouter"&&B()}function X(t){const e=c.value.find(f=>f.id===t);e&&(s.name=e.name&&e.name!==e.id?e.name:t),s.id||(s.id=t.replace(/[^a-z0-9]/gi,"-").toLowerCase().replace(/-+/g,"-").replace(/^-|-$/g,""))}function Y(){s.name||(s.name=s.model),s.id||(s.id=s.model.replace(/[^a-z0-9]/gi,"-").toLowerCase().replace(/-+/g,"-").replace(/^-|-$/g,""))}async function B(){if(!s.baseUrl){m.value="è¯·å…ˆå¡«å†™è°ƒç”¨åœ°å€";return}E.value=!0,m.value="",c.value=[];try{const t=await V.probe(s.baseUrl,s.apiKey||void 0,s.provider);c.value=t.data.models||[],c.value.length||(m.value="æœªèŽ·å–åˆ°æ¨¡åž‹åˆ—è¡¨ï¼ˆæŽ¥å£è¿”å›žä¸ºç©ºï¼‰")}catch(t){m.value=t.response?.data?.error||t.message||"èŽ·å–å¤±è´¥"}finally{E.value=!1}}async function Z(t){O.value=t.envVar;try{if(H.value.find(f=>f.provider===t.provider)){x.warning(`${t.provider} å·²æœ‰é…ç½®ï¼Œè¯·ç›´æŽ¥ç¼–è¾‘`);return}I.value="",c.value=[],m.value="",Object.assign(s,{id:t.provider+"-default",name:(M[t.provider]?.label||t.provider)+" (env)",provider:t.provider,model:"",apiKey:"",baseUrl:t.baseUrl||w(t.provider),isDefault:H.value.length===0}),K.value=!0,t.provider==="openrouter"&&B()}finally{O.value=""}}function ee(){I.value="",c.value=[],m.value="",Object.assign(s,{id:"",name:"",provider:"anthropic",model:"",apiKey:"",baseUrl:w("anthropic"),isDefault:!1}),K.value=!0}function le(t){I.value=t.id,c.value=[],m.value="",Object.assign(s,{id:t.id,name:t.name,provider:t.provider,model:t.model,apiKey:t.apiKey,baseUrl:t.baseUrl||w(t.provider),isDefault:t.isDefault}),K.value=!0}async function te(){if(!s.id||!s.provider||!s.model){x.warning("è¯·å¡«å†™å¿…è¦å­—æ®µï¼ˆå”¯ä¸€ID / æä¾›å•† / æ¨¡åž‹ IDï¼‰");return}$.value=!0;try{const t={...s};I.value?await V.update(I.value,t):await V.create({...t,status:"untested"}),x.success("ä¿å­˜æˆåŠŸ"),K.value=!1,P()}catch(t){x.error(t.response?.data?.error||"ä¿å­˜å¤±è´¥")}finally{$.value=!1}}async function ae(t){q.value=t.id;try{const e=await V.test(t.id);e.data.valid?x.success("è¿žæŽ¥æˆåŠŸï¼"):x.error("è¿žæŽ¥å¤±è´¥: "+(e.data.error||"")),P()}catch{x.error("æµ‹è¯•è¯·æ±‚å¤±è´¥")}finally{q.value=""}}async function oe(t){try{await xe.confirm(`ç¡®å®šåˆ é™¤æ¨¡åž‹ "${t.name}"ï¼Ÿ`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await V.delete(t.id),x.success("å·²åˆ é™¤"),P()}catch{}}return(t,e)=>{const f=d("el-icon"),b=d("el-button"),C=d("el-tag"),N=d("el-alert"),g=d("el-table-column"),R=d("el-text"),T=d("el-tooltip"),se=d("el-table"),ie=d("el-card"),_=d("el-form-item"),z=d("el-input"),ne=d("el-option"),re=d("el-select"),de=d("el-switch"),pe=d("el-form"),ue=d("el-dialog");return n(),u("div",Ue,[i("div",we,[e[11]||(e[11]=i("h2",{style:{margin:"0"}},"æ¨¡åž‹é…ç½®",-1)),a(b,{type:"primary",onClick:ee},{default:o(()=>[a(f,null,{default:o(()=>[a(h(ye))]),_:1}),e[10]||(e[10]=r(" æ·»åŠ æ¨¡åž‹ ",-1))]),_:1})]),D.value.length?(n(),k(N,{key:0,type:"success",closable:!1,style:{"margin-bottom":"16px"}},{title:o(()=>[i("span",Ve,[a(f,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:o(()=>[a(h(ve))]),_:1}),e[12]||(e[12]=r("æ£€æµ‹åˆ°ç³»ç»ŸçŽ¯å¢ƒå˜é‡ä¸­çš„ API Key",-1))])]),default:o(()=>[i("div",Ie,[(n(!0),u(j,null,L(D.value,l=>(n(),u("span",{key:l.envVar,style:{display:"flex","align-items":"center",gap:"6px"}},[a(C,{type:"success",size:"small"},{default:o(()=>[r(p(l.envVar),1)]),_:2},1024),i("span",Ae,p(l.masked),1),a(b,{size:"small",type:"success",plain:"",onClick:F=>Z(l),loading:O.value===l.envVar},{default:o(()=>[...e[13]||(e[13]=[r("ä¸€é”®æ·»åŠ ",-1)])]),_:1},8,["onClick","loading"])]))),128))]),e[14]||(e[14]=i("div",{style:{"font-size":"12px",color:"#909399","margin-top":"6px"}},"å·²é…ç½®çš„ Key æ— éœ€é‡å¤æ·»åŠ ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ã€‚",-1))]),_:1})):A("",!0),a(ie,{shadow:"hover"},{default:o(()=>[a(se,{data:H.value,stripe:""},{default:o(()=>[a(g,{label:"æä¾›å•†",width:"110"},{default:o(({row:l})=>[a(C,{size:"small"},{default:o(()=>[r(p(h(M)[l.provider]?.label||l.provider),1)]),_:2},1024)]),_:1}),a(g,{prop:"name",label:"åç§°","min-width":"130"}),a(g,{label:"æ¨¡åž‹ ID","min-width":"190"},{default:o(({row:l})=>[a(R,{type:"info",size:"small"},{default:o(()=>[r(p(l.model),1)]),_:2},1024)]),_:1}),a(g,{label:"è°ƒç”¨åœ°å€","min-width":"190"},{default:o(({row:l})=>[a(T,{content:l.baseUrl||w(l.provider),placement:"top"},{default:o(()=>[a(R,{type:"info",size:"small",truncated:"",style:{"max-width":"180px",display:"block"}},{default:o(()=>[r(p(l.baseUrl||w(l.provider)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),a(g,{label:"API Key",width:"160"},{default:o(({row:l})=>[l.apiKey?(n(),u("code",Ce,p(l.apiKey),1)):(n(),k(C,{key:0,type:"info",size:"small",style:{"font-size":"11px"}},{default:o(()=>[a(f,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:o(()=>[a(h(fe))]),_:1}),e[15]||(e[15]=r("ä½¿ç”¨çŽ¯å¢ƒå˜é‡ ",-1))]),_:1}))]),_:1}),a(g,{label:"çŠ¶æ€",width:"90"},{default:o(({row:l})=>[a(C,{type:l.status==="ok"?"success":l.status==="error"?"danger":"info",size:"small"},{default:o(()=>[r(p(l.status==="ok"?"âœ“ æœ‰æ•ˆ":l.status==="error"?"âœ— æ— æ•ˆ":"? æœªæµ‹"),1)]),_:2},1032,["type"])]),_:1}),a(g,{label:"é»˜è®¤",width:"60"},{default:o(({row:l})=>[l.isDefault?(n(),k(C,{key:0,type:"warning",size:"small"},{default:o(()=>[...e[16]||(e[16]=[r("é»˜è®¤",-1)])]),_:1})):A("",!0)]),_:1}),a(g,{label:"æ“ä½œ",width:"180"},{default:o(({row:l})=>[a(b,{size:"small",onClick:F=>ae(l),loading:q.value===l.id},{default:o(()=>[...e[17]||(e[17]=[r("æµ‹è¯•",-1)])]),_:1},8,["onClick","loading"]),a(b,{size:"small",onClick:F=>le(l)},{default:o(()=>[...e[18]||(e[18]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),a(b,{size:"small",type:"danger",onClick:F=>oe(l)},{default:o(()=>[...e[19]||(e[19]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),a(ue,{modelValue:K.value,"onUpdate:modelValue":e[9]||(e[9]=l=>K.value=l),title:I.value?"ç¼–è¾‘æ¨¡åž‹":"æ·»åŠ æ¨¡åž‹",width:"600px","align-center":""},{footer:o(()=>[a(b,{onClick:e[8]||(e[8]=l=>K.value=!1)},{default:o(()=>[...e[29]||(e[29]=[r("å–æ¶ˆ",-1)])]),_:1}),a(b,{type:"primary",onClick:te,loading:$.value},{default:o(()=>[...e[30]||(e[30]=[r("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:o(()=>[a(pe,{model:s,"label-width":"90px",style:{"padding-right":"8px"}},{default:o(()=>[a(_,{label:"æä¾›å•†",required:""},{default:o(()=>[i("div",ze,[(n(!0),u(j,null,L(h(J),l=>(n(),u("button",{key:l.key,type:"button",class:be(["provider-card",{active:s.provider===l.key}]),onClick:F=>W(l.key)},[i("span",He,p(l.icon),1),i("span",De,p(l.label),1)],10,Me))),128))])]),_:1}),y.value?(n(),k(_,{key:0,label:" ","label-width":"90px"},{default:o(()=>[i("div",Pe,[i("div",Fe,[e[20]||(e[20]=i("span",{class:"guide-icon"},"ðŸ”‘",-1)),i("span",$e,p(y.value.apiKeyHint),1),i("a",{href:y.value.apiKeyUrl,target:"_blank",class:"guide-link"},"èŽ·å– API Key â†’",8,qe)]),y.value.compatible?(n(),u("div",Ee,[...e[21]||(e[21]=[i("span",{class:"guide-icon"},"ðŸ”—",-1),i("span",{class:"guide-text"},"OpenAI å…¼å®¹æŽ¥å£ï¼Œä¹Ÿæ”¯æŒå…¶ä»–å…¼å®¹æ­¤æ ¼å¼çš„ä¸­è½¬æœåŠ¡",-1)])])):A("",!0),y.value.keyFormat?(n(),u("div",Oe,[e[23]||(e[23]=i("span",{class:"guide-icon"},"ðŸ“‹",-1)),i("span",Be,[e[22]||(e[22]=r("Key æ ¼å¼ï¼š",-1)),i("code",null,p(y.value.keyFormat),1)])])):A("",!0),i("div",je,[e[24]||(e[24]=i("span",{class:"guide-icon"},"ðŸŒ",-1)),i("a",{href:y.value.website,target:"_blank",class:"guide-link"},"è®¿é—®å®˜ç½‘",8,Le)])])]),_:1})):A("",!0),a(_,{label:"è°ƒç”¨åœ°å€",required:""},{default:o(()=>[a(z,{modelValue:s.baseUrl,"onUpdate:modelValue":e[1]||(e[1]=l=>s.baseUrl=l),placeholder:y.value?.baseUrl||"https://...",clearable:""},{append:o(()=>[a(T,{content:"æ¢å¤æä¾›å•†é»˜è®¤åœ°å€",placement:"top"},{default:o(()=>[a(b,{onClick:e[0]||(e[0]=l=>s.baseUrl=w(s.provider)),icon:h(_e)},null,8,["icon"])]),_:1})]),_:1},8,["modelValue","placeholder"]),e[25]||(e[25]=i("div",{class:"field-hint"},"ä¸­è½¬æœåŠ¡å¡«è¿™é‡Œï¼Œæ¯”å¦‚ https://your-relay.com",-1))]),_:1}),a(_,{label:"API Key"},{default:o(()=>[U.value?(n(),k(N,{key:0,type:"success",closable:!1,style:{"margin-bottom":"8px",padding:"6px 12px"}},{default:o(()=>[i("span",Se,[a(f,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:o(()=>[a(h(ge))]),_:1}),e[26]||(e[26]=r("æ£€æµ‹åˆ° ",-1)),i("code",null,p(U.value.envVar),1),r("ï¼ˆ"+p(U.value.masked)+"ï¼‰â€” ",1),e[27]||(e[27]=i("strong",null,"ä¸å¡« API Key å³å¯è‡ªåŠ¨ä½¿ç”¨",-1))])]),_:1})):A("",!0),a(z,{modelValue:s.apiKey,"onUpdate:modelValue":e[2]||(e[2]=l=>s.apiKey=l),type:"password","show-password":"",placeholder:U.value?"ç•™ç©º = è‡ªåŠ¨è¯»å– "+U.value.envVar:y.value?.keyFormat||"sk-..."},null,8,["modelValue","placeholder"]),i("div",Ne,[!s.apiKey&&U.value?(n(),u("span",Re,"âœ“ ç•™ç©ºåŽå°†è‡ªåŠ¨ä½¿ç”¨ "+p(U.value.envVar)+" çŽ¯å¢ƒå˜é‡",1)):(n(),u("span",Te,"æ‰‹åŠ¨å¡«å†™ä¼˜å…ˆçº§é«˜äºŽçŽ¯å¢ƒå˜é‡"))])]),_:1}),a(_,{label:" ","label-width":"90px"},{default:o(()=>[i("div",Ge,[a(b,{onClick:B,loading:E.value,type:"primary",plain:"",style:{"flex-shrink":"0"}},{default:o(()=>[a(f,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:o(()=>[a(h(ke))]),_:1}),e[28]||(e[28]=r("èŽ·å–å¯ç”¨æ¨¡åž‹ ",-1))]),_:1},8,["loading"]),m.value?(n(),u("span",Je,p(m.value),1)):c.value.length?(n(),u("span",Qe,"èŽ·å–åˆ° "+p(c.value.length)+" ä¸ªæ¨¡åž‹",1)):(n(),u("span",We,"å¡«å†™ Key åŽç‚¹å‡»èŽ·å–ï¼Œæˆ–ç›´æŽ¥æ‰‹åŠ¨å¡«å†™æ¨¡åž‹ ID"))])]),_:1}),a(_,{label:"æ¨¡åž‹ ID",required:""},{default:o(()=>[c.value.length?(n(),k(re,{key:0,modelValue:s.model,"onUpdate:modelValue":e[3]||(e[3]=l=>s.model=l),filterable:"",placeholder:"æœç´¢æˆ–é€‰æ‹©æ¨¡åž‹",style:{width:"100%"},onChange:X},{default:o(()=>[(n(!0),u(j,null,L(c.value,l=>(n(),k(ne,{key:l.id,label:l.name!==l.id?`${l.name}  (${l.id})`:l.id,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(n(),k(z,{key:1,modelValue:s.model,"onUpdate:modelValue":e[4]||(e[4]=l=>s.model=l),placeholder:y.value?.modelHint||"å¦‚ claude-sonnet-4-6",onInput:Y},null,8,["modelValue","placeholder"]))]),_:1}),a(_,{label:"æ˜¾ç¤ºåç§°"},{default:o(()=>[a(z,{modelValue:s.name,"onUpdate:modelValue":e[5]||(e[5]=l=>s.name=l),placeholder:"å¦‚ Claude Sonnet 4.6"},null,8,["modelValue"])]),_:1}),a(_,{label:"å”¯ä¸€ ID"},{default:o(()=>[a(z,{modelValue:s.id,"onUpdate:modelValue":e[6]||(e[6]=l=>s.id=l),placeholder:"å¦‚ claude-sonnetï¼ˆAgent å¼•ç”¨æ—¶ä½¿ç”¨ï¼‰"},null,8,["modelValue"])]),_:1}),a(_,{label:"è®¾ä¸ºé»˜è®¤"},{default:o(()=>[a(de,{modelValue:s.isDefault,"onUpdate:modelValue":e[7]||(e[7]=l=>s.isDefault=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ll=Ke(Xe,[["__scopeId","data-v-b524332c"]]);export{ll as default};
