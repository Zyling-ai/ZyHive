import{d as Mt,P as Me,o as At,A as Dt,ac as q,c as p,e as o,b as a,w as n,t as y,g as U,F as D,q as $,p as S,z as Z,f as V,j as Ze,n as T,ad as Ct,l as H,r as w,y as Ee,I as B,h as k,i as d,a1 as It,K as le,ae as ge,M as Tt,af as Xe,ag as Ae,U as Yt,ab as $t,E as x,B as xt}from"./index-o8tYJBaF.js";import{A as zt}from"./AiChat-DB2bqlw6.js";import{_ as Ut}from"./_plugin-vue_export-helper-DlAUqK2U.js";const St={class:"goals-studio"},Ft={class:"sidebar-top"},Ht={class:"sidebar-acts"},Nt={class:"gs-filter"},Gt={class:"goal-list"},qt={key:0,class:"goal-item goal-item-new active"},Lt={class:"gi-top"},Ot={class:"gi-title gi-title-new"},Bt={key:1,class:"list-empty"},Rt=["onClick"],jt={class:"gi-top"},Pt={class:"gi-title"},Zt={class:"gi-progress-wrap"},Et={class:"gi-progress-num"},Xt={class:"gi-bottom"},Wt={class:"gi-avatars"},Jt={key:0,class:"gi-avatar-more"},Kt={class:"gi-dates"},Qt={class:"gs-editor"},el={key:0,class:"editor-gantt-overview"},tl={class:"overview-header"},ll={class:"overview-title"},al={key:0,class:"gantt-empty"},sl={class:"gantt-header"},nl={class:"gantt-label-col"},ol={class:"gantt-scale-hint"},il={class:"gantt-years"},ul={class:"gantt-months"},dl={class:"gantt-body"},rl={class:"gantt-overlay","aria-hidden":"true"},cl={class:"gantt-timeline-col",style:{position:"relative"}},ml=["onClick"],pl={class:"gantt-label-col"},vl={class:"gantt-label-inner"},gl={class:"gantt-agent-avatars"},fl={class:"gantt-goal-name"},_l={class:"gantt-timeline-col"},yl={key:0,class:"gantt-bar-label"},hl=["title"],bl={key:1,class:"gantt-no-date"},wl={key:0,class:"gantt-summary-panel"},kl={class:"gsp-header"},Vl={class:"gsp-avatars"},Ml={class:"gsp-title-block"},Al={class:"gsp-title"},Dl={class:"gsp-body"},Cl={class:"gsp-stat"},Il={class:"gsp-stat-val"},Tl={class:"gsp-stat"},Yl={class:"gsp-stat-val"},$l={key:0,class:"gsp-stat"},xl={class:"gsp-stat-val"},zl={key:1,class:"gsp-desc"},Ul={class:"editor-toolbar"},Sl={class:"editor-breadcrumb"},Fl={class:"toolbar-acts"},Hl={class:"editor-form"},Nl={style:{width:"100%"}},Gl={class:"editor-toolbar"},ql={class:"editor-breadcrumb"},Ll={class:"crumb-name"},Ol={class:"toolbar-acts"},Bl={class:"editor-form"},Rl={style:{width:"100%"}},jl={class:"tab-panel"},Pl={class:"tab-panel-head"},Zl={class:"code-cell"},El={class:"tab-panel"},Xl={key:0,style:{"text-align":"center",padding:"20px"}},Wl={class:"record-card"},Jl={class:"record-header"},Kl={class:"rec-name"},Ql={class:"rec-output"},ea={class:"chat-panel-head"},ta={class:"chat-wrap"},la=Mt({__name:"GoalsView",setup(aa){const fe=w(260),_e=w(360),J=w("");let De=0,ye=0;function Ce(l,e){J.value=e,De=l.clientX,ye=e==="side"?fe.value:_e.value,document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",Te),l.preventDefault()}function Ie(l){const e=l.clientX-De;J.value==="side"?fe.value=Math.max(200,Math.min(400,ye+e)):_e.value=Math.max(280,Math.min(560,ye-e))}function Te(){J.value="",document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",Te)}const ae=w([]),G=w([]),se=w(""),ne=w(""),m=w(null),L=w(!1),oe=w(!1),K=w("basic"),Q=w(!1),ie=w([]),he=w(!1),ue=w("0 9 * * 1"),R=w(""),i=Ee({title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]}),Y=Ee({name:"",agentId:"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),E=B(()=>{const l={};return G.value.forEach(e=>{l[e.id]=e.name}),l}),j=B(()=>{const l={};return G.value.forEach(e=>{l[e.id]=e.avatarColor||"#409eff"}),l}),ee=B(()=>{let l=[...ae.value];return se.value&&(l=l.filter(e=>e.status===se.value)),ne.value&&(l=l.filter(e=>(e.agentIds||[]).includes(ne.value))),l}),de=["year","quarter","month","week","day","hour","minute"],z=w("month"),Ye={year:3*365*864e5,quarter:18*30.44*864e5|0,month:6*30.44*864e5|0,week:56*864e5,day:30*864e5,hour:72*36e5,minute:4*36e5},re=w(0),ce=w(!1),me=w(!1),$e=w(0),xe=w(0);function We(l){ce.value=!0,me.value=!1,$e.value=l.clientX,xe.value=re.value}function Je(l){if(!ce.value)return;const e=l.clientX-$e.value;if(Math.abs(e)>5&&(me.value=!0),me.value){const r=Ye[z.value],c=pe.value||700;re.value=xe.value-Math.round(e/c*r)}}function ze(){ce.value=!1}Me(z,()=>{re.value=0});const A=w(null);function Ke(l){me.value||(A.value=A.value?.id===l.id?null:l)}const X=B(()=>{const l=ee.value.filter(_=>O(_.startAt)&&O(_.endAt)),e=new Date;let r=e.getTime(),c=e.getTime();l.length&&(r=Math.min(...l.map(_=>new Date(_.startAt).getTime())),c=Math.max(...l.map(_=>new Date(_.endAt).getTime())));const v=Ye[z.value],N=(["year","quarter","month"].includes(z.value)?(r+c)/2-v/2:e.getTime()-v*.05)+re.value,C=N+v,s=new Date(N),u=new Date(C);let g,f;if(z.value==="year")g=new Date(s.getFullYear(),0,1),f=new Date(u.getFullYear()+1,0,1);else if(z.value==="quarter"){const _=Math.floor(s.getMonth()/3)*3;g=new Date(s.getFullYear(),_,1);const M=Math.ceil((u.getMonth()+1)/3)*3;f=M>=12?new Date(u.getFullYear()+1,0,1):new Date(u.getFullYear(),M,1)}else if(z.value==="month")g=new Date(s.getFullYear(),s.getMonth(),1),f=new Date(u.getFullYear(),u.getMonth()+1,1);else if(z.value==="week"){const _=s.getDay();s.setDate(s.getDate()-(_===0?6:_-1)),g=new Date(s.getFullYear(),s.getMonth(),s.getDate());const M=u.getDay();M!==0&&u.setDate(u.getDate()+(7-M)),f=new Date(u.getFullYear(),u.getMonth(),u.getDate())}else if(z.value==="day")g=new Date(s.getFullYear(),s.getMonth(),s.getDate()),f=new Date(u.getFullYear(),u.getMonth(),u.getDate()+1);else if(z.value==="hour"){const _=Math.floor(s.getHours()/6)*6;g=new Date(s.getFullYear(),s.getMonth(),s.getDate(),_);const M=Math.ceil((u.getHours()+1)/6)*6;M>=24?f=new Date(u.getFullYear(),u.getMonth(),u.getDate()+1,0):f=new Date(u.getFullYear(),u.getMonth(),u.getDate(),M)}else{const _=Math.floor(s.getMinutes()/30)*30;g=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),_);const M=Math.ceil((u.getMinutes()+1)/30)*30;M>=60?f=new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours()+1,0):f=new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),M)}return{start:g,end:f}}),Ue=B(()=>ft(X.value.start,X.value.end,z.value)),pe=w(700),Se=w(null),Fe=B(()=>{const l=Ue.value,e=pe.value;if(!l.length||!e)return l;const c=Math.max(1,Math.floor(e/50));if(l.length<=c)return l;const v=Math.ceil(l.length/c);return l.filter((b,I)=>I%v===0)}),Qe=Ue;function et(l){l.preventDefault();const e=de.indexOf(z.value);l.deltaY<0&&e<de.length-1?z.value=de[e+1]:l.deltaY>0&&e>0&&(z.value=de[e-1])}const He=B(()=>{const{start:l,end:e}=X.value,r=Date.now();return r<l.getTime()||r>e.getTime()?null:`${(r-l.getTime())/(e.getTime()-l.getTime())*100}%`}),tt=B(()=>{const l=localStorage.getItem("aipanel_token")||"TOKEN",e=`${window.location.protocol}//${window.location.host}`,r=G.value.map(v=>`- ${v.id}: ${v.name}`).join(`
`),c=m.value?`
### å½“å‰é€‰ä¸­ç›®æ ‡
ID: ${m.value.id}
æ ‡é¢˜: ${m.value.title}
çŠ¶æ€: ${m.value.status}
è¿›åº¦: ${m.value.progress}%
å¼€å§‹: ${m.value.startAt||"æœªè®¾ç½®"}
ç»“æŸ: ${m.value.endAt||"æœªè®¾ç½®"}`:"";return`## ç›®æ ‡è§„åˆ’åŠ©æ‰‹

ä½ æ˜¯å›¢é˜Ÿçš„ç›®æ ‡è§„åˆ’åŠ©æ‰‹ã€‚

### ðŸŽ¯ æ ¸å¿ƒèƒ½åŠ›ï¼šå¡«å†™è¡¨å•ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰

å½“ç”¨æˆ·æè¿°ç›®æ ‡ä¿¡æ¯æ—¶ï¼Œ**ç›´æŽ¥è¾“å‡º JSON å¡«å……è¡¨å•**ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

\`\`\`json
{"action":"fill_goal","data":{"title":"ç›®æ ‡æ ‡é¢˜","description":"æè¿°ï¼ˆå¯é€‰ï¼‰","type":"team","agentIds":["agentId1"],"status":"active","startAt":"2026-03-01T00:00:00Z","endAt":"2026-06-30T00:00:00Z","progress":0,"milestones":[{"title":"é‡Œç¨‹ç¢‘1","dueAt":"2026-04-01T00:00:00Z","done":false}]}}
\`\`\`

- type: "personal"ï¼ˆä¸ªäººï¼‰æˆ– "team"ï¼ˆå›¢é˜Ÿï¼‰
- status: "draft" / "active" / "completed" / "cancelled"
- agentIds: å‚ä¸Žæˆå‘˜çš„ ID åˆ—è¡¨
- æ—¶é—´æ ¼å¼ï¼šISO 8601ï¼ˆå¦‚ "2026-03-01T00:00:00Z"ï¼‰
- è¾“å‡º JSON åŽï¼Œé¡µé¢ä¼šè‡ªåŠ¨å¡«å……è¡¨å•ï¼Œç”¨æˆ·ç¡®è®¤åŽä¿å­˜

### API æ“ä½œï¼ˆå¦‚éœ€ç›´æŽ¥æ›´æ–°å·²æœ‰ç›®æ ‡ï¼‰

**æ›´æ–°è¿›åº¦ï¼š**
\`\`\`bash
curl -s -X PATCH ${e}/api/goals/{id}/progress -H "Authorization: Bearer ${l}" -H "Content-Type: application/json" -d '{"progress":50}'
\`\`\`

**æ·»åŠ å®šæœŸæ£€æŸ¥ï¼š**
\`\`\`bash
curl -s -X POST ${e}/api/goals/{id}/checks -H "Authorization: Bearer ${l}" -H "Content-Type: application/json" -d '{"name":"æ¯å‘¨æ£€æŸ¥","schedule":"0 9 * * 1","agentId":"agentId","tz":"Asia/Shanghai","prompt":"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€æœ¬å‘¨è¿›å±•","enabled":true}'
\`\`\`

### å½“å‰å›¢é˜Ÿæˆå‘˜
${r}
${c}

**å·¥ä½œæµç¨‹ï¼š**
1. ç”¨æˆ·æè¿°ç›®æ ‡ â†’ ä½ è¾“å‡º fill_goal JSON â†’ é¡µé¢è‡ªåŠ¨å¡«è¡¨
2. ç”¨æˆ·ç¡®è®¤å†…å®¹åŽè‡ªè¡Œç‚¹å‡»ã€Œåˆ›å»ºã€æˆ–ã€Œä¿å­˜ã€æŒ‰é’®
3. å¦‚éœ€æ›´æ–°å·²å­˜åœ¨ç›®æ ‡çš„è¿›åº¦/æ£€æŸ¥ï¼Œä½¿ç”¨ API æ“ä½œ`.trim()});At(async()=>{const l=await Dt.list().catch(()=>({data:[]}));G.value=(l.data||[]).filter(e=>!e.system),R.value=G.value[0]?.id||"",await P()}),Me(Se,l=>{if(!l)return;new ResizeObserver(r=>{r[0]&&(pe.value=r[0].contentRect.width)}).observe(l),pe.value=l.getBoundingClientRect().width},{immediate:!0}),Me(K,async l=>{l==="records"&&m.value&&await lt(m.value.id)});async function P(){try{const l=await q.list();if(ae.value=l.data||[],m.value){const e=ae.value.find(r=>r.id===m.value.id);e&&(m.value=e)}}catch{}}async function lt(l){he.value=!0;try{const e=await q.listCheckRecords(l);ie.value=(e.data||[]).slice().reverse()}catch{ie.value=[]}finally{he.value=!1}}function be(l){m.value=l,L.value=!1,K.value="basic",Object.assign(i,{title:l.title,description:l.description||"",type:l.type,agentIds:[...l.agentIds||[]],status:l.status,progress:l.progress,startAt:O(l.startAt)?l.startAt:"",endAt:O(l.endAt)?l.endAt:"",milestones:(l.milestones||[]).map(e=>({...e}))})}function we(){m.value=null,L.value=!0,K.value="basic",qe.value=Date.now(),Object.assign(i,{title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]})}async function Ne(){if(!i.title.trim()){x.warning("è¯·å¡«å†™ç›®æ ‡æ ‡é¢˜");return}oe.value=!0;const l={title:i.title,description:i.description||void 0,type:i.type,agentIds:i.agentIds,status:i.status,progress:i.progress,startAt:i.startAt||void 0,endAt:i.endAt||void 0,milestones:i.milestones.map(e=>({...e,id:e.id||"ms-"+Math.random().toString(36).slice(2,10)}))};try{if(m.value)await q.update(m.value.id,l),x.success("ä¿å­˜æˆåŠŸ"),await P();else{const e=await q.create(l);x.success("åˆ›å»ºæˆåŠŸ"),L.value=!1,await P();const r=ae.value.find(c=>c.id===e.data.id)||e.data;be(r)}}catch(e){x.error(e.response?.data?.error||"æ“ä½œå¤±è´¥")}finally{oe.value=!1}}async function at(){if(m.value)try{await q.delete(m.value.id),x.success("å·²åˆ é™¤"),m.value=null,await P()}catch{x.error("åˆ é™¤å¤±è´¥")}}function Ge(){i.milestones.push({id:"ms-"+Math.random().toString(36).slice(2,10),title:"",dueAt:"",done:!1,agentIds:[]})}function st(){Object.assign(Y,{name:"",agentId:G.value[0]?.id||"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),ue.value="0 9 * * 1",Q.value=!0}function nt(l){l!=="custom"&&(Y.schedule=l)}async function ot(){if(!Y.name.trim()){x.warning("è¯·å¡«å†™æ£€æŸ¥åç§°");return}if(!Y.agentId){x.warning("è¯·é€‰æ‹©æ‰§è¡Œæˆå‘˜");return}if(m.value)try{await q.addCheck(m.value.id,{...Y}),x.success("æ·»åŠ æˆåŠŸ"),Q.value=!1;const l=await q.get(m.value.id);m.value=l.data,await P()}catch(l){x.error(l.response?.data?.error||"æ·»åŠ å¤±è´¥")}}async function it(l){if(m.value)try{await q.updateCheck(m.value.id,l.id,{enabled:l.enabled})}catch{x.error("æ›´æ–°å¤±è´¥")}}async function ut(l){if(m.value)try{await q.runCheck(m.value.id,l.id),x.success("å·²è§¦å‘æ£€æŸ¥")}catch(e){x.error(e.response?.data?.error||"è§¦å‘å¤±è´¥")}}async function dt(l){if(m.value)try{await xt.confirm(`ç¡®å®šåˆ é™¤æ£€æŸ¥è®¡åˆ’ã€Œ${l.name}ã€ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{type:"warning"}),await q.removeCheck(m.value.id,l.id),x.success("å·²åˆ é™¤");const e=await q.get(m.value.id);m.value=e.data,await P()}catch(e){e!=="cancel"&&x.error("åˆ é™¤å¤±è´¥")}}const qe=w(0),Le=B(()=>R.value?m.value?`goal-${m.value.id}-${R.value}`:`goals-new-${qe.value}-${R.value}`:"");function rt(l){setTimeout(()=>P(),2e3);const e=v=>{try{const b=JSON.parse(v);if(b.action==="fill_goal"&&b.data)return ct(b.data),!0}catch{}return!1},r=l.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(r?.[1]&&e(r[1]))return;const c=l.match(/(\{"action"\s*:\s*"fill_goal"[\s\S]*?\})/);c?.[1]&&e(c[1])}function ct(l){!L.value&&!m.value&&we(),l.title&&(i.title=l.title),l.description&&(i.description=l.description),l.type&&(i.type=l.type),l.status&&(i.status=l.status),typeof l.progress=="number"&&(i.progress=l.progress),l.agentIds&&Array.isArray(l.agentIds)&&(i.agentIds=l.agentIds),l.startAt&&(i.startAt=l.startAt),l.endAt&&(i.endAt=l.endAt),l.milestones&&Array.isArray(l.milestones)&&(i.milestones=l.milestones.map(e=>({id:e.id||"ms-"+Math.random().toString(36).slice(2,10),title:e.title||"",dueAt:e.dueAt||"",done:!!e.done,agentIds:e.agentIds||[]}))),x.success("AI å·²å¡«å†™è¡¨å•ï¼Œç¡®è®¤åŽç‚¹å‡»ä¿å­˜")}function O(l){if(!l)return!1;const e=new Date(l);return!isNaN(e.getTime())&&e.getFullYear()>1970}function mt(l){return O(l.startAt)&&O(l.endAt)}function pt(l){const{start:e,end:r}=X.value,c=r.getTime()-e.getTime();return Math.max(1,(new Date(l.endAt).getTime()-new Date(l.startAt).getTime())/c*100)}function vt(l){const{start:e,end:r}=X.value,c=r.getTime()-e.getTime(),v=new Date(l.startAt).getTime(),b=new Date(l.endAt).getTime(),I=Math.max(0,(v-e.getTime())/c*100),N=Math.max(1,(b-v)/c*100),C=l.agentIds?.[0]&&j.value[l.agentIds[0]]?j.value[l.agentIds[0]]:"#409eff",s=l.agentIds?.[1]&&j.value[l.agentIds[1]]?j.value[l.agentIds[1]]:C;return{left:`${I}%`,width:`${N}%`,background:l.agentIds?.length>1?`linear-gradient(90deg,${C},${s})`:C}}function gt(l){const{start:e,end:r}=X.value;return O(l.dueAt)?`${(new Date(l.dueAt).getTime()-e.getTime())/(r.getTime()-e.getTime())*100}%`:"-100%"}function ft(l,e,r){const c=[],v=e.getTime()-l.getTime();if(v<=0)return c;const b=s=>((s.getTime()-l.getTime())/v*100).toFixed(2)+"%";let I=-1,N=-1,C="";if(r==="year"){const s=new Date(l.getFullYear(),0,1);for(;s<=e;)c.push({label:String(s.getFullYear()),left:b(s)}),s.setFullYear(s.getFullYear()+1)}else if(r==="quarter"){const s=Math.floor(l.getMonth()/3)*3,u=new Date(l.getFullYear(),s,1);for(;u<=e;){const g=u.getFullYear(),f=Math.floor(u.getMonth()/3)+1,_=g!==I?String(g):void 0;_&&(I=g),c.push({label:`Q${f}`,yearMark:_,left:b(u)}),u.setMonth(u.getMonth()+3)}}else if(r==="month"){const s=new Date(l.getFullYear(),l.getMonth(),1);for(;s<=e;){const u=s.getFullYear(),g=s.getMonth()+1,f=u!==I?String(u):void 0;f&&(I=u),c.push({label:`${g}æœˆ`,yearMark:f,left:b(s)}),s.setMonth(s.getMonth()+1)}}else if(r==="week"){const s=new Date(l);for(;s<=e;){const u=s.getFullYear(),g=s.getMonth()+1,f=s.getDate(),_=u!==I?String(u):void 0;_&&(I=u);const M=N!==g?`${g}æœˆ`:void 0;N=g,c.push({label:`${g}/${f}`,yearMark:_||M,left:b(s)}),s.setDate(s.getDate()+7)}}else if(r==="day"){const s=new Date(l.getFullYear(),l.getMonth(),l.getDate());for(;s<=e;){const u=s.getFullYear(),g=s.getMonth()+1,f=s.getDate(),_=u!==I?String(u):g!==N?`${g}æœˆ`:void 0;u!==I&&(I=u),g!==N&&(N=g),c.push({label:String(f),yearMark:_,left:b(s)}),s.setDate(s.getDate()+1)}}else if(r==="hour"){const s=new Date(l);for(;s<=e;){const u=s.getMonth()+1,g=s.getDate(),f=s.getHours(),_=`${u}/${g}`,M=_!==C?_:void 0;M&&(C=_),c.push({label:`${String(f).padStart(2,"0")}æ—¶`,yearMark:M,left:b(s)}),s.setHours(s.getHours()+6)}}else{const s=new Date(l);for(;s<=e;){const u=s.getMonth()+1,g=s.getDate(),f=s.getHours(),_=s.getMinutes(),M=`${u}/${g} ${f}`,W=M!==C?`${u}/${g} ${String(f).padStart(2,"0")}æ—¶`:void 0;W&&(C=M);const ke=`${String(f).padStart(2,"0")}:${String(_).padStart(2,"0")}`;c.push({label:ke,yearMark:W,left:b(s)}),s.setMinutes(s.getMinutes()+30)}}return c}function Oe(l){return l.status==="completed"?"#67c23a":l.progress>=80?"#409eff":l.progress>=40?"#e6a23c":"#909399"}function Be(l){return{draft:"è‰ç¨¿",active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[l]??l}function Re(l){return{draft:"info",active:"",completed:"success",cancelled:"danger"}[l]??"info"}function ve(l){return O(l)?new Date(l).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}):"â€”"}function _t(l){if(!l)return"";const e=new Date(l);return isNaN(e.getTime())?"":e.toLocaleString("zh-CN")}return(l,e)=>{const r=k("el-icon"),c=k("el-button"),v=k("el-option"),b=k("el-select"),I=k("el-tag"),N=k("el-progress"),C=k("el-input"),s=k("el-form-item"),u=k("el-radio-button"),g=k("el-radio-group"),f=k("el-date-picker"),_=k("el-slider"),M=k("el-checkbox"),W=k("el-form"),ke=k("el-popconfirm"),Ve=k("el-tab-pane"),te=k("el-table-column"),yt=k("el-text"),je=k("el-switch"),ht=k("el-table"),Pe=k("el-empty"),bt=k("el-timeline-item"),wt=k("el-timeline"),kt=k("el-tabs"),Vt=k("el-dialog");return d(),p("div",St,[o("div",{class:"gs-sidebar",style:S({width:fe.value+"px"})},[o("div",Ft,[e[34]||(e[34]=o("span",{class:"sidebar-title"},"ç›®æ ‡è§„åˆ’",-1)),o("div",Ht,[a(c,{size:"small",circle:"",onClick:P},{default:n(()=>[a(r,null,{default:n(()=>[a(T(It))]),_:1})]),_:1}),a(c,{size:"small",type:"primary",circle:"",onClick:we},{default:n(()=>[a(r,null,{default:n(()=>[a(T(le))]),_:1})]),_:1})])]),o("div",Nt,[a(b,{modelValue:se.value,"onUpdate:modelValue":e[0]||(e[0]=t=>se.value=t),placeholder:"æ‰€æœ‰çŠ¶æ€",clearable:"",size:"small",class:"filter-sel"},{default:n(()=>[a(v,{label:"è‰ç¨¿",value:"draft"}),a(v,{label:"è¿›è¡Œä¸­",value:"active"}),a(v,{label:"å·²å®Œæˆ",value:"completed"}),a(v,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"]),a(b,{modelValue:ne.value,"onUpdate:modelValue":e[1]||(e[1]=t=>ne.value=t),placeholder:"æ‰€æœ‰æˆå‘˜",clearable:"",size:"small",class:"filter-sel"},{default:n(()=>[(d(!0),p(D,null,$(G.value,t=>(d(),H(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",Gt,[L.value?(d(),p("div",qt,[o("div",Lt,[o("span",Ot,y(i.title.trim()||"æ–°ç›®æ ‡â€¦"),1),a(I,{type:"info",size:"small",effect:"plain"},{default:n(()=>[...e[35]||(e[35]=[V("è‰ç¨¿",-1)])]),_:1})]),e[36]||(e[36]=o("div",{class:"gi-new-hint"},"å°šæœªä¿å­˜",-1))])):U("",!0),ee.value.length===0&&!L.value?(d(),p("div",Bt,"æš‚æ— ç›®æ ‡")):U("",!0),(d(!0),p(D,null,$(ee.value,t=>(d(),p("div",{key:t.id,class:Z(["goal-item",{active:m.value?.id===t.id}]),onClick:h=>be(t)},[o("div",jt,[o("span",Pt,y(t.title),1),a(I,{type:Re(t.status),size:"small",effect:"plain"},{default:n(()=>[V(y(Be(t.status)),1)]),_:2},1032,["type"])]),o("div",Zt,[o("div",{class:"gi-progress-bar",style:S({width:t.progress+"%",background:Oe(t)})},null,4),o("span",Et,y(t.progress)+"%",1)]),o("div",Xt,[o("div",Wt,[(d(!0),p(D,null,$((t.agentIds||[]).slice(0,3),h=>(d(),p("div",{key:h,class:"gi-avatar",style:S({background:j.value[h]||"#6366f1"})},y((E.value[h]||h)[0]),5))),128)),(t.agentIds||[]).length>3?(d(),p("span",Jt,"+"+y(t.agentIds.length-3),1)):U("",!0)]),o("span",Kt,y(ve(t.startAt))+" â€” "+y(ve(t.endAt)),1)])],10,Rt))),128))])],4),o("div",{class:Z(["gs-handle",{dragging:J.value==="side"}]),onMousedown:e[2]||(e[2]=t=>Ce(t,"side"))},[...e[37]||(e[37]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",Qt,[!m.value&&!L.value?(d(),p("div",el,[o("div",tl,[o("span",ll,[a(r,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:n(()=>[a(T(ge))]),_:1}),e[38]||(e[38]=V(" ç›®æ ‡æ€»è§ˆ Â· ç”˜ç‰¹å›¾ ",-1))]),a(c,{type:"primary",size:"small",onClick:we},{default:n(()=>[a(r,null,{default:n(()=>[a(T(le))]),_:1}),e[39]||(e[39]=V(" æ–°å»ºç›®æ ‡ ",-1))]),_:1})]),ee.value.length===0?(d(),p("div",al,[a(r,{size:"48",color:"#c0c4cc"},{default:n(()=>[a(T(ge))]),_:1}),e[40]||(e[40]=o("p",null,"æš‚æ— ç›®æ ‡ï¼Œç‚¹å‡»æ–°å»ºå¼€å§‹è§„åˆ’",-1))])):(d(),p("div",{key:1,class:Z(["gantt-wrap",{"is-dragging":ce.value}]),onWheel:Ze(et,["prevent"]),onMousedown:We,onMousemove:Je,onMouseup:ze,onMouseleave:Ze(ze,["self"])},[o("div",sl,[o("div",nl,[o("span",ol,y({year:"å¹´",quarter:"å­£",month:"æœˆ",week:"å‘¨",day:"æ—¥",hour:"æ—¶",minute:"åˆ†"}[z.value])+" â†•æ»šè½®",1)]),o("div",{class:"gantt-timeline-col",ref_key:"ganttTimelineRef",ref:Se},[o("div",il,[(d(!0),p(D,null,$(Fe.value.filter(t=>t.yearMark),t=>(d(),p("div",{key:"yr-"+t.left,class:"gantt-year-label",style:S({left:t.left})},y(t.yearMark),5))),128))]),o("div",ul,[(d(!0),p(D,null,$(Fe.value,t=>(d(),p("div",{key:t.label+t.left,class:"gantt-month-label",style:S({left:t.left})},y(t.label),5))),128))])],512)]),o("div",dl,[o("div",rl,[e[41]||(e[41]=o("div",{class:"gantt-label-col"},null,-1)),o("div",cl,[(d(!0),p(D,null,$(T(Qe),t=>(d(),p("div",{key:"gv-"+t.label,class:"gantt-grid-line",style:S({left:t.left})},null,4))),128)),He.value!==null?(d(),p("div",{key:0,class:"gantt-today-line",style:S({left:He.value})},null,4)):U("",!0)])]),(d(!0),p(D,null,$(ee.value,t=>(d(),p("div",{key:t.id,class:Z(["gantt-row",{"is-selected":A.value?.id===t.id}]),onClick:h=>Ke(t)},[o("div",pl,[o("div",vl,[o("div",gl,[(d(!0),p(D,null,$((t.agentIds||[]).slice(0,2),h=>(d(),p("div",{key:h,class:"gantt-avatar",style:S({background:j.value[h]||"#409eff"})},y((E.value[h]||h).slice(0,1)),5))),128))]),o("span",fl,y(t.title),1),o("span",{class:Z(["gantt-pct","s-"+t.status])},y(t.progress)+"%",3)])]),o("div",_l,[mt(t)?(d(),p(D,{key:0},[o("div",{class:"gantt-bar",style:S(vt(t))},[o("div",{class:"gantt-bar-progress",style:S({width:t.progress+"%"})},null,4),pt(t)>8?(d(),p("span",yl,y(t.title),1)):U("",!0)],4),(d(!0),p(D,null,$(t.milestones||[],h=>(d(),p(D,{key:h.id},[O(h.dueAt)?(d(),p("div",{key:0,class:Z(["gantt-milestone",{done:h.done}]),style:S({left:gt(h)}),title:h.title},null,14,hl)):U("",!0)],64))),128))],64)):(d(),p("div",bl,"æœªè®¾ç½®æ—¶é—´èŒƒå›´"))])],10,ml))),128))])],34)),a(Ct,{name:"gsp-slide"},{default:n(()=>[A.value?(d(),p("div",wl,[o("div",kl,[o("div",Vl,[(d(!0),p(D,null,$((A.value.agentIds||[]).slice(0,3),t=>(d(),p("div",{key:t,class:"gsp-avatar",style:S({background:j.value[t]||"#409eff"})},y((E.value[t]||t).slice(0,1)),5))),128))]),o("div",Ml,[o("span",Al,y(A.value.title),1),a(I,{type:Re(A.value.status),size:"small"},{default:n(()=>[V(y(Be(A.value.status)),1)]),_:1},8,["type"])]),a(c,{type:"primary",size:"small",onClick:e[3]||(e[3]=t=>{be(A.value),A.value=null})},{default:n(()=>[...e[42]||(e[42]=[V(" æŸ¥çœ‹è¯¦æƒ… â†’ ",-1)])]),_:1}),a(r,{class:"gsp-close",onClick:e[4]||(e[4]=t=>A.value=null)},{default:n(()=>[a(T(Tt))]),_:1})]),o("div",Dl,[o("div",Cl,[e[43]||(e[43]=o("span",{class:"gsp-stat-label"},"è¿›åº¦",-1)),a(N,{percentage:A.value.progress,color:Oe(A.value),"stroke-width":8,style:{flex:"1",margin:"0 10px"}},null,8,["percentage","color"]),o("span",Il,y(A.value.progress)+"%",1)]),o("div",Tl,[e[44]||(e[44]=o("span",{class:"gsp-stat-label"},"æ—¶é—´",-1)),o("span",Yl,y(ve(A.value.startAt))+" â€” "+y(ve(A.value.endAt)),1)]),A.value.milestones?.length?(d(),p("div",$l,[e[45]||(e[45]=o("span",{class:"gsp-stat-label"},"é‡Œç¨‹ç¢‘",-1)),o("span",xl,y(A.value.milestones.filter(t=>t.done).length)+"/"+y(A.value.milestones.length)+" å·²å®Œæˆ ",1)])):U("",!0),A.value.description?(d(),p("div",zl,y(A.value.description),1)):U("",!0)])])):U("",!0)]),_:1})])):L.value?(d(),p(D,{key:1},[o("div",Ul,[o("div",Sl,[a(r,{style:{color:"#909399"}},{default:n(()=>[a(T(ge))]),_:1}),e[46]||(e[46]=o("span",{class:"crumb-sep"},"æ–°å»º",-1)),e[47]||(e[47]=o("span",{class:"crumb-name"},"ç›®æ ‡",-1))]),o("div",Fl,[a(c,{size:"small",onClick:e[5]||(e[5]=t=>L.value=!1)},{default:n(()=>[...e[48]||(e[48]=[V("å–æ¶ˆ",-1)])]),_:1}),a(c,{size:"small",type:"primary",loading:oe.value,onClick:Ne},{default:n(()=>[a(r,null,{default:n(()=>[a(T(Xe))]),_:1}),e[49]||(e[49]=V(" åˆ›å»º ",-1))]),_:1},8,["loading"])])]),o("div",Hl,[a(W,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:n(()=>[a(s,{label:"æ ‡é¢˜",required:""},{default:n(()=>[a(C,{modelValue:i.title,"onUpdate:modelValue":e[6]||(e[6]=t=>i.title=t),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(s,{label:"æè¿°"},{default:n(()=>[a(C,{modelValue:i.description,"onUpdate:modelValue":e[7]||(e[7]=t=>i.description=t),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(s,{label:"ç±»åž‹"},{default:n(()=>[a(g,{modelValue:i.type,"onUpdate:modelValue":e[8]||(e[8]=t=>i.type=t)},{default:n(()=>[a(u,{value:"personal"},{default:n(()=>[...e[50]||(e[50]=[V("ä¸ªäºº",-1)])]),_:1}),a(u,{value:"team"},{default:n(()=>[...e[51]||(e[51]=[V("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"å‚ä¸Žæˆå‘˜"},{default:n(()=>[a(b,{modelValue:i.agentIds,"onUpdate:modelValue":e[9]||(e[9]=t=>i.agentIds=t),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:n(()=>[(d(!0),p(D,null,$(G.value,t=>(d(),H(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"çŠ¶æ€"},{default:n(()=>[a(b,{modelValue:i.status,"onUpdate:modelValue":e[10]||(e[10]=t=>i.status=t),style:{width:"100%"}},{default:n(()=>[a(v,{label:"è‰ç¨¿",value:"draft"}),a(v,{label:"è¿›è¡Œä¸­",value:"active"}),a(v,{label:"å·²å®Œæˆ",value:"completed"}),a(v,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"å¼€å§‹æ—¶é—´"},{default:n(()=>[a(f,{modelValue:i.startAt,"onUpdate:modelValue":e[11]||(e[11]=t=>i.startAt=t),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(s,{label:"ç»“æŸæ—¶é—´"},{default:n(()=>[a(f,{modelValue:i.endAt,"onUpdate:modelValue":e[12]||(e[12]=t=>i.endAt=t),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),m.value?(d(),H(s,{key:0,label:"è¿›åº¦"},{default:n(()=>[a(_,{modelValue:i.progress,"onUpdate:modelValue":e[13]||(e[13]=t=>i.progress=t),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):U("",!0),a(s,{label:"é‡Œç¨‹ç¢‘"},{default:n(()=>[o("div",Nl,[(d(!0),p(D,null,$(i.milestones,(t,h)=>(d(),p("div",{key:h,class:"milestone-row"},[a(M,{modelValue:t.done,"onUpdate:modelValue":F=>t.done=F},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:t.title,"onUpdate:modelValue":F=>t.title=F,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(f,{modelValue:t.dueAt,"onUpdate:modelValue":F=>t.dueAt=F,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(c,{type:"danger",size:"small",circle:"",onClick:F=>i.milestones.splice(h,1)},{default:n(()=>[a(r,null,{default:n(()=>[a(T(Ae))]),_:1})]),_:1},8,["onClick"])]))),128)),a(c,{size:"small",onClick:Ge,style:{"margin-top":"4px"}},{default:n(()=>[a(r,null,{default:n(()=>[a(T(le))]),_:1}),e[52]||(e[52]=V(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])],64)):m.value?(d(),p(D,{key:2},[o("div",Gl,[o("div",ql,[a(r,{style:{color:"#909399"}},{default:n(()=>[a(T(ge))]),_:1}),e[53]||(e[53]=o("span",{class:"crumb-sep"},"ç›®æ ‡",-1)),o("span",Ll,y(m.value.title),1)]),o("div",Ol,[a(c,{size:"small",type:"primary",loading:oe.value,onClick:Ne},{default:n(()=>[a(r,null,{default:n(()=>[a(T(Xe))]),_:1}),e[54]||(e[54]=V(" ä¿å­˜ ",-1))]),_:1},8,["loading"]),a(ke,{title:`ç¡®è®¤åˆ é™¤ã€Œ${m.value.title}ã€ï¼Ÿ`,onConfirm:at},{reference:n(()=>[a(c,{size:"small",type:"danger",plain:""},{default:n(()=>[a(r,null,{default:n(()=>[a(T(Ae))]),_:1})]),_:1})]),_:1},8,["title"])])]),a(kt,{modelValue:K.value,"onUpdate:modelValue":e[22]||(e[22]=t=>K.value=t),class:"editor-tabs"},{default:n(()=>[a(Ve,{label:"åŸºæœ¬ä¿¡æ¯",name:"basic"},{default:n(()=>[o("div",Bl,[a(W,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:n(()=>[a(s,{label:"æ ‡é¢˜",required:""},{default:n(()=>[a(C,{modelValue:i.title,"onUpdate:modelValue":e[14]||(e[14]=t=>i.title=t),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(s,{label:"æè¿°"},{default:n(()=>[a(C,{modelValue:i.description,"onUpdate:modelValue":e[15]||(e[15]=t=>i.description=t),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(s,{label:"ç±»åž‹"},{default:n(()=>[a(g,{modelValue:i.type,"onUpdate:modelValue":e[16]||(e[16]=t=>i.type=t)},{default:n(()=>[a(u,{value:"personal"},{default:n(()=>[...e[55]||(e[55]=[V("ä¸ªäºº",-1)])]),_:1}),a(u,{value:"team"},{default:n(()=>[...e[56]||(e[56]=[V("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"å‚ä¸Žæˆå‘˜"},{default:n(()=>[a(b,{modelValue:i.agentIds,"onUpdate:modelValue":e[17]||(e[17]=t=>i.agentIds=t),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:n(()=>[(d(!0),p(D,null,$(G.value,t=>(d(),H(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"çŠ¶æ€"},{default:n(()=>[a(b,{modelValue:i.status,"onUpdate:modelValue":e[18]||(e[18]=t=>i.status=t),style:{width:"100%"}},{default:n(()=>[a(v,{label:"è‰ç¨¿",value:"draft"}),a(v,{label:"è¿›è¡Œä¸­",value:"active"}),a(v,{label:"å·²å®Œæˆ",value:"completed"}),a(v,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"å¼€å§‹æ—¶é—´"},{default:n(()=>[a(f,{modelValue:i.startAt,"onUpdate:modelValue":e[19]||(e[19]=t=>i.startAt=t),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(s,{label:"ç»“æŸæ—¶é—´"},{default:n(()=>[a(f,{modelValue:i.endAt,"onUpdate:modelValue":e[20]||(e[20]=t=>i.endAt=t),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),m.value?(d(),H(s,{key:0,label:"è¿›åº¦"},{default:n(()=>[a(_,{modelValue:i.progress,"onUpdate:modelValue":e[21]||(e[21]=t=>i.progress=t),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):U("",!0),a(s,{label:"é‡Œç¨‹ç¢‘"},{default:n(()=>[o("div",Rl,[(d(!0),p(D,null,$(i.milestones,(t,h)=>(d(),p("div",{key:h,class:"milestone-row"},[a(M,{modelValue:t.done,"onUpdate:modelValue":F=>t.done=F},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:t.title,"onUpdate:modelValue":F=>t.title=F,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(f,{modelValue:t.dueAt,"onUpdate:modelValue":F=>t.dueAt=F,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(c,{type:"danger",size:"small",circle:"",onClick:F=>i.milestones.splice(h,1)},{default:n(()=>[a(r,null,{default:n(()=>[a(T(Ae))]),_:1})]),_:1},8,["onClick"])]))),128)),a(c,{size:"small",onClick:Ge,style:{"margin-top":"4px"}},{default:n(()=>[a(r,null,{default:n(()=>[a(T(le))]),_:1}),e[57]||(e[57]=V(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1}),a(Ve,{label:"å®šæœŸæ£€æŸ¥",name:"checks"},{default:n(()=>[o("div",jl,[o("div",Pl,[a(c,{type:"primary",size:"small",onClick:st},{default:n(()=>[a(r,null,{default:n(()=>[a(T(le))]),_:1}),e[58]||(e[58]=V(" æ·»åŠ æ£€æŸ¥ ",-1))]),_:1})]),a(ht,{data:m.value.checks,size:"small",stripe:"",class:"checks-table"},{default:n(()=>[a(te,{prop:"name",label:"åç§°","min-width":"120"}),a(te,{label:"é¢‘çŽ‡","min-width":"140"},{default:n(({row:t})=>[o("code",Zl,y(t.schedule),1),a(yt,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:n(()=>[V(y(t.tz||"Asia/Shanghai"),1)]),_:2},1024)]),_:1}),a(te,{label:"æˆå‘˜",width:"90"},{default:n(({row:t})=>[V(y(E.value[t.agentId]||t.agentId),1)]),_:1}),a(te,{label:"å¯ç”¨",width:"60"},{default:n(({row:t})=>[a(je,{modelValue:t.enabled,"onUpdate:modelValue":h=>t.enabled=h,size:"small",onChange:h=>it(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(te,{label:"æ“ä½œ",width:"130"},{default:n(({row:t})=>[a(c,{size:"small",link:"",onClick:h=>ut(t)},{default:n(()=>[...e[59]||(e[59]=[V("ç«‹å³è¿è¡Œ",-1)])]),_:1},8,["onClick"]),a(c,{size:"small",link:"",type:"danger",onClick:h=>dt(t)},{default:n(()=>[...e[60]||(e[60]=[V("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),m.value.checks?.length?U("",!0):(d(),H(Pe,{key:0,description:"æš‚æ— æ£€æŸ¥è®¡åˆ’","image-size":60}))])]),_:1}),a(Ve,{label:"æ£€æŸ¥è®°å½•",name:"records"},{default:n(()=>[o("div",El,[he.value?(d(),p("div",Xl,[a(r,{class:"is-loading",size:"24"},{default:n(()=>[a(T(Yt))]),_:1})])):ie.value.length?(d(),H(wt,{key:1,class:"records-timeline"},{default:n(()=>[(d(!0),p(D,null,$(ie.value,t=>(d(),H(bt,{key:t.id,timestamp:_t(t.runAt),type:t.status==="ok"?"success":"danger",placement:"top"},{default:n(()=>[o("div",Wl,[o("div",Jl,[o("div",{class:"rec-avatar",style:S({background:j.value[t.agentId]||"#409eff"})},y((E.value[t.agentId]||"?")[0]),5),o("span",Kl,y(E.value[t.agentId]||t.agentId),1),a(I,{type:t.status==="ok"?"success":"danger",size:"small"},{default:n(()=>[V(y(t.status),1)]),_:2},1032,["type"])]),o("div",Ql,y(t.output||"ï¼ˆæ— è¾“å‡ºï¼‰"),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})):(d(),H(Pe,{key:2,description:"æš‚æ— æ£€æŸ¥è®°å½•","image-size":60}))])]),_:1})]),_:1},8,["modelValue"])],64)):U("",!0)]),o("div",{class:Z(["gs-handle",{dragging:J.value==="chat"}]),onMousedown:e[23]||(e[23]=t=>Ce(t,"chat"))},[...e[61]||(e[61]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",{class:"gs-chat",style:S({width:_e.value+"px"})},[o("div",ea,[a(r,null,{default:n(()=>[a(T($t))]),_:1}),e[62]||(e[62]=o("span",null,"AI ç›®æ ‡åŠ©æ‰‹",-1)),a(b,{modelValue:R.value,"onUpdate:modelValue":e[24]||(e[24]=t=>R.value=t),size:"small",style:{"margin-left":"auto",width:"110px"},placeholder:"é€‰æ‹©æˆå‘˜"},{default:n(()=>[(d(!0),p(D,null,$(G.value,t=>(d(),H(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",ta,[R.value?(d(),H(zt,{key:Le.value,"agent-id":R.value,"session-id":Le.value,context:tt.value,"welcome-message":m.value?`æ­£åœ¨æŸ¥çœ‹ç›®æ ‡ã€Œ${m.value.title}ã€ï¼Œæˆ‘å¯ä»¥å¸®ä½ ä¿®æ”¹ç›®æ ‡ä¿¡æ¯ã€æ·»åŠ é‡Œç¨‹ç¢‘æˆ–è®¾ç½®å®šæœŸæ£€æŸ¥ã€‚`:"ä½ å¥½ï¼æˆ‘å¯ä»¥å¸®ä½ åˆ›å»ºç›®æ ‡ï¼Œè¯´ä¸€ä¸‹éœ€æ±‚å³å¯ï¼Œæˆ‘ä¼šè‡ªåŠ¨å¡«å†™è¡¨å•ã€‚",examples:m.value?["å¸®æˆ‘æŠŠè¿›åº¦æ›´æ–°åˆ° 60%","æ·»åŠ 3ä¸ªé‡Œç¨‹ç¢‘","æ¯å‘¨ä¸€æ£€æŸ¥è¿™ä¸ªç›®æ ‡"]:["å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿç›®æ ‡ï¼šQ2ç”¨æˆ·å¢žé•¿ï¼Œ3æœˆ1æ—¥åˆ°6æœˆ30æ—¥","ä¸ªäººç›®æ ‡ï¼šå­¦ä¹  Go è¯­è¨€ï¼Œæœ¬æœˆå®Œæˆ"],height:"100%",onResponse:rt},null,8,["agent-id","session-id","context","welcome-message","examples"])):U("",!0)])],4),a(Vt,{modelValue:Q.value,"onUpdate:modelValue":e[33]||(e[33]=t=>Q.value=t),title:"æ·»åŠ å®šæœŸæ£€æŸ¥",width:"480px"},{footer:n(()=>[a(c,{onClick:e[32]||(e[32]=t=>Q.value=!1)},{default:n(()=>[...e[64]||(e[64]=[V("å–æ¶ˆ",-1)])]),_:1}),a(c,{type:"primary",onClick:ot},{default:n(()=>[...e[65]||(e[65]=[V("æ·»åŠ ",-1)])]),_:1})]),default:n(()=>[a(W,{model:Y,"label-width":"90px",size:"small"},{default:n(()=>[a(s,{label:"åç§°",required:""},{default:n(()=>[a(C,{modelValue:Y.name,"onUpdate:modelValue":e[25]||(e[25]=t=>Y.name=t),placeholder:"å¦‚ï¼šæ¯å‘¨è¿›åº¦æ£€æŸ¥"},null,8,["modelValue"])]),_:1}),a(s,{label:"æ‰§è¡Œæˆå‘˜",required:""},{default:n(()=>[a(b,{modelValue:Y.agentId,"onUpdate:modelValue":e[26]||(e[26]=t=>Y.agentId=t),style:{width:"100%"}},{default:n(()=>[(d(!0),p(D,null,$(G.value,t=>(d(),H(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"æ£€æŸ¥é¢‘çŽ‡"},{default:n(()=>[a(b,{modelValue:ue.value,"onUpdate:modelValue":e[27]||(e[27]=t=>ue.value=t),style:{width:"100%"},onChange:nt},{default:n(()=>[a(v,{label:"æ¯å¤©ä¸Šåˆ9ç‚¹",value:"0 9 * * *"}),a(v,{label:"æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹",value:"0 9 * * 1"}),a(v,{label:"æ¯å‘¨äº”ä¸‹åˆ5ç‚¹",value:"0 17 * * 5"}),a(v,{label:"æ¯æœˆ1æ—¥ä¸Šåˆ9ç‚¹",value:"0 9 1 * *"}),a(v,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),ue.value==="custom"?(d(),H(s,{key:0,label:"Cron"},{default:n(()=>[a(C,{modelValue:Y.schedule,"onUpdate:modelValue":e[28]||(e[28]=t=>Y.schedule=t),placeholder:"0 9 * * 1"},null,8,["modelValue"])]),_:1})):U("",!0),a(s,{label:"æ—¶åŒº"},{default:n(()=>[a(b,{modelValue:Y.tz,"onUpdate:modelValue":e[29]||(e[29]=t=>Y.tz=t),style:{width:"100%"}},{default:n(()=>[a(v,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),a(v,{label:"UTC",value:"UTC"}),a(v,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"æ£€æŸ¥æç¤ºè¯"},{default:n(()=>[a(C,{modelValue:Y.prompt,"onUpdate:modelValue":e[30]||(e[30]=t=>Y.prompt=t),type:"textarea",rows:3,placeholder:"å¯ç”¨å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt}"},null,8,["modelValue"]),e[63]||(e[63]=o("div",{style:{"font-size":"11px",color:"#94a3b8","margin-top":"3px"}}," å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt} {goal.startAt} {goal.status} ",-1))]),_:1}),a(s,{label:"å¯ç”¨"},{default:n(()=>[a(je,{modelValue:Y.enabled,"onUpdate:modelValue":e[31]||(e[31]=t=>Y.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ia=Ut(la,[["__scopeId","data-v-318e54fc"]]);export{ia as default};
