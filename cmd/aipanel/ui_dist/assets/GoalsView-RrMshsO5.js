import{d as Ut,o as St,A as Yt,P as et,ac as H,c as p,e as o,b as a,w as s,t as v,g as D,F as k,q as A,p as x,z as Z,f as y,j as tt,n as V,ad as Nt,l as U,r as b,y as lt,I as F,h as _,i as u,a1 as Ht,K as oe,ae as ye,M as Gt,af as at,ag as ze,J as Ft,U as Lt,ab as Rt,E as T,B as Bt}from"./index-D5egijDv.js";import{A as Et}from"./AiChat-CoYjmUsn.js";import{_ as Ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Pt={class:"goals-studio"},Xt={class:"sidebar-top"},jt={class:"sidebar-acts"},Zt={class:"gs-filter"},qt={class:"goal-list"},Kt={key:0,class:"goal-item goal-item-new active"},Wt={class:"gi-top"},Jt={class:"gi-title gi-title-new"},Qt={key:1,class:"list-empty"},el=["onClick"],tl={class:"gi-top"},ll={class:"gi-title"},al={class:"gi-progress-wrap"},sl={class:"gi-progress-num"},nl={class:"gi-bottom"},ol={class:"gi-avatars"},il={key:0,class:"gi-avatar-more"},dl={class:"gi-dates"},ul={class:"gs-editor"},rl={key:0,class:"editor-gantt-overview"},ml={class:"overview-header"},cl={class:"overview-title"},pl={key:0,class:"gantt-empty"},vl={class:"gantt-header"},fl={class:"gantt-label-col"},gl={class:"gantt-scale-hint"},_l={class:"gantt-years"},yl={class:"gantt-months"},bl={class:"gantt-body"},hl={class:"gantt-overlay","aria-hidden":"true"},wl={class:"gantt-timeline-col",style:{position:"relative"}},kl=["onClick"],Vl={class:"gantt-label-col"},Ml={class:"gantt-label-inner"},Al={class:"gantt-agent-avatars"},Cl={class:"gantt-goal-name"},Tl={class:"gantt-timeline-col"},Dl={key:0,class:"gantt-bar-label"},Il=["title"],xl={key:1,class:"gantt-no-date"},$l={key:0,class:"gantt-summary-panel"},zl={class:"gsp-header"},Ul={class:"gsp-avatars"},Sl={class:"gsp-title-block"},Yl={class:"gsp-title"},Nl={class:"gsp-body"},Hl={class:"gsp-stat"},Gl={class:"gsp-stat-val"},Fl={class:"gsp-stat"},Ll={class:"gsp-stat-val"},Rl={key:0,class:"gsp-stat"},Bl={class:"gsp-stat-val"},El={key:1,class:"gsp-desc"},Ol={class:"editor-toolbar"},Pl={class:"editor-breadcrumb"},Xl={class:"toolbar-acts"},jl={class:"editor-form"},Zl={style:{width:"100%"}},ql={class:"editor-toolbar"},Kl={class:"editor-breadcrumb"},Wl={class:"crumb-name"},Jl={class:"toolbar-acts"},Ql={class:"editor-form"},ea={style:{width:"100%"}},ta={class:"tab-panel"},la={class:"tab-panel-head"},aa={class:"code-cell"},sa={class:"tab-panel"},na={key:0,style:{"text-align":"center",padding:"20px"}},oa={class:"record-card"},ia={class:"record-header"},da={class:"rec-name"},ua={class:"rec-output"},ra={class:"chat-panel-head"},ma={class:"chat-wrap"},ca=2*6e4,pa=20*365*864e5,st=30*864e5,va=Ut({__name:"GoalsView",setup(fa){const be=b(260),he=b(360),ee=b("");let Ue=0,we=0;function Se(t,e){ee.value=e,Ue=t.clientX,we=e==="side"?be.value:he.value,document.addEventListener("mousemove",Ye),document.addEventListener("mouseup",Ne),t.preventDefault()}function Ye(t){const e=t.clientX-Ue;ee.value==="side"?be.value=Math.max(200,Math.min(400,we+e)):he.value=Math.max(280,Math.min(560,we-e))}function Ne(){ee.value="",document.removeEventListener("mousemove",Ye),document.removeEventListener("mouseup",Ne)}const ie=b([]),Y=b([]),de=b(""),ue=b(""),c=b(null),L=b(!1),re=b(!1),te=b("basic"),le=b(!1),me=b([]),ke=b(!1),ce=b("0 9 * * 1"),E=b(""),i=lt({title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]}),M=lt({name:"",agentId:"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),q=F(()=>{const t={};return Y.value.forEach(e=>{t[e.id]=e.name}),t}),O=F(()=>{const t={};return Y.value.forEach(e=>{t[e.id]=e.avatarColor||"#409eff"}),t}),pe=F(()=>{let t=[...ie.value];return de.value&&(t=t.filter(e=>e.status===de.value)),ue.value&&(t=t.filter(e=>(e.agentIds||[]).includes(ue.value))),t}),R=b(st),P=b(Date.now()+st*.4),Ve=Math.round(30.44*864e5),He=[{ms:6e4,kind:"minute",step:1,label:"1åˆ†é’Ÿ"},{ms:5*6e4,kind:"minute",step:5,label:"5åˆ†é’Ÿ"},{ms:15*6e4,kind:"minute",step:15,label:"15åˆ†é’Ÿ"},{ms:30*6e4,kind:"minute",step:30,label:"30åˆ†é’Ÿ"},{ms:36e5,kind:"hour",step:1,label:"1å°æ—¶"},{ms:6*36e5,kind:"hour",step:6,label:"6å°æ—¶"},{ms:12*36e5,kind:"hour",step:12,label:"12å°æ—¶"},{ms:864e5,kind:"day",step:1,label:"1å¤©"},{ms:7*864e5,kind:"week",step:7,label:"1å‘¨"},{ms:Ve,kind:"month",step:1,label:"1æœˆ"},{ms:3*Ve,kind:"month",step:3,label:"3æœˆ"},{ms:6*Ve,kind:"month",step:6,label:"6æœˆ"},{ms:365*864e5,kind:"year",step:1,label:"1å¹´"},{ms:2*365*864e5,kind:"year",step:2,label:"2å¹´"},{ms:5*365*864e5,kind:"year",step:5,label:"5å¹´"}],Ge=F(()=>{const t=R.value/8;return He.reduce((e,n)=>Math.abs(n.ms-t)<Math.abs(e.ms-t)?n:e)}),ae=F(()=>({start:new Date(P.value-R.value/2),end:new Date(P.value+R.value/2)})),Fe=F(()=>At(ae.value.start,ae.value.end,Ge.value)),K=b(700),Me=b(null),Le=F(()=>{const t=Fe.value,e=K.value;if(!t.length||!e)return t;const r=Math.max(1,Math.floor(e/50));if(t.length<=r)return t;const m=Math.ceil(t.length/r);return t.filter((g,I)=>I%m===0)}),nt=Fe,Ae=b(!1),Ce=b(!1);let ve=!1,fe=!1,Te=0,De=0,W=0,Ie=0;function Re(){cancelAnimationFrame(Ie),W=0}function ot(t){Re(),ve=!0,fe=!1,Ae.value=!0,Ce.value=!1,Te=t.clientX,De=Date.now(),W=0}function it(t){if(!ve)return;const e=t.clientX-Te,n=Date.now()-De;if(Math.abs(e)>3&&(fe=!0,Ce.value=!0),fe){const r=Math.max(100,K.value||700),g=Math.max(100,K.value||700)/400,I=n>0?e/n:0,j=Math.max(-g,Math.min(g,I));n>0&&(W=W*.65+j*.35),P.value-=e/r*R.value}Te=t.clientX,De=Date.now()}function Be(){if(ve&&(ve=!1,Ae.value=!1,fe&&Math.abs(W)>.05)){let t=W,e=Date.now();const n=()=>{const r=Date.now(),m=Math.min(r-e,64);e=r;const g=Math.max(100,K.value||700);P.value-=t*m/g*R.value;const I=5*365*864e5;P.value=Math.max(Date.now()-I,Math.min(Date.now()+I,P.value)),t*=Math.pow(.88,m/16),Math.abs(t)>.008&&(Ie=requestAnimationFrame(n))};Ie=requestAnimationFrame(n)}}function dt(t){t.preventDefault(),Re();const e=Math.exp(t.deltaY*.0015),n=Math.max(ca,Math.min(pa,R.value*e)),r=Me.value?.getBoundingClientRect();if(r&&r.width>0){const m=Math.max(0,Math.min(1,(t.clientX-r.left)/r.width)),g=P.value-R.value/2+m*R.value;P.value=g+n*(.5-m)}R.value=n}const w=b(null);function ut(t){Ce.value||(w.value=w.value?.id===t.id?null:t)}const Ee=F(()=>{const{start:t,end:e}=ae.value,n=Date.now();return n<t.getTime()||n>e.getTime()?null:`${(n-t.getTime())/(e.getTime()-t.getTime())*100}%`}),rt=F(()=>{const t=localStorage.getItem("aipanel_token")||"TOKEN",e=`${window.location.protocol}//${window.location.host}`,n=Y.value.map(m=>`- ${m.id}: ${m.name}`).join(`
`),r=c.value?`
### å½“å‰é€‰ä¸­ç›®æ ‡
ID: ${c.value.id}
æ ‡é¢˜: ${c.value.title}
çŠ¶æ€: ${c.value.status}
è¿›åº¦: ${c.value.progress}%
å¼€å§‹: ${c.value.startAt||"æœªè®¾ç½®"}
ç»“æŸ: ${c.value.endAt||"æœªè®¾ç½®"}`:"";return`## ç›®æ ‡è§„åˆ’åŠ©æ‰‹

ä½ æ˜¯å›¢é˜Ÿçš„ç›®æ ‡è§„åˆ’åŠ©æ‰‹ã€‚

### ðŸŽ¯ æ ¸å¿ƒèƒ½åŠ›ï¼šå¡«å†™è¡¨å•ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰

å½“ç”¨æˆ·æè¿°ç›®æ ‡ä¿¡æ¯æ—¶ï¼Œ**ç›´æŽ¥è¾“å‡º JSON å¡«å……è¡¨å•**ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

\`\`\`json
{"action":"fill_goal","data":{"title":"ç›®æ ‡æ ‡é¢˜","description":"æè¿°ï¼ˆå¯é€‰ï¼‰","type":"team","agentIds":["agentId1"],"status":"active","startAt":"2026-03-01T00:00:00Z","endAt":"2026-06-30T00:00:00Z","progress":0,"milestones":[{"title":"é‡Œç¨‹ç¢‘1","dueAt":"2026-04-01T00:00:00Z","done":false}]}}
\`\`\`

- type: "personal"ï¼ˆä¸ªäººï¼‰æˆ– "team"ï¼ˆå›¢é˜Ÿï¼‰
- status: "draft" / "active" / "completed" / "cancelled"
- agentIds: å‚ä¸Žæˆå‘˜çš„ ID åˆ—è¡¨
- æ—¶é—´æ ¼å¼ï¼šISO 8601ï¼ˆå¦‚ "2026-03-01T00:00:00Z"ï¼‰
- è¾“å‡º JSON åŽï¼Œé¡µé¢ä¼šè‡ªåŠ¨å¡«å……è¡¨å•ï¼Œç”¨æˆ·ç¡®è®¤åŽä¿å­˜

### API æ“ä½œï¼ˆå¦‚éœ€ç›´æŽ¥æ›´æ–°å·²æœ‰ç›®æ ‡ï¼‰

**æ›´æ–°è¿›åº¦ï¼š**
\`\`\`bash
curl -s -X PATCH ${e}/api/goals/{id}/progress -H "Authorization: Bearer ${t}" -H "Content-Type: application/json" -d '{"progress":50}'
\`\`\`

**æ·»åŠ å®šæœŸæ£€æŸ¥ï¼š**
\`\`\`bash
curl -s -X POST ${e}/api/goals/{id}/checks -H "Authorization: Bearer ${t}" -H "Content-Type: application/json" -d '{"name":"æ¯å‘¨æ£€æŸ¥","schedule":"0 9 * * 1","agentId":"agentId","tz":"Asia/Shanghai","prompt":"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€æœ¬å‘¨è¿›å±•","enabled":true}'
\`\`\`

### å½“å‰å›¢é˜Ÿæˆå‘˜
${n}
${r}

**å·¥ä½œæµç¨‹ï¼š**
1. ç”¨æˆ·æè¿°ç›®æ ‡ â†’ ä½ è¾“å‡º fill_goal JSON â†’ é¡µé¢è‡ªåŠ¨å¡«è¡¨
2. ç”¨æˆ·ç¡®è®¤å†…å®¹åŽè‡ªè¡Œç‚¹å‡»ã€Œåˆ›å»ºã€æˆ–ã€Œä¿å­˜ã€æŒ‰é’®
3. å¦‚éœ€æ›´æ–°å·²å­˜åœ¨ç›®æ ‡çš„è¿›åº¦/æ£€æŸ¥ï¼Œä½¿ç”¨ API æ“ä½œ`.trim()});St(async()=>{const t=await Yt.list().catch(()=>({data:[]}));Y.value=(t.data||[]).filter(e=>!e.system),E.value=Y.value[0]?.id||"",await X()}),et(Me,t=>{if(!t)return;new ResizeObserver(n=>{n[0]&&(K.value=n[0].contentRect.width)}).observe(t),K.value=t.getBoundingClientRect().width},{immediate:!0}),et(te,async t=>{t==="records"&&c.value&&await mt(c.value.id)});async function X(){try{const t=await H.list();if(ie.value=t.data||[],c.value){const e=ie.value.find(n=>n.id===c.value.id);e&&(c.value=e)}}catch{}}async function mt(t){ke.value=!0;try{const e=await H.listCheckRecords(t);me.value=(e.data||[]).slice().reverse()}catch{me.value=[]}finally{ke.value=!1}}function xe(t){c.value=t,L.value=!1,te.value="basic",Object.assign(i,{title:t.title,description:t.description||"",type:t.type,agentIds:[...t.agentIds||[]],status:t.status,progress:t.progress,startAt:B(t.startAt)?t.startAt:"",endAt:B(t.endAt)?t.endAt:"",milestones:(t.milestones||[]).map(e=>({...e}))})}function $e(){c.value=null,L.value=!0,te.value="basic",Xe.value=Date.now(),Object.assign(i,{title:"",description:"",type:"team",agentIds:[],status:"draft",progress:0,startAt:"",endAt:"",milestones:[]})}async function Oe(){if(!i.title.trim()){T.warning("è¯·å¡«å†™ç›®æ ‡æ ‡é¢˜");return}re.value=!0;const t={title:i.title,description:i.description||void 0,type:i.type,agentIds:i.agentIds,status:i.status,progress:i.progress,startAt:i.startAt||void 0,endAt:i.endAt||void 0,milestones:i.milestones.map(e=>({...e,id:e.id||"ms-"+Math.random().toString(36).slice(2,10)}))};try{if(c.value)await H.update(c.value.id,t),T.success("ä¿å­˜æˆåŠŸ"),await X();else{const e=await H.create(t);T.success("åˆ›å»ºæˆåŠŸ"),L.value=!1,await X();const n=ie.value.find(r=>r.id===e.data.id)||e.data;xe(n)}}catch(e){T.error(e.response?.data?.error||"æ“ä½œå¤±è´¥")}finally{re.value=!1}}async function ct(){if(c.value)try{await H.delete(c.value.id),T.success("å·²åˆ é™¤"),c.value=null,await X()}catch{T.error("åˆ é™¤å¤±è´¥")}}function Pe(){i.milestones.push({id:"ms-"+Math.random().toString(36).slice(2,10),title:"",dueAt:"",done:!1,agentIds:[]})}function pt(){Object.assign(M,{name:"",agentId:Y.value[0]?.id||"",schedule:"0 9 * * 1",tz:"Asia/Shanghai",prompt:"è¯·æ£€æŸ¥ç›®æ ‡ã€Œ{goal.title}ã€çš„è¿›å±•æƒ…å†µï¼ˆå½“å‰è¿›åº¦ {goal.progress}ï¼‰ï¼Œè·æˆªæ­¢æ—¥æœŸ {goal.endAt} è¿˜æœ‰ä¸€æ®µæ—¶é—´ï¼Œè¯·æ€»ç»“è¿‘æœŸè¿›å±•å¹¶å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚",enabled:!0}),ce.value="0 9 * * 1",le.value=!0}function vt(t){t!=="custom"&&(M.schedule=t)}async function ft(){if(!M.name.trim()){T.warning("è¯·å¡«å†™æ£€æŸ¥åç§°");return}if(!M.agentId){T.warning("è¯·é€‰æ‹©æ‰§è¡Œæˆå‘˜");return}if(c.value)try{await H.addCheck(c.value.id,{...M}),T.success("æ·»åŠ æˆåŠŸ"),le.value=!1;const t=await H.get(c.value.id);c.value=t.data,await X()}catch(t){T.error(t.response?.data?.error||"æ·»åŠ å¤±è´¥")}}async function gt(t){if(c.value)try{await H.updateCheck(c.value.id,t.id,{enabled:t.enabled})}catch{T.error("æ›´æ–°å¤±è´¥")}}async function _t(t){if(c.value)try{await H.runCheck(c.value.id,t.id),T.success("å·²è§¦å‘æ£€æŸ¥")}catch(e){T.error(e.response?.data?.error||"è§¦å‘å¤±è´¥")}}async function yt(t){if(c.value)try{await Bt.confirm(`ç¡®å®šåˆ é™¤æ£€æŸ¥è®¡åˆ’ã€Œ${t.name}ã€ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{type:"warning"}),await H.removeCheck(c.value.id,t.id),T.success("å·²åˆ é™¤");const e=await H.get(c.value.id);c.value=e.data,await X()}catch(e){e!=="cancel"&&T.error("åˆ é™¤å¤±è´¥")}}const Xe=b(0),je=F(()=>E.value?c.value?`goal-${c.value.id}-${E.value}`:`goals-new-${Xe.value}-${E.value}`:"");function bt(t){setTimeout(()=>X(),2e3);const e=m=>{try{const g=JSON.parse(m);if(g.action==="fill_goal"&&g.data)return ht(g.data),!0}catch{}return!1},n=t.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(n?.[1]&&e(n[1]))return;const r=t.match(/(\{"action"\s*:\s*"fill_goal"[\s\S]*?\})/);r?.[1]&&e(r[1])}function ht(t){!L.value&&!c.value&&$e(),t.title&&(i.title=t.title),t.description&&(i.description=t.description),t.type&&(i.type=t.type),t.status&&(i.status=t.status),typeof t.progress=="number"&&(i.progress=t.progress),t.agentIds&&Array.isArray(t.agentIds)&&(i.agentIds=t.agentIds),t.startAt&&(i.startAt=t.startAt),t.endAt&&(i.endAt=t.endAt),t.milestones&&Array.isArray(t.milestones)&&(i.milestones=t.milestones.map(e=>({id:e.id||"ms-"+Math.random().toString(36).slice(2,10),title:e.title||"",dueAt:e.dueAt||"",done:!!e.done,agentIds:e.agentIds||[]}))),T.success("AI å·²å¡«å†™è¡¨å•ï¼Œç¡®è®¤åŽç‚¹å‡»ä¿å­˜")}function B(t){if(!t)return!1;const e=new Date(t);return!isNaN(e.getTime())&&e.getFullYear()>1970}function wt(t){return B(t.startAt)&&B(t.endAt)}function Ze(t){const{start:e,end:n}=ae.value,r=n.getTime()-e.getTime(),m=new Date(t.startAt).getTime(),g=new Date(t.endAt).getTime(),I=(m-e.getTime())/r*100,j=(g-e.getTime())/r*100,C=Math.max(0,I),d=Math.max(C,j),h=Math.max(1,d-C);return{left:C,width:h}}function kt(t){return Ze(t).width}function Vt(t){const{left:e,width:n}=Ze(t),r=t.agentIds?.[0]&&O.value[t.agentIds[0]]?O.value[t.agentIds[0]]:"#409eff",m=t.agentIds?.[1]&&O.value[t.agentIds[1]]?O.value[t.agentIds[1]]:r;return{left:`${e}%`,width:`${n}%`,background:t.agentIds?.length>1?`linear-gradient(90deg,${r},${m})`:r}}function Mt(t){const{start:e,end:n}=ae.value;return B(t.dueAt)?`${(new Date(t.dueAt).getTime()-e.getTime())/(n.getTime()-e.getTime())*100}%`:"-100%"}function At(t,e,n){const r=[],m=e.getTime()-t.getTime();if(m<=0||!isFinite(m))return r;const g=300;if(m/n.ms>g){const h=[...He].reverse().find(S=>m/S.ms<=g);h&&(n=h)}const j=h=>((h.getTime()-t.getTime())/m*100).toFixed(2)+"%";let C="",d;if(n.kind==="minute")d=new Date(t),d.setSeconds(0,0),d.setMinutes(Math.floor(d.getMinutes()/n.step)*n.step);else if(n.kind==="hour")d=new Date(t),d.setMinutes(0,0,0),d.setHours(Math.floor(d.getHours()/n.step)*n.step);else if(n.kind==="day")d=new Date(t.getFullYear(),t.getMonth(),t.getDate());else if(n.kind==="week"){d=new Date(t.getFullYear(),t.getMonth(),t.getDate());const h=d.getDay();d.setDate(d.getDate()-(h===0?6:h-1))}else if(n.kind==="month"){const h=t.getMonth();d=new Date(t.getFullYear(),Math.floor(h/n.step)*n.step,1)}else d=new Date(Math.floor(t.getFullYear()/n.step)*n.step,0,1);for(;d.getTime()<=e.getTime();){const h=d.getFullYear(),S=d.getMonth()+1,N=d.getDate(),ne=d.getHours(),_e=d.getMinutes();let G="",J="";n.kind==="minute"||n.kind==="hour"?(G=`${h}-${S}-${N}`,J=`${S}/${N}`):n.kind==="day"||n.kind==="week"?(G=`${h}-${S}`,J=S===1?`${h}å¹´`:`${S}æœˆ`):n.kind==="month"&&(G=String(h),J=String(h));const Q=G&&G!==C?J:void 0;Q&&(C=G);let $="";n.kind==="minute"?$=`${String(ne).padStart(2,"0")}:${String(_e).padStart(2,"0")}`:n.kind==="hour"?$=`${String(ne).padStart(2,"0")}æ—¶`:n.kind==="day"?$=String(N):n.kind==="week"?$=`${S}/${N}`:n.kind==="month"?$=`${S}æœˆ`:$=String(h),r.push({label:$,yearMark:Q,left:j(d),ts:d.getTime()}),n.kind==="minute"?d.setMinutes(d.getMinutes()+n.step):n.kind==="hour"?d.setHours(d.getHours()+n.step):n.kind==="day"||n.kind==="week"?d.setDate(d.getDate()+n.step):n.kind==="month"?d.setMonth(d.getMonth()+n.step):d.setFullYear(d.getFullYear()+n.step)}return r}function se(t){if(t.status==="completed")return 100;if(!B(t.startAt)||!B(t.endAt))return t.progress;const e=Date.now(),n=new Date(t.startAt).getTime(),r=new Date(t.endAt).getTime();return r<=n?t.progress:Math.min(100,Math.max(0,Math.round((e-n)/(r-n)*100)))}function qe(t){if(t.status==="completed")return"#67c23a";const e=se(t);return e>=80?"#409eff":e>=40?"#e6a23c":"#909399"}function Ke(t){return{draft:"è‰ç¨¿",active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[t]??t}function We(t){return{draft:"info",active:"",completed:"success",cancelled:"danger"}[t]??"info"}function ge(t){return B(t)?new Date(t).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}):"â€”"}function Ct(t){if(!t)return"";const e=new Date(t);return isNaN(e.getTime())?"":e.toLocaleString("zh-CN")}return(t,e)=>{const n=_("el-icon"),r=_("el-button"),m=_("el-option"),g=_("el-select"),I=_("el-tag"),j=_("el-progress"),C=_("el-input"),d=_("el-form-item"),h=_("el-radio-button"),S=_("el-radio-group"),N=_("el-date-picker"),ne=_("el-slider"),_e=_("el-checkbox"),G=_("el-form"),J=_("el-popconfirm"),Q=_("el-tab-pane"),$=_("el-table-column"),Tt=_("el-text"),Je=_("el-switch"),Dt=_("el-table"),Qe=_("el-empty"),It=_("el-timeline-item"),xt=_("el-timeline"),$t=_("el-tabs"),zt=_("el-dialog");return u(),p("div",Pt,[o("div",{class:"gs-sidebar",style:x({width:be.value+"px"})},[o("div",Xt,[e[35]||(e[35]=o("span",{class:"sidebar-title"},"ç›®æ ‡è§„åˆ’",-1)),o("div",jt,[a(r,{size:"small",circle:"",onClick:X},{default:s(()=>[a(n,null,{default:s(()=>[a(V(Ht))]),_:1})]),_:1}),a(r,{size:"small",type:"primary",circle:"",onClick:$e},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1})]),_:1})])]),o("div",Zt,[a(g,{modelValue:de.value,"onUpdate:modelValue":e[0]||(e[0]=l=>de.value=l),placeholder:"æ‰€æœ‰çŠ¶æ€",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[a(m,{label:"è‰ç¨¿",value:"draft"}),a(m,{label:"è¿›è¡Œä¸­",value:"active"}),a(m,{label:"å·²å®Œæˆ",value:"completed"}),a(m,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"]),a(g,{modelValue:ue.value,"onUpdate:modelValue":e[1]||(e[1]=l=>ue.value=l),placeholder:"æ‰€æœ‰æˆå‘˜",clearable:"",size:"small",class:"filter-sel"},{default:s(()=>[(u(!0),p(k,null,A(Y.value,l=>(u(),U(m,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",qt,[L.value?(u(),p("div",Kt,[o("div",Wt,[o("span",Jt,v(i.title.trim()||"æ–°ç›®æ ‡â€¦"),1),a(I,{type:"info",size:"small",effect:"plain"},{default:s(()=>[...e[36]||(e[36]=[y("è‰ç¨¿",-1)])]),_:1})]),e[37]||(e[37]=o("div",{class:"gi-new-hint"},"å°šæœªä¿å­˜",-1))])):D("",!0),pe.value.length===0&&!L.value?(u(),p("div",Qt,"æš‚æ— ç›®æ ‡")):D("",!0),(u(!0),p(k,null,A(pe.value,l=>(u(),p("div",{key:l.id,class:Z(["goal-item",{active:c.value?.id===l.id}]),onClick:f=>xe(l)},[o("div",tl,[o("span",ll,v(l.title),1),a(I,{type:We(l.status),size:"small",effect:"plain"},{default:s(()=>[y(v(Ke(l.status)),1)]),_:2},1032,["type"])]),o("div",al,[o("div",{class:"gi-progress-bar",style:x({width:l.progress+"%",background:qe(l)})},null,4),o("span",sl,v(l.progress)+"%",1)]),o("div",nl,[o("div",ol,[(u(!0),p(k,null,A((l.agentIds||[]).slice(0,3),f=>(u(),p("div",{key:f,class:"gi-avatar",style:x({background:O.value[f]||"#6366f1"})},v((q.value[f]||f)[0]),5))),128)),(l.agentIds||[]).length>3?(u(),p("span",il,"+"+v(l.agentIds.length-3),1)):D("",!0)]),o("span",dl,v(ge(l.startAt))+" â€” "+v(ge(l.endAt)),1)])],10,el))),128))])],4),o("div",{class:Z(["gs-handle",{dragging:ee.value==="side"}]),onMousedown:e[2]||(e[2]=l=>Se(l,"side"))},[...e[38]||(e[38]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",ul,[!c.value&&!L.value?(u(),p("div",rl,[o("div",ml,[o("span",cl,[a(n,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:s(()=>[a(V(ye))]),_:1}),e[39]||(e[39]=y(" ç›®æ ‡æ€»è§ˆ Â· ç”˜ç‰¹å›¾ ",-1))]),a(r,{type:"primary",size:"small",onClick:$e},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[40]||(e[40]=y(" æ–°å»ºç›®æ ‡ ",-1))]),_:1})]),pe.value.length===0?(u(),p("div",pl,[a(n,{size:"48",color:"#c0c4cc"},{default:s(()=>[a(V(ye))]),_:1}),e[41]||(e[41]=o("p",null,"æš‚æ— ç›®æ ‡ï¼Œç‚¹å‡»æ–°å»ºå¼€å§‹è§„åˆ’",-1))])):(u(),p("div",{key:1,class:Z(["gantt-wrap",{"is-dragging":Ae.value}]),onWheel:tt(dt,["prevent"]),onMousedown:ot,onMousemove:it,onMouseup:Be,onMouseleave:tt(Be,["self"])},[o("div",vl,[o("div",fl,[o("span",gl,v(Ge.value.label)+"/æ ¼ â†•ç¼©æ”¾",1)]),o("div",{class:"gantt-timeline-col",ref_key:"ganttTimelineRef",ref:Me},[o("div",_l,[(u(!0),p(k,null,A(Le.value.filter(l=>l.yearMark),l=>(u(),p("div",{key:"yr-"+l.ts,class:"gantt-year-label",style:x({left:l.left})},v(l.yearMark),5))),128))]),o("div",yl,[(u(!0),p(k,null,A(Le.value,l=>(u(),p("div",{key:"lbl-"+l.ts,class:"gantt-month-label",style:x({left:l.left})},v(l.label),5))),128))])],512)]),o("div",bl,[o("div",hl,[e[42]||(e[42]=o("div",{class:"gantt-label-col"},null,-1)),o("div",wl,[(u(!0),p(k,null,A(V(nt),l=>(u(),p("div",{key:"gv-"+l.ts,class:"gantt-grid-line",style:x({left:l.left})},null,4))),128)),Ee.value!==null?(u(),p("div",{key:0,class:"gantt-today-line",style:x({left:Ee.value})},null,4)):D("",!0)])]),(u(!0),p(k,null,A(pe.value,l=>(u(),p("div",{key:l.id,class:Z(["gantt-row",{"is-selected":w.value?.id===l.id}]),onClick:f=>ut(l)},[o("div",Vl,[o("div",Ml,[o("div",Al,[(u(!0),p(k,null,A((l.agentIds||[]).slice(0,2),f=>(u(),p("div",{key:f,class:"gantt-avatar",style:x({background:O.value[f]||"#409eff"})},v((q.value[f]||f).slice(0,1)),5))),128))]),o("span",Cl,v(l.title),1),o("span",{class:Z(["gantt-pct","s-"+l.status])},v(se(l))+"%",3)])]),o("div",Tl,[wt(l)?(u(),p(k,{key:0},[o("div",{class:"gantt-bar",style:x(Vt(l))},[o("div",{class:"gantt-bar-progress",style:x({width:se(l)+"%"})},null,4),kt(l)>8?(u(),p("span",Dl,v(l.title),1)):D("",!0)],4),(u(!0),p(k,null,A(l.milestones||[],f=>(u(),p(k,{key:f.id},[B(f.dueAt)?(u(),p("div",{key:0,class:Z(["gantt-milestone",{done:f.done}]),style:x({left:Mt(f)}),title:f.title},null,14,Il)):D("",!0)],64))),128))],64)):(u(),p("div",xl,"æœªè®¾ç½®æ—¶é—´èŒƒå›´"))])],10,kl))),128))])],34)),a(Nt,{name:"gsp-slide"},{default:s(()=>[w.value?(u(),p("div",$l,[o("div",zl,[o("div",Ul,[(u(!0),p(k,null,A((w.value.agentIds||[]).slice(0,3),l=>(u(),p("div",{key:l,class:"gsp-avatar",style:x({background:O.value[l]||"#409eff"})},v((q.value[l]||l).slice(0,1)),5))),128))]),o("div",Sl,[o("span",Yl,v(w.value.title),1),a(I,{type:We(w.value.status),size:"small"},{default:s(()=>[y(v(Ke(w.value.status)),1)]),_:1},8,["type"])]),a(r,{type:"primary",size:"small",onClick:e[3]||(e[3]=l=>{xe(w.value),w.value=null})},{default:s(()=>[...e[43]||(e[43]=[y(" æŸ¥çœ‹è¯¦æƒ… â†’ ",-1)])]),_:1}),a(n,{class:"gsp-close",onClick:e[4]||(e[4]=l=>w.value=null)},{default:s(()=>[a(V(Gt))]),_:1})]),o("div",Nl,[o("div",Hl,[e[44]||(e[44]=o("span",{class:"gsp-stat-label"},"æ—¶é—´è¿›åº¦",-1)),a(j,{percentage:se(w.value),color:qe(w.value),"stroke-width":8,style:{flex:"1",margin:"0 10px"}},null,8,["percentage","color"]),o("span",Gl,v(se(w.value))+"%",1)]),o("div",Fl,[e[45]||(e[45]=o("span",{class:"gsp-stat-label"},"æ—¶é—´",-1)),o("span",Ll,v(ge(w.value.startAt))+" â€” "+v(ge(w.value.endAt)),1)]),w.value.milestones?.length?(u(),p("div",Rl,[e[46]||(e[46]=o("span",{class:"gsp-stat-label"},"é‡Œç¨‹ç¢‘",-1)),o("span",Bl,v(w.value.milestones.filter(l=>l.done).length)+"/"+v(w.value.milestones.length)+" å·²å®Œæˆ ",1)])):D("",!0),w.value.description?(u(),p("div",El,v(w.value.description),1)):D("",!0)])])):D("",!0)]),_:1})])):L.value?(u(),p(k,{key:1},[o("div",Ol,[o("div",Pl,[a(n,{style:{color:"#909399"}},{default:s(()=>[a(V(ye))]),_:1}),e[47]||(e[47]=o("span",{class:"crumb-sep"},"æ–°å»º",-1)),e[48]||(e[48]=o("span",{class:"crumb-name"},"ç›®æ ‡",-1))]),o("div",Xl,[a(r,{size:"small",onClick:e[5]||(e[5]=l=>L.value=!1)},{default:s(()=>[...e[49]||(e[49]=[y("å–æ¶ˆ",-1)])]),_:1}),a(r,{size:"small",type:"primary",loading:re.value,onClick:Oe},{default:s(()=>[a(n,null,{default:s(()=>[a(V(at))]),_:1}),e[50]||(e[50]=y(" åˆ›å»º ",-1))]),_:1},8,["loading"])])]),o("div",jl,[a(G,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(d,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(C,{modelValue:i.title,"onUpdate:modelValue":e[6]||(e[6]=l=>i.title=l),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(d,{label:"æè¿°"},{default:s(()=>[a(C,{modelValue:i.description,"onUpdate:modelValue":e[7]||(e[7]=l=>i.description=l),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç±»åž‹"},{default:s(()=>[a(S,{modelValue:i.type,"onUpdate:modelValue":e[8]||(e[8]=l=>i.type=l)},{default:s(()=>[a(h,{value:"personal"},{default:s(()=>[...e[51]||(e[51]=[y("ä¸ªäºº",-1)])]),_:1}),a(h,{value:"team"},{default:s(()=>[...e[52]||(e[52]=[y("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(g,{modelValue:i.agentIds,"onUpdate:modelValue":e[9]||(e[9]=l=>i.agentIds=l),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(u(!0),p(k,null,A(Y.value,l=>(u(),U(m,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"çŠ¶æ€"},{default:s(()=>[a(g,{modelValue:i.status,"onUpdate:modelValue":e[10]||(e[10]=l=>i.status=l),style:{width:"100%"}},{default:s(()=>[a(m,{label:"è‰ç¨¿",value:"draft"}),a(m,{label:"è¿›è¡Œä¸­",value:"active"}),a(m,{label:"å·²å®Œæˆ",value:"completed"}),a(m,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.startAt,"onUpdate:modelValue":e[11]||(e[11]=l=>i.startAt=l),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.endAt,"onUpdate:modelValue":e[12]||(e[12]=l=>i.endAt=l),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),c.value?(u(),U(d,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(ne,{modelValue:i.progress,"onUpdate:modelValue":e[13]||(e[13]=l=>i.progress=l),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):D("",!0),a(d,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",Zl,[(u(!0),p(k,null,A(i.milestones,(l,f)=>(u(),p("div",{key:f,class:"milestone-row"},[a(_e,{modelValue:l.done,"onUpdate:modelValue":z=>l.done=z},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:l.title,"onUpdate:modelValue":z=>l.title=z,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(N,{modelValue:l.dueAt,"onUpdate:modelValue":z=>l.dueAt=z,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(r,{type:"danger",size:"small",circle:"",onClick:z=>i.milestones.splice(f,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(V(ze))]),_:1})]),_:1},8,["onClick"])]))),128)),a(r,{size:"small",onClick:Pe,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[53]||(e[53]=y(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])],64)):c.value?(u(),p(k,{key:2},[o("div",ql,[o("div",Kl,[a(r,{size:"small",text:"",onClick:e[14]||(e[14]=l=>c.value=null),class:"crumb-back",title:"è¿”å›žç”˜ç‰¹å›¾"},{default:s(()=>[a(n,null,{default:s(()=>[a(V(Ft))]),_:1}),e[54]||(e[54]=y(" ç”˜ç‰¹å›¾ ",-1))]),_:1}),e[55]||(e[55]=o("span",{class:"crumb-sep"},"/",-1)),a(n,{style:{color:"#909399"}},{default:s(()=>[a(V(ye))]),_:1}),o("span",Wl,v(c.value.title),1)]),o("div",Jl,[a(r,{size:"small",type:"primary",loading:re.value,onClick:Oe},{default:s(()=>[a(n,null,{default:s(()=>[a(V(at))]),_:1}),e[56]||(e[56]=y(" ä¿å­˜ ",-1))]),_:1},8,["loading"]),a(J,{title:`ç¡®è®¤åˆ é™¤ã€Œ${c.value.title}ã€ï¼Ÿ`,onConfirm:ct},{reference:s(()=>[a(r,{size:"small",type:"danger",plain:""},{default:s(()=>[a(n,null,{default:s(()=>[a(V(ze))]),_:1})]),_:1})]),_:1},8,["title"])])]),a($t,{modelValue:te.value,"onUpdate:modelValue":e[23]||(e[23]=l=>te.value=l),class:"editor-tabs"},{default:s(()=>[a(Q,{label:"åŸºæœ¬ä¿¡æ¯",name:"basic"},{default:s(()=>[o("div",Ql,[a(G,{model:i,"label-width":"90px",size:"small",class:"goal-inner-form"},{default:s(()=>[a(d,{label:"æ ‡é¢˜",required:""},{default:s(()=>[a(C,{modelValue:i.title,"onUpdate:modelValue":e[15]||(e[15]=l=>i.title=l),placeholder:"ç›®æ ‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),a(d,{label:"æè¿°"},{default:s(()=>[a(C,{modelValue:i.description,"onUpdate:modelValue":e[16]||(e[16]=l=>i.description=l),type:"textarea",rows:2,placeholder:"ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç±»åž‹"},{default:s(()=>[a(S,{modelValue:i.type,"onUpdate:modelValue":e[17]||(e[17]=l=>i.type=l)},{default:s(()=>[a(h,{value:"personal"},{default:s(()=>[...e[57]||(e[57]=[y("ä¸ªäºº",-1)])]),_:1}),a(h,{value:"team"},{default:s(()=>[...e[58]||(e[58]=[y("å›¢é˜Ÿ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å‚ä¸Žæˆå‘˜"},{default:s(()=>[a(g,{modelValue:i.agentIds,"onUpdate:modelValue":e[18]||(e[18]=l=>i.agentIds=l),multiple:"",placeholder:"é€‰æ‹©æˆå‘˜",style:{width:"100%"}},{default:s(()=>[(u(!0),p(k,null,A(Y.value,l=>(u(),U(m,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"çŠ¶æ€"},{default:s(()=>[a(g,{modelValue:i.status,"onUpdate:modelValue":e[19]||(e[19]=l=>i.status=l),style:{width:"100%"}},{default:s(()=>[a(m,{label:"è‰ç¨¿",value:"draft"}),a(m,{label:"è¿›è¡Œä¸­",value:"active"}),a(m,{label:"å·²å®Œæˆ",value:"completed"}),a(m,{label:"å·²å–æ¶ˆ",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.startAt,"onUpdate:modelValue":e[20]||(e[20]=l=>i.startAt=l),type:"datetime",placeholder:"é€‰æ‹©å¼€å§‹æ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),a(d,{label:"ç»“æŸæ—¶é—´"},{default:s(()=>[a(N,{modelValue:i.endAt,"onUpdate:modelValue":e[21]||(e[21]=l=>i.endAt=l),type:"datetime",placeholder:"é€‰æ‹©ç»“æŸæ—¶é—´",style:{width:"100%"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue"])]),_:1}),c.value?(u(),U(d,{key:0,label:"è¿›åº¦"},{default:s(()=>[a(ne,{modelValue:i.progress,"onUpdate:modelValue":e[22]||(e[22]=l=>i.progress=l),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})):D("",!0),a(d,{label:"é‡Œç¨‹ç¢‘"},{default:s(()=>[o("div",ea,[(u(!0),p(k,null,A(i.milestones,(l,f)=>(u(),p("div",{key:f,class:"milestone-row"},[a(_e,{modelValue:l.done,"onUpdate:modelValue":z=>l.done=z},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:l.title,"onUpdate:modelValue":z=>l.title=z,placeholder:"é‡Œç¨‹ç¢‘æ ‡é¢˜",size:"small",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),a(N,{modelValue:l.dueAt,"onUpdate:modelValue":z=>l.dueAt=z,type:"date",placeholder:"æˆªæ­¢æ—¥",size:"small",style:{width:"130px"},"value-format":"YYYY-MM-DDTHH:mm:ssZ"},null,8,["modelValue","onUpdate:modelValue"]),a(r,{type:"danger",size:"small",circle:"",onClick:z=>i.milestones.splice(f,1)},{default:s(()=>[a(n,null,{default:s(()=>[a(V(ze))]),_:1})]),_:1},8,["onClick"])]))),128)),a(r,{size:"small",onClick:Pe,style:{"margin-top":"4px"}},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[59]||(e[59]=y(" æ·»åŠ é‡Œç¨‹ç¢‘ ",-1))]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1}),a(Q,{label:"å®šæœŸæ£€æŸ¥",name:"checks"},{default:s(()=>[o("div",ta,[o("div",la,[a(r,{type:"primary",size:"small",onClick:pt},{default:s(()=>[a(n,null,{default:s(()=>[a(V(oe))]),_:1}),e[60]||(e[60]=y(" æ·»åŠ æ£€æŸ¥ ",-1))]),_:1})]),a(Dt,{data:c.value.checks,size:"small",stripe:"",class:"checks-table"},{default:s(()=>[a($,{prop:"name",label:"åç§°","min-width":"120"}),a($,{label:"é¢‘çŽ‡","min-width":"140"},{default:s(({row:l})=>[o("code",aa,v(l.schedule),1),a(Tt,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[y(v(l.tz||"Asia/Shanghai"),1)]),_:2},1024)]),_:1}),a($,{label:"æˆå‘˜",width:"90"},{default:s(({row:l})=>[y(v(q.value[l.agentId]||l.agentId),1)]),_:1}),a($,{label:"å¯ç”¨",width:"60"},{default:s(({row:l})=>[a(Je,{modelValue:l.enabled,"onUpdate:modelValue":f=>l.enabled=f,size:"small",onChange:f=>gt(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a($,{label:"æ“ä½œ",width:"130"},{default:s(({row:l})=>[a(r,{size:"small",link:"",onClick:f=>_t(l)},{default:s(()=>[...e[61]||(e[61]=[y("ç«‹å³è¿è¡Œ",-1)])]),_:1},8,["onClick"]),a(r,{size:"small",link:"",type:"danger",onClick:f=>yt(l)},{default:s(()=>[...e[62]||(e[62]=[y("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),c.value.checks?.length?D("",!0):(u(),U(Qe,{key:0,description:"æš‚æ— æ£€æŸ¥è®¡åˆ’","image-size":60}))])]),_:1}),a(Q,{label:"æ£€æŸ¥è®°å½•",name:"records"},{default:s(()=>[o("div",sa,[ke.value?(u(),p("div",na,[a(n,{class:"is-loading",size:"24"},{default:s(()=>[a(V(Lt))]),_:1})])):me.value.length?(u(),U(xt,{key:1,class:"records-timeline"},{default:s(()=>[(u(!0),p(k,null,A(me.value,l=>(u(),U(It,{key:l.id,timestamp:Ct(l.runAt),type:l.status==="ok"?"success":"danger",placement:"top"},{default:s(()=>[o("div",oa,[o("div",ia,[o("div",{class:"rec-avatar",style:x({background:O.value[l.agentId]||"#409eff"})},v((q.value[l.agentId]||"?")[0]),5),o("span",da,v(q.value[l.agentId]||l.agentId),1),a(I,{type:l.status==="ok"?"success":"danger",size:"small"},{default:s(()=>[y(v(l.status),1)]),_:2},1032,["type"])]),o("div",ua,v(l.output||"ï¼ˆæ— è¾“å‡ºï¼‰"),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})):(u(),U(Qe,{key:2,description:"æš‚æ— æ£€æŸ¥è®°å½•","image-size":60}))])]),_:1})]),_:1},8,["modelValue"])],64)):D("",!0)]),o("div",{class:Z(["gs-handle",{dragging:ee.value==="chat"}]),onMousedown:e[24]||(e[24]=l=>Se(l,"chat"))},[...e[63]||(e[63]=[o("div",{class:"gs-handle-bar"},null,-1)])],34),o("div",{class:"gs-chat",style:x({width:he.value+"px"})},[o("div",ra,[a(n,null,{default:s(()=>[a(V(Rt))]),_:1}),e[64]||(e[64]=o("span",null,"AI ç›®æ ‡åŠ©æ‰‹",-1)),a(g,{modelValue:E.value,"onUpdate:modelValue":e[25]||(e[25]=l=>E.value=l),size:"small",style:{"margin-left":"auto",width:"110px"},placeholder:"é€‰æ‹©æˆå‘˜"},{default:s(()=>[(u(!0),p(k,null,A(Y.value,l=>(u(),U(m,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",ma,[E.value?(u(),U(Et,{key:je.value,"agent-id":E.value,"session-id":je.value,context:rt.value,"welcome-message":c.value?`æ­£åœ¨æŸ¥çœ‹ç›®æ ‡ã€Œ${c.value.title}ã€ï¼Œæˆ‘å¯ä»¥å¸®ä½ ä¿®æ”¹ç›®æ ‡ä¿¡æ¯ã€æ·»åŠ é‡Œç¨‹ç¢‘æˆ–è®¾ç½®å®šæœŸæ£€æŸ¥ã€‚`:"ä½ å¥½ï¼æˆ‘å¯ä»¥å¸®ä½ åˆ›å»ºç›®æ ‡ï¼Œè¯´ä¸€ä¸‹éœ€æ±‚å³å¯ï¼Œæˆ‘ä¼šè‡ªåŠ¨å¡«å†™è¡¨å•ã€‚",examples:c.value?["å¸®æˆ‘æŠŠè¿›åº¦æ›´æ–°åˆ° 60%","æ·»åŠ 3ä¸ªé‡Œç¨‹ç¢‘","æ¯å‘¨ä¸€æ£€æŸ¥è¿™ä¸ªç›®æ ‡"]:["å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿç›®æ ‡ï¼šQ2ç”¨æˆ·å¢žé•¿ï¼Œ3æœˆ1æ—¥åˆ°6æœˆ30æ—¥","ä¸ªäººç›®æ ‡ï¼šå­¦ä¹  Go è¯­è¨€ï¼Œæœ¬æœˆå®Œæˆ"],height:"100%",onResponse:bt},null,8,["agent-id","session-id","context","welcome-message","examples"])):D("",!0)])],4),a(zt,{modelValue:le.value,"onUpdate:modelValue":e[34]||(e[34]=l=>le.value=l),title:"æ·»åŠ å®šæœŸæ£€æŸ¥",width:"480px"},{footer:s(()=>[a(r,{onClick:e[33]||(e[33]=l=>le.value=!1)},{default:s(()=>[...e[66]||(e[66]=[y("å–æ¶ˆ",-1)])]),_:1}),a(r,{type:"primary",onClick:ft},{default:s(()=>[...e[67]||(e[67]=[y("æ·»åŠ ",-1)])]),_:1})]),default:s(()=>[a(G,{model:M,"label-width":"90px",size:"small"},{default:s(()=>[a(d,{label:"åç§°",required:""},{default:s(()=>[a(C,{modelValue:M.name,"onUpdate:modelValue":e[26]||(e[26]=l=>M.name=l),placeholder:"å¦‚ï¼šæ¯å‘¨è¿›åº¦æ£€æŸ¥"},null,8,["modelValue"])]),_:1}),a(d,{label:"æ‰§è¡Œæˆå‘˜",required:""},{default:s(()=>[a(g,{modelValue:M.agentId,"onUpdate:modelValue":e[27]||(e[27]=l=>M.agentId=l),style:{width:"100%"}},{default:s(()=>[(u(!0),p(k,null,A(Y.value,l=>(u(),U(m,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"æ£€æŸ¥é¢‘çŽ‡"},{default:s(()=>[a(g,{modelValue:ce.value,"onUpdate:modelValue":e[28]||(e[28]=l=>ce.value=l),style:{width:"100%"},onChange:vt},{default:s(()=>[a(m,{label:"æ¯å¤©ä¸Šåˆ9ç‚¹",value:"0 9 * * *"}),a(m,{label:"æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹",value:"0 9 * * 1"}),a(m,{label:"æ¯å‘¨äº”ä¸‹åˆ5ç‚¹",value:"0 17 * * 5"}),a(m,{label:"æ¯æœˆ1æ—¥ä¸Šåˆ9ç‚¹",value:"0 9 1 * *"}),a(m,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),ce.value==="custom"?(u(),U(d,{key:0,label:"Cron"},{default:s(()=>[a(C,{modelValue:M.schedule,"onUpdate:modelValue":e[29]||(e[29]=l=>M.schedule=l),placeholder:"0 9 * * 1"},null,8,["modelValue"])]),_:1})):D("",!0),a(d,{label:"æ—¶åŒº"},{default:s(()=>[a(g,{modelValue:M.tz,"onUpdate:modelValue":e[30]||(e[30]=l=>M.tz=l),style:{width:"100%"}},{default:s(()=>[a(m,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),a(m,{label:"UTC",value:"UTC"}),a(m,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"æ£€æŸ¥æç¤ºè¯"},{default:s(()=>[a(C,{modelValue:M.prompt,"onUpdate:modelValue":e[31]||(e[31]=l=>M.prompt=l),type:"textarea",rows:3,placeholder:"å¯ç”¨å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt}"},null,8,["modelValue"]),e[65]||(e[65]=o("div",{style:{"font-size":"11px",color:"#94a3b8","margin-top":"3px"}}," å˜é‡ï¼š{goal.title} {goal.progress} {goal.endAt} {goal.startAt} {goal.status} ",-1))]),_:1}),a(d,{label:"å¯ç”¨"},{default:s(()=>[a(Je,{modelValue:M.enabled,"onUpdate:modelValue":e[32]||(e[32]=l=>M.enabled=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ba=Ot(va,[["__scopeId","data-v-d9d32f24"]]);export{ba as default};
